<html lang="en">
<head>
<title>Linux STREAMS (LiS)</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Linux STREAMS (LiS)">
<meta name="generator" content="makeinfo 4.8">
<link title="Top" rel="top" href="#Top">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<h1 class="settitle">Linux STREAMS (LiS)</h1>
<a name="Top"></a>

<h2 class="unnumbered">Linux STREAMS (LiS) Installation and Reference Manual</h2>

<h2 class="unnumbered">About This Manual</h2>

<p>This is Edition 4.rc2, last updated 2006-07-11, of <cite>The
Linux STREAMS (LiS) Installation and Reference Manual</cite>, for Version 2.18
release 4.rc2 of the Linux STREAMS (LiS) package.

<!--  -->
<p><a name="Acknowledgements"></a>

<h2 class="unnumbered">Acknowledgements</h2>

<p><a name="index-credits-1"></a>

<p><a name="Sponsors"></a>

<h3 class="section">Sponsors</h3>

<p><a name="index-sponsors-2"></a>
Funding for maintenance of the Linux STREAMS (LiS) package was provided in
part by:

     <ul>
<li>OpenSS7 Corporation
</ul>

<p><a name="Contributors"></a>

<h3 class="section">Contributors</h3>

<p><a name="index-contributors-3"></a>
The current maintainer of the Linux STREAMS (LiS) package is
<a href="mailto:bidulock@openss7.org">Brian F. G. Bidulock</a>.

<h4 class="subsection">Authors</h4>

<p>Linux STREAMS, termed LiS, is an SVR4 compatible STREAMS executive which runs in
the Linux Kernel as a loadable module.  It is the product of a joint effort
among the following authors.

     <ul>
<li>Francisco J. Ballesteros <a href="mailto:nemo@gsyc.escet.urjc.es">nemo@gsyc.escet.urjc.es</a>
<a name="index-Ballesteros_002c-Francisco-J_002e-4"></a><li>John Boyd <a href="mailto:jaboydjr@netwalk.com">jaboydjr@netwalk.com</a>
<a name="index-Boyd_002c-John-5"></a><li>Denis Froschauer <a href="mailto:Denis.Froschauer@hol.fr">Denis.Froschauer@hol.fr</a>
<a name="index-Froschauer_002c-Denis-6"></a><li>David Grothe <a href="mailto:dave@gcom.com">dave@gcom.com</a>
<a name="index-Grothe_002c-David-7"></a><li>Ole Husgaard <a href="mailto:sparre@login.dknet.dk">sparre@login.dknet.dk</a>
<a name="index-Husgaard_002c-Ole-8"></a><li>Jürgen Magin <a href="mailto:juergen.magin@octogon.de">juergen.magin@octogon.de</a>
<a name="index-Magin_002c-Jürgen-9"></a><li>Graham Wheeler <a href="mailto:gram@cdsec.com">gram@cdsec.com</a>
<a name="index-Wheeler_002c-Graham-10"></a><li>G Yeganjaiah <a href="mailto:yegag@hclt.com">yegag@hclt.com</a>
<a name="index-Yeganjaiah_002c-G-11"></a><li>Brian Bidulock <a href="mailto:bidulock@openss7.org">bidulock@openss7.org</a>
<a name="index-Bidulock_002c-Brian-F_002e-G_002e-12"></a></ul>

   <p>Brian Bidulock is the principal active maintainer of LiS, so please direct
questions to him rather than the others.<a rel="footnote" href="#fn-1" name="fnd-1"><sup>1</sup></a>
Ole Husgaard
has contributed to the kerneld support and installation procedures.  Jürgen
Magin contributed patches for Linux SPARC.  G Yeganjaiah added interrupt routine
support.  John Boyd implemented fattach and STREAMS pipes and FIFOs.  Brian
Bidulock developed a complete set of manual pages for LiS, converted the build
process to autoconf, wrapped the source RPMS, updated this manual for texinfo
and currently maintains and the package.

   <p>See <a href="#Author-Index">Author Index</a>, for a complete listing and cross-index of authors to
sections of this document. 
<a name="index-Grothe_002c-David-13"></a><a name="index-Husgaard_002c-Ole-14"></a><a name="index-Boyd_002c-John-15"></a><a name="index-Ballesteros_002c-Francisco-J_002e-16"></a><a name="index-Magin_002c-Jürgen-17"></a><a name="index-Yeganjaiah_002c-G-18"></a><a name="index-Bidulock_002c-Brian-F_002e-G_002e-19"></a>

<p><a name="Introduction"></a>

<h2 class="chapter">1 Introduction</h2>

<p><a name="index-introduction-20"></a>
This manual documents the design, implementation, installation, operation and
future development schedule of the Linux STREAMS (LiS) package.

<!--  -->
<p><a name="Notice"></a>

<h3 class="section">1.1 Notice</h3>

<p><a name="index-notice-21"></a><a name="index-licensing-22"></a>
This package is released and distributed under the <cite>GNU General Public License</cite>
(see <a href="#GNU-General-Public-License">GNU General Public License</a>).  Please note, however, that there are different licensing terms for the manual
pages and some of the documentation (derived from X/Open publications and other sources).  Consult
the permission notices contained in the documentation for more information.  This document, is
released under the <cite>GNU Free Documentation License</cite> (see <a href="#Documentation-License">Documentation License</a>) with all
sections invariant.

<p><a name="Overview"></a>

<h3 class="section">1.2 Overview</h3>

<p><a name="index-overview-23"></a>
This manual documents the design, implementation, installation, operation and
future development of the Linux STREAMS (LiS) package.

   <p>LiS is a software package that comprises an implementation of SVR4 compatible
STREAMS for Linux.  It takes the form of a loadable module for the Linux kernel. 
LiS installs in any directory on your system, not in the kernel source tree. 
(see <a href="#Installation">Installation</a>)

   <p>LiS-2.12 and beyond utilizes aggressive multi-tasking in multiple CPU SMP
environments.  For further information concerning this implementation,
see <a href="#LiS-SMP-Implementation">LiS SMP Implementation</a>.

   <p><strong>WARNING:</strong> This autoconf/RPM release of Linux STREAMS is distributed
under the terms of the GNU Public License (GPL) and <em>not</em> the GNU Lesser
Public License (LGPL).

   <p>This means that you <em>cannot</em> link proprietary STREAMS drivers with LiS and
load the entirety into the Linux kernel without violating license restrictions. 
OpenSS7 Corporation can remove this restriction for subscribers and sponsors of
the OpenSS7 Project.

<p><a name="Organization"></a>

<h3 class="section">1.3 Organization of this Document</h3>

<p><a name="index-organization-24"></a>
This document is organized (loosely) into several sections as follows:

<p><a name="Conventions"></a>

<h3 class="section">1.4 Conventions and Definitions</h3>

<p><a name="index-conventions-25"></a><a name="index-definitions-26"></a>
This manual uses <cite>texinfo</cite> typographic conventions.

<!--  -->
<!--  -->
<p><a name="Objective"></a>

<h2 class="chapter">2 Objective</h2>

<p><a name="index-objective-27"></a>
<!--  -->

<p><a name="Reference"></a>

<h2 class="chapter">3 Reference</h2>

<p><a name="index-reference-28"></a>

<!--  -->
<!--  -->
<p><a name="Files"></a>

<h3 class="section">3.1 Files</h3>

<p><a name="index-headers-29"></a>

     <dl>
<dt><samp><span class="file">specfs.o</span></samp><dd><a name="index-specfs_002eo-30"></a><br><dt><samp><span class="file">streams.o</span></samp><dd><a name="index-streams_002eo-31"></a><br><dt><samp><span class="file">streams-aixcompat.o</span></samp><dd><a name="index-streams_002daixcompat_002eo-32"></a><br><dt><samp><span class="file">streams-hpuxcompat.o</span></samp><dd><a name="index-streams_002dhpuxcompat_002eo-33"></a><br><dt><samp><span class="file">streams-liscompat.o</span></samp><dd><a name="index-streams_002dliscompat_002eo-34"></a><br><dt><samp><span class="file">streams-osfcompat.o</span></samp><dd><a name="index-streams_002dosfcompat_002eo-35"></a><br><dt><samp><span class="file">streams-suncompat.o</span></samp><dd><a name="index-streams_002dsuncompat_002eo-36"></a><br><dt><samp><span class="file">streams-svr4compat.o</span></samp><dd><a name="index-streams_002dsvr4compat_002eo-37"></a><br><dt><samp><span class="file">streams-uw7compat.o</span></samp><dd><a name="index-streams_002duw7compat_002eo-38"></a></dl>

<!--  -->
<!--  -->
<p><a name="Drivers"></a>

<h3 class="section">3.2 Drivers</h3>

<p><a name="index-drivers-39"></a>
The LiS package comes with a number of STREAMS drivers and pushable modules in
source code form.  A number of these drivers and modules are small entities that
are used in the testing of LiS.  They are included so as to make it easy for any
user to run the LiS tests for themselves.

   <p>Other drivers are used to
implement STREAMS based pipes and FIFOs.

   <p>A driver in STREAMS has a major and minor device number associated with it and
an entry in the <samp><span class="file">/dev</span></samp> directory.  The driver is opened and closed just
like any file. 
<a name="index-g_t_002fdev-40"></a>
The driver names used in this document are the declared names that appear in the
LiS <samp><span class="file">Config</span></samp> file for the particular driver. 
<a name="index-Config-41"></a>

<p><a name="clone-drvr"></a>
<a name="clone_002ddrvr"></a>

<h4 class="subsection">3.2.1 clone-drvr</h4>

<h4 class="unnumberedsubsec">Device Name</h4>

<pre class="example">     /dev/clone_drvr
</pre>
   <p><a name="index-g_t_002fdev_002fclone_005fdrvr-42"></a>

<h4 class="unnumberedsubsec">Description</h4>

<p>This driver is used to assist LiS in implementing the "clone" open
function.  It appears under its own name as <samp><span class="file">/dev/clone_drvr</span></samp>.  By
convention, it is allocated the first major number of all the STREAMS
drivers. 
<a name="index-g_t_002fdev_002fclone_005fdrvr-43"></a>
In order to implement clone opens, one creates a node in the <samp><span class="file">/dev</span></samp>
directory for a device whose major number is set to that of the clone
driver, and whose minor number is the major number of the driver to
which the clone open is to be directed. 
<a name="index-g_t_002fdev-44"></a>
The clone driver's open routine forwards the open call to the target
driver, passing a unique flag that informs the driver that a clone
open is being requested.  The target driver then allocated a minor
device number to uniquely associate with this instance of the open
operation.  The clone driver synthesizes a new major/minor "device id"
to pass back to LiS.  LiS recognizes the change of major/minor from
the original open and takes steps to allocate control structures
unique to this open.

   <p>The "clone open" operation is intended to make is easy to open one
device from a pool of devices, such as pseudo ttys or logical
connections.  It saves application programs from having to scan a list
of device mnemonics issuing trial opens until one is found that
succeeds.

   <p>Note that the driver is named <samp><span class="file">/dev/clone_drvr</span></samp> instead of the more
traditional SVR4 <samp><span class="file">/dev/clone</span></samp>.  This is to avoid a conflict with
another driver named <samp><span class="file">/dev/clone</span></samp> on Linux systems. 
<a name="index-g_t_002fdev_002fclone-45"></a><a name="index-g_t_002fdev_002fclone_005fdrvr-46"></a>

<h4 class="unnumberedsubsec">Author</h4>

<p>David Grothe <a href="mailto:dave@gcom.com">dave@gcom.com</a>
<a name="index-Grothe_002c-David-47"></a>

<p><a name="fifo"></a>

<h4 class="subsection">3.2.2 fifo</h4>

<h4 class="unnumberedsubsec">Device Name</h4>

<pre class="example">     /dev/fifo (clone device)
     /dev/fifo.0
</pre>
   <p><a name="index-g_t_002fdev_002ffifo-48"></a><a name="index-g_t_002fdev_002ffifo_002e0-49"></a>

<h4 class="unnumberedsubsec">Description</h4>

<p>The fifo pseudo-driver (which is internal to LiS) provides
STREAMS-based fifos as single character special files, and
STREAMS-based pipes as pairs of character special files which are
interconnected (see pipe(3)).

   <p>STREAMS-based fifos differ from typical STREAMS-based character
special files in that there are not separate stream head and driver
queue pair within the STREAMS-based file.  Instead, a fifo is created
with only a single queue pair for the stream head.  Moreover, in a
typical driver queue pair, the write queue is not connected to a next
queue.  In a fifo, the write queue is directed to the read queue of the
pair.  A pipe comprises a pair of fifos, with the write queue of each
pair directed to the read queue of the other.  The two fifos comprising
a pipe are referred to as peers, and each somewhat represents a driver
to the other.  As a degenerate case, a fifo is its own peer.

   <p>STREAMS modules may be pushed onto fifos and pipes, but should not
expect a driver below them; instead, the SAMESTR() function should be
used from the write queue of a pair to determine if the module is the
lowest in the STREAMS-based file (this is called the midpoint).  The
structure of a fifo or pipe is preserved when modules are pushed (and
popped); i.e., the write queue at the midpoint will always be directed
at the read queue of the peer.

   <p>Input and output are handled at a fifo stream head as they would
normally be handled at a stream head.  In LiS, an fifo open() entry
point exists to assign minor device numbers to new opens under the
fifo major device number, and a close() entry point is used
correspondingly to release them.  These functions are kept in a
streamtab data struc ture (as they would normally be for any STREAMS
driver or module) which is private to the LiS implementation.

<h4 class="unnumberedsubsec">Application Usage</h4>

<p>In the current Linux kernels, character special major numbers are
limited to 16 bits, and major and minor device numbers to 8 bits each. 
This limits a system to 256 total major device numbers and 256 total
minor devices per major device number.  This is a rather severe
limitation where mechanisms like fifos and pipes are concerned.

   <p>However, a driver may handle more than one major device number.  The
fifo pseudo-driver uses this to overcome this limitation, by
supporting the automatic allocation and use of multiple major device
numbers for fifos and pipes.  Specifying more than 256 minor devices
is done in the usual manner, i.e., by specifying the number of "units"
in the appropriate <samp><span class="file">Config</span></samp> file.  Enough major device numbers will be
allocated to cover the requested number of minor devices (if
available, else an error will occur in strconf(8)).  The number
allocated will include one minor device per major number to be used as
a fifo-specific clone minor device (specifically, minor number 0),
which exhibits special behavior. 
<a name="index-Config-50"></a>
Normally, when cloning is done via the clone pseudo-driver, the clone
major device number is used, along with the desired actual major
number as the minor device num ber.  When an open() is performed on
such a device, the clone open() routine in turn calls the appropriate
driver's open(), with the sflag parameter set to CLONEOPEN.  The
driver's open() is expected in this case to allocate an unused minor
device number, and return it via an entirely new device number in the
devp parameter.  In this way, a driver can change the device number to
be used for a STREAMS-based file.  When minor device 0 for a specified
for a fifo major device, the driver will also clone a new minor device
number.  However, LiS opens fifo devices differently; specifically,
when an already-opened fifo-specific clone minor device is reopened,
the new and subsequent opens will use the already-opened clone.  Thus,
using minor device 0 for a fifo when creating a file sys tem node will
ensure that all concurrent opens of the associated path name will use
the same STREAMS-based file; at the same time, opens of different file
system nodes via different paths will open their respectively
different STREAMS-based files.  This is essentially how kernel-based
fifos behave -applications and users of STREAMS-based fifos don't have
to keep track of minor numbers to achieve this same behavior when it
is desired.

   <p>It is in fact recommended that only two forms of file sys tem nodes be
used for STREAMS-based fifos: the clone major number as major number
with a fifo major number as minor number, to be used when every open
of the associated path must clone a new fifo, and a fifo major number
as major number with 0 as the minor number, to be used when new opens
are to clone a new fifo but subsequent concurrent opens are to use the
already opened fifo.  These are represented by two device special file
paths created when LiS is installed: <samp><span class="file">/dev/fifo</span></samp> for the former, and
<samp><span class="file">/dev/fifo.0</span></samp> for the latter.  It is recommended that these be used,
possibly along with the equivalent of stat(2) to determine appropriate
major device numbers for the clone and fifo pseudo-drivers, which are
also determined when LiS is installed.  It can be noted that pipes are
actually created as instances of the former, after which the write
queues are peer-connected. 
<a name="index-g_t_002fdev_002ffifo-51"></a><a name="index-g_t_002fdev_002ffifo_002e0-52"></a>
The fifo pseudo-driver allocates minor devices in round-robin fashion;
i.e., a list of available minor devices is kept, and once a minor
number is finally closed, it is put at the end of this list.  Thus, a
fifo minor device which is opened and closed will not be immediately
reused.

<h4 class="unnumberedsubsec">Warnings</h4>

<p>Because STREAMS-based fifos and pipes are implemented as character
special devices, they do not appear as pipe devices when examined with
stat(2) or the equivalent (e.g., ls(1)); i.e.  the S_IFIFO indication
is not set in the mode - S_IFCHR is set instead, and the actual device
number is indicated in the st_rdev field of the stat data structure.

   <p>Because of the potential use of multiple major numbers, applications
should not depend on a fifo or pipe having a specific major device
number, nor should an application depend on all fifos and pipes having
the same major device number.

<h4 class="unnumberedsubsec">See Also</h4>

<p>clone(9), connld(9), fifo(4), ls(1), pipe(3), pipemod(9), STREAMS(4),
stat(2), strconf(8)

<h4 class="unnumberedsubsec">Author</h4>

<p>John Boyd, protologos LLC.  <a href="mailto:jaboydjr@netwalk.com">jaboydjr@netwalk.com</a>
<a name="index-Boyd_002c-John-53"></a>

<p><a name="loop-around"></a>
<a name="loop_002daround"></a>

<h4 class="subsection">3.2.3 loop-around</h4>

<h4 class="unnumberedsubsec">Device Name</h4>

<pre class="example">     /dev/loop_clone (clone device)
     /dev/loop.1
     /dev/loop.2
</pre>
   <p><a name="index-g_t_002fdev_002floop_005fclone-54"></a><a name="index-g_t_002fdev_002floop_002e1-55"></a><a name="index-g_t_002fdev_002floop_002e2-56"></a>

<h4 class="unnumberedsubsec">Description</h4>

<p>This driver is used by LiS and the strtst utility to assist in the
regression testing of LiS.  It connects two streams together in a
manner similar to that of a pipe.  Messages written into one stream
can be read back from the other.

   <p>The driver can be operated as a clone device with the two streams
being connected via ioctls.  A number of ioctls exist that tailor the
operation of the driver.  The user codes these ioctls as type I_STR
and passes a structure of type struct strioctl to the driver.  The
ic_cmd field of this structure is decoded according to the following
table.  the ic_dp and ic_len fields delimit an argument structure
which is also passed to the driver.  The argument structure differs
for each type of ic_cmd. 
<a name="index-struct-strioctl-57"></a>
   <p><table summary=""><tr align="left"><td valign="top" width="25%">ic_cmd value </td><td valign="top" width="15%">Argument Structure </td><td valign="top" width="60%">Description

<p><br></td></tr><tr align="left"><td valign="top" width="25%">LOOP_SET </td><td valign="top" width="15%">IN: int </td><td valign="top" width="60%">Argument is the minor device number of
the loop device to use for the other end of the connection.  If the
loop-around device had been opened by a directed open, such as to
<samp><span class="file">/dev/loop.1</span></samp>, then the minor device number is known from the device
node.  If it was opened via the <samp><span class="file">/dev/loop_clone</span></samp> device then the
minor device can be discovered via the LOOP_GET_DEV ioctl. 
<a name="index-g_t_002fdev_002floop_005fclone-58"></a><a name="index-g_t_002fdev_002floop_002e1-59"></a>
<br></td></tr><tr align="left"><td valign="top" width="25%">LOOP_PUTNXT </td><td valign="top" width="15%">None </td><td valign="top" width="60%">Set the driver into a mode in which it
will perform a direct putnext call on the other stream rather than the
default behavior of using the service queue to forward the message.

<p><br></td></tr><tr align="left"><td valign="top" width="25%">LOOP_MSGLVL </td><td valign="top" width="15%">IN: int </td><td valign="top" width="60%">Set to the number of messages to queue
in the service queue before forwarding to the other stream.  Zero means
forward immediately.

<p><br></td></tr><tr align="left"><td valign="top" width="25%">LOOP_TIMR </td><td valign="top" width="15%">IN: int </td><td valign="top" width="60%">Set the number of "ticks" to hold
messages before forwarding them to the other stream.

<p><br></td></tr><tr align="left"><td valign="top" width="25%">LOOP_MARK </td><td valign="top" width="15%">IN: int </td><td valign="top" width="60%">Set the MSGMARK flag for each of the
next n messages before forwarding them to the other stream.

<p><br></td></tr><tr align="left"><td valign="top" width="25%">LOOP_GET_DEV </td><td valign="top" width="15%">OUT: int </td><td valign="top" width="60%">Return the minor device number of
this stream.  Useful for finding out the minor number of a clone device.

<p><br></td></tr><tr align="left"><td valign="top" width="25%">LOOP_BUFCALL </td><td valign="top" width="15%">None </td><td valign="top" width="60%">Use the bufcall mechanism to allocate a
buffer for copying the next message.

<p><br></td></tr><tr align="left"><td valign="top" width="25%">LOOP_CONCAT </td><td valign="top" width="15%">IN: int </td><td valign="top" width="60%">Concatenate this many messages into a
single message and then forward on the other stream.  One concatenation
resets this value to zero and the ioctl needs to be issued again to repeat
the behavior.

<p><br></td></tr><tr align="left"><td valign="top" width="25%">LOOP_COPY </td><td valign="top" width="15%">None </td><td valign="top" width="60%">From this point on, copy messages rather
than passing them through to the other stream.
   <br></td></tr></table>

<h4 class="unnumberedsubsec">Author</h4>

<p>David Grothe <a href="mailto:dave@gcom.com">dave@gcom.com</a> plus others originally. 
<a name="index-Grothe_002c-David-60"></a>

<p><a name="mini-mux"></a>
<a name="mini_002dmux"></a>

<h4 class="subsection">3.2.4 mini-mux</h4>

<h4 class="unnumberedsubsec">Device Name</h4>

<pre class="example">     /dev/mux_clone (clone device)
     /dev/minimux.1
     /dev/minimux.2
</pre>
   <p><a name="index-g_t_002fdev_002fmux_005fclone-61"></a><a name="index-g_t_002fdev_002fminimux_002e1-62"></a><a name="index-g_t_002fdev_002fminimux_002e2-63"></a>

<h4 class="unnumberedsubsec">Description</h4>

<p>This driver is used by LiS in its testing procedures.  It is a small
multiplexing driver that allows cascaded multiplexors to be built and
torn down.  The driver uses a pair of ioctls to establish connectivity
between upper streams and lower streams.  This allows control over how
data flows through the multiplexor.

   <p>Both of these ioctls are coded as type I_STR and pass a structure of
type struct strioctl to the driver.  The ic_cmd field of this
structure is decoded according to the following table.  the ic_dp and
ic_len fields delimit an argument structure which is also passed to
the driver.  The argument structure may differ for each type of
ic_cmd. 
<a name="index-struct-strioctl-64"></a>
   <p><table summary=""><tr align="left"><td valign="top" width="25%">ic_cmd value </td><td valign="top" width="15%">Argument Structure </td><td valign="top" width="60%">Description

<p><br></td></tr><tr align="left"><td valign="top" width="25%">MINIMUX_UP </td><td valign="top" width="15%">IN: int </td><td valign="top" width="60%">The argument is a muxid that was
returned from an I_LINK ioctl.  This ioctl causes the lower stream
indicated by the muxid to be connected to this stream.  This is
unidirectional linkage and only affects the upstream flow of messages.

<p><br></td></tr><tr align="left"><td valign="top" width="25%">MINIMUX_DOWN </td><td valign="top" width="15%">IN: int </td><td valign="top" width="60%">The argument is a muxid that was
returned from an I_LINK ioctl.  This ioctl causes this stream to be
connected to the lower stream indicated by the muxid.  This is
unidirectional linkage and only affects the downstream flow of messages.
   <br></td></tr></table>

<h4 class="unnumberedsubsec">Author</h4>

<p>David Grothe <a href="mailto:dave@gcom.com">dave@gcom.com</a>
<a name="index-Grothe_002c-David-65"></a>

<p><a name="printk"></a>

<h4 class="subsection">3.2.5 printk</h4>

<h4 class="unnumberedsubsec">Device Name</h4>

<pre class="example">     /dev/printk
</pre>
   <p><a name="index-g_t_002fdev_002fprintk-66"></a>

<h4 class="unnumberedsubsec">Description</h4>

<p>This driver accepts messages written to it and prints them from the
kernel using the kernel's printk function.  It is used by the LiS test
software to keep messages from LiS and messages from the test program
in sequence.

<h4 class="unnumberedsubsec">Author</h4>

<p>David Grothe <a href="mailto:dave@gcom.com">dave@gcom.com</a>
<a name="index-Grothe_002c-David-67"></a>

<p><a name="sad"></a>

<h4 class="subsection">3.2.6 sad</h4>

<h4 class="unnumberedsubsec">Device Name</h4>

<pre class="example">     /dev/sad
</pre>
   <p><a name="index-g_t_002fdev_002fsad-68"></a>

<h4 class="unnumberedsubsec">Description</h4>

<p>The STREAMS Administrative Driver manages the autopush function of
LiS.  Using ioctls the system administrator can provide a list of
modules that are to be automatically pushed onto a given device when
that device is opened.  The controls are specified via the strapush
structure which is defined in &lt;sys/sad.h&gt;.

   <p>The ioctl used by the user is of the form:

   <p>ioctl(fd, command, arg)

   <p>Where fd is the file descriptor of the file that is open to the sad
driver, command and arg are described in the following table.

   <p><table summary=""><tr align="left"><td valign="top" width="15%">Command </td><td valign="top" width="30%">Argument </td><td valign="top" width="55%">Description
<br></td></tr><tr align="left"><td valign="top" width="15%"><br></td></tr><tr align="left"><td valign="top" width="15%">SAD_SAP </td><td valign="top" width="30%">struct strapush * </td><td valign="top" width="55%">Set the list of autopushed
modules according to the sap_cmd and other arguments contained within the
strapush structure. 
<a name="index-struct-strapush-69"></a><br></td></tr><tr align="left"><td valign="top" width="15%"><br></td></tr><tr align="left"><td valign="top" width="15%">SAD_GAP </td><td valign="top" width="30%">struct strapush * </td><td valign="top" width="55%">Get the list of configured
autopushed modules associated with the indicated major and minor device
number.  The sad driver fills in this structure with the names of the
modules and the applicable range of minor device numbers. 
<a name="index-struct-strapush-70"></a><br></td></tr><tr align="left"><td valign="top" width="15%"><br></td></tr><tr align="left"><td valign="top" width="15%">SAD_VML </td><td valign="top" width="30%">struct str_list * </td><td valign="top" width="55%">Validates a list of pushable
module names to verify that they are installed in LiS.  The str_list
structure is defined in the file <samp><span class="file">&lt;sys/stropts.h&gt;</span></samp>. 
<a name="index-struct-str_005flist-71"></a><a name="index-stropts_002eh-72"></a>
   <br></td></tr></table>

   <p>The <dfn>strapush</dfn> structure used by the SAD_SAP and SAD_GAP ioctls
contains the following fields. 
<a name="index-strapush-73"></a>
     <dl>
<dt><code>unsigned sap_cmd</code><dd>This is the autopush command to be executed.  The values are as follows.

          <dl>
<dt><code>SAP_ONE</code><dd>Configure one minor device of the driver indicated by sap_major.

          <br><dt><code>SAP_RANGE</code><dd>Configure a range of minor devices of the driver indicated by sap_major. 
The range runs from sap_minor to sap_lastminor, inclusively.

          <br><dt><code>SAP_ALL</code><dd>Configure all minor devices of the driver indicated by sap_major.

          <br><dt><code>SAP_CLEAR</code><dd>Undo all autopush configuration for the driver indicated by sap_major. 
</dl>

     <br><dt><code>major_t sap_major</code><dd>The major device number of the driver which is being configured for
autopush.

     <br><dt><code>minor_t sap_minor</code><dd>The minor device being configured, or the first of a range.

     <br><dt><code>minor_t sap_lastminor</code><dd>The last minor device of a range to be configured.

     <br><dt><code>unsigned sap_npush</code><dd>Number of modules to be pushed when the indicated device is opened.

     <br><dt><code>char sap_list[MAXAPUSH][FMNAMESZ+1]</code><dd>List of module names to be pushed, or list of modules names returned to
user. 
</dl>

   <p>The ioctl function call returns zero upon success or -1 on failure. 
Upon failure errno is set to the error number describing the failure,
usually either EFAULT or EINVAL.

   <p>Note that the sad driver is a standard AT&amp;T STREAMS function.  More
comprehensive documentation for this driver can be found in the
[40]SVR4 Programmer's Guide: STREAMS.

<h4 class="unnumberedsubsec">Author</h4>

<p>Ole Husgaard <a href="mailto:sparre@login.dknet.dk">sparre@login.dknet.dk</a>
<a name="index-Husgaard_002c-Ole-74"></a>
<!--  -->
<!--  -->

<p><a name="Modules"></a>

<h3 class="section">3.3 Modules</h3>

<p><a name="index-modules-75"></a>
     <dl>
<dt><samp><span class="file">streams-connld.o</span></samp><dd><a name="index-streams_002dconnld_002eo-76"></a>Connld module. 
<br><dt><samp><span class="file">streams-pipemod.o</span></samp><dd><a name="index-streams_002dpipemod_002eo-77"></a>Pipe module. 
<br><dt><samp><span class="file">streams-sc.o</span></samp><dd><a name="index-streams_002dsc_002eo-78"></a>STREAMS configuration module. 
<br><dt><samp><span class="file">streams-sth.o</span></samp><dd><a name="index-streams_002dsth_002eo-79"></a>Stream Head module. 
</dl>

   <p>The LiS package comes with a number of STREAMS drivers and pushable modules in
source code form.  A number of these drivers and modules are small entities that
are used in the testing of LiS.  They are included so as to make it easy for any
user to run the LiS tests for themselves.

   <p>A pushable module in STREAMS is an entity that is added to an existing STREAMS
file via the I_PUSH ioctl.  These modules are known to LiS by mnemonic name,
given as an argument to the I_PUSH ioctl.  There are no major and minor device
numbers or <samp><span class="file">/dev</span></samp> entries associated with pushable modules. 
<a name="index-g_t_002fdev-80"></a>

<p><a name="connld"></a>

<h4 class="subsection">3.3.1 connld</h4>

<h4 class="unnumberedsubsec">Module Name</h4>

<p>connld

<h4 class="unnumberedsubsec">Description</h4>

<p>The connld module provides a means to generate multiple unique STREAMS-based
pipes from a single existing pipe end.  connld may only be pushed (via the
STREAMS I_PUSH ioctl) onto a STREAMS-based pipe.  When first pushed, connld
does nothing; on each subsequent open(2), connld will generate a unique
STREAMS-based pipe.  One end of each new pipe replaces the original pipe end
from the perspective of the open call.  The other end of each new pipe is sent,
effectively as if by the I_SENDFD ioctl, to the other end of the original
pipe, ostensibly to be received by a subsequent I_RECVFD ioctl operation.

<h4 class="unnumberedsubsec">Application Usage</h4>

<p>The intent of connld is to provide a means to generate unique pipes which
separately and independently connect client processes to a server process.  The
point of access for such clients is expected to be a path name known to all
such clients and to which a pipe end may be connected (via fattach(3)) by the
server process.  The server establishes the original pipe, pushes connld onto
the client end, and then listens via I_RECVFD for new connections on the
server end.  A client wishing to connect to the server will open(2) the path
name representing the client end, and can determine via isastream(3) whether
or not the server process is active and attached.  If it is, the open() call
returns one end of a unique new pipe that thus connects the client to the
server.

   <p>Such a server is responsible both for accepting new connections via I_RECVFD
on the original pipe, and for communicating with clients so connected via the
received pipe ends.  It would also be reasonable for such a server process to
invalidate the point of access by calling fdetach(3) before terminating.

   <p><a name="index-M_005fPASSFP-81"></a>It should be noted that the poll(2) primitive may be used to indicate when an
<code>M_PASSFP</code> representing a newly passed file is available on the original server
pipe end.  This is reflected by the POLLIN status setting in the events and
revents fields of a pollfd structure.  Moreover, any attempt to read an
<code>M_PASSFP</code> message via the data-receiving primitives (i.e., read(2), getmsg(3),
and getpmsg(3)) will fail with errno(3) returning an EBADMSG indication
without discarding the message.

   <p>Even so, it should be reasonable to expect only <code>M_PASSFP</code> messages will be
received on the original server pipe end, since it is not possible to carry on
normal data traffic which has connld on one end, since connld does not support
such traffic.

   <p>The use of connld can be made entirely free-standing by attaching well-known
paths to both ends of the original pipe.  The relevant capabilities are
implemented in LiS so that the original creator of the pipe can close both
ends after attaching paths to them, and the process of passing file
descriptors can still be carried out via new open()'s as long as both ends
remain attached.

<h4 class="unnumberedsubsec">See Also</h4>

<p>fattach(3), fattach(8), fdetach(3), fifo(4), fifo(9),

   <p>pipe(3), STREAMS(4)

<h4 class="unnumberedsubsec">History</h4>

<p>Unix System V Release 4 (SVR4)

<h4 class="unnumberedsubsec">Author</h4>

<p>John Boyd, protologos LLC.  <a href="mailto:jaboydjr@netwalk.com">jaboydjr@netwalk.com</a>
<a name="index-Boyd_002c-John-82"></a>

<p><a name="pipemod"></a>

<h4 class="subsection">3.3.2 pipemod</h4>

<h4 class="unnumberedsubsec">Module Name</h4>

<p>pipemod

<h4 class="unnumberedsubsec">Description</h4>

<p><a name="index-M_005fFLUSH-83"></a>The pipemod module has the relatively simple task of reversing the sense of
the FLUSH flag bits in <code>M_FLUSH</code> messages sent in STREAMS-based fifos and pipes. 
This must happen at the midpoint of a fifo or pipe, so that FLUSHR becomes
FLUSHW, and FLUSHW becomes FLUSHR.  pipemod does this, and has no other
function.

   <p>To be used appropriately, then, pipemod must be the first module pushed onto a
pipe end or a fifo, but it is only necessary on one end of a pipe.

   <p>pipemod is not needed if flush handling need not be supported, or if its
function is supported by other means.

<h4 class="unnumberedsubsec">See Also</h4>

<p>fifo(9), pipe(3), fifo(4), STREAMS(4)

<h4 class="unnumberedsubsec">History</h4>

<p>Unix System V Release 4 (SVR4)

<h4 class="unnumberedsubsec">Author</h4>

<p>John Boyd, protologos LLC.  <a href="mailto:jaboydjr@netwalk.com">jaboydjr@netwalk.com</a>
<a name="index-Boyd_002c-John-84"></a>

<p><a name="relay-relay2"></a>

<h4 class="subsection">3.3.3 relay, relay2</h4>

<h4 class="unnumberedsubsec">Module Name</h4>

<p>relay
relay2

<h4 class="unnumberedsubsec">Description</h4>

<p>These are two names for the same module.  All the module does is forward
STREAMS messages along on the stream using putnext.  These modules are used in
the testing of LiS but are not otherwise useful.  One could use the source
code as a starting point for coding a pushable STREAMS module.

<h4 class="unnumberedsubsec">Author</h4>

<p>David Grothe <a href="mailto:dave@gcom.com">dave@gcom.com</a>
<a name="index-Grothe_002c-David-85"></a>

<!--  -->
<!--  -->
<p><a name="Libraries"></a>

<h3 class="section">3.4 Libraries</h3>

<p><a name="index-libraries-86"></a>
During the installation process of Linux STREAMS (LiS) a subroutine library is
built and installed on your system.  Three versions of the library are built and
installed.  They are as follows.

     <dl>
<dt><samp><span class="file">libLiS.a</span></samp><dd>Interface routines to LiS in static library form. 
<br><dt><samp><span class="file">libLiS.so</span></samp><dd>Interface routines to LiS in dynamic library form. 
<br><dt><samp><span class="file">libpLiS.so</span></samp><dd>Like libLiS.so but omits the "pipe" system call. 
</dl>

   <p>These three libraries are copied to the directory <samp><span class="file">/usr/lib</span></samp> when LiS is
installed. 
<a name="index-g_t_002fusr_002flib-87"></a>
In addition, the utility program <samp><span class="command">ldconfig</span></samp> is run during the LiS make
install.  This causes this library to be linked, or searched, ahead of the
standard C library.  This is necessary because the standard C library contains
dummy routines for the STREAMS interface functions, or most of them in the best
case.  If these dummy routines preempt the LiS versions then STREAMS
applications will always perceive error returns from such routines as
see <a href="*manpages*.html#getmsg_00282_0029">getmsg(2)</a>
and
see <a href="*manpages*.html#putmsg_00282_0029">putmsg(2)</a>.

<p><a name="Library-Routines"></a>

<h4 class="subsection">3.4.1 Library Routines</h4>

<p>The following routines are present in the libraries <samp><span class="file">libLiS.a</span></samp> and
<samp><span class="file">libLiS.so</span></samp>.  The library <samp><span class="file">libpLiS.so</span></samp> omits the "pipe" routine.

   <p>The routines in these libraries are standard STREAMS interface routines.  As
such we do not offer detailed descriptions of the functions of these routines. 
Instead we refer the reader to the AT&amp;T SVR4 STREAMS documentation.

<pre class="smallexample">     int fattach(int fd, const char *path);
     int fdetach(const char *path);
     int getmsg(int fd, void *ctlptr, void *dataptr, int *flagsp);
     int getpmsg(int fd, void *ctlptr, void *dataptr, int *bandp, int *flagsp);
     int isastream(int fd);
     int pipe(int *fd);
     int poll(void *pollfds, long nfds, int timeout);
     int putmsg(int fd, void *ctlptr, void *dataptr, int flags);
     int putpmsg(int fd, void *ctlptr, void *dataptr, int *bandp, int *flagsp);
</pre>
     <dl>
<dt><code>int fattach(int fd, const char *path);</code><dd>see <a href="*manpages*.html#fattach_00283_0029">fattach(3)</a>
<br><dt><code>int fdetach(const char *path);</code><dd>see <a href="*manpages*.html#detach_00283_0029">detach(3)</a>
<br><dt><code>int getmsg(int fd, void *ctlptr, void *dataptr, int *flagsp);</code><dd>see <a href="*manpages*.html#getmsg_00282_0029">getmsg(2)</a>
<br><dt><code>int getpmsg(int fd, void *ctlptr, void *dataptr, int *bandp, int *flagsp);</code><dd>see <a href="*manpages*.html#getpmsg_00282s_0029">getpmsg(2s)</a>
<br><dt><code>int isastream(int fd);</code><dd>see <a href="*manpages*.html#isastream_00283_0029">isastream(3)</a>
<br><dt><code>int pipe(int *fd);</code><dd>see <a href="*manpages*.html#pipe_00282s_0029">pipe(2s)</a>
<br><dt><code>int poll(void *pollfds, long nfds, int timeout);</code><dd>see <a href="*manpages*.html#poll_00282s_0029">poll(2s)</a>
<br><dt><code>int putmsg(int fd, void *ctlptr, void *dataptr, int flags);</code><dd>see <a href="*manpages*.html#putmsg_00282_0029">putmsg(2)</a>
<br><dt><code>int putpmsg(int fd, void *ctlptr, void *dataptr, int *bandp, int *flagsp);</code><dd>see <a href="*manpages*.html#putpmsg_00282s_0029">putpmsg(2s)</a>
</dl>

   <p>These routines are all very small pieces of code.  Most of them simply pass
their parameters to LiS via a system call.  The
see <a href="*manpages*.html#fattach_00283_0029">fattach(3)</a>
and fdetach
see <a href="*manpages*.html#fdetach_00283_0029">fdetach(3)</a>
routines use ioctls to LiS if there is no system call available to call
directly.

   <p>The poll
see <a href="*manpages*.html#poll_00282s_0029">poll(2s)</a>
routine simply executes the poll system call.  It is present for
backward compatibility to 2.0 kernels, in which LiS provided the poll system
call.

   <p>The
see <a href="*manpages*.html#pipe_00282s_0029">pipe(2s)</a>
routine has the same semantics as the standard C library routine.  It
uses STREAMS FIFOs to implement the pipe instead of the standard Linux pipes.

   <p>The <samp><span class="file">libpLiS.so</span></samp> library, the one that preempts the standard C library,
omits the STREAMS pipe routine so that standard Linux pipes are used unless the
user explicitly links in <samp><span class="file">libLiS</span></samp>.

<p><a name="Using-the-Library"></a>

<h4 class="subsection">3.4.2 Using the Library</h4>

<p>To use one of the LiS libraries you can include the file <samp><span class="file">&lt;sys/stropts.h&gt;</span></samp>
in your program source code.  On your compiler command line you can add the
option `<samp><span class="samp">-I/usr/include/LiS</span></samp>' to include the version of <samp><span class="file">stropts.h</span></samp> that
is distributed with LiS, or omit the option to include the system standard
header file.  The two header files are believed to be compatible enough that it
does not matter which one you include in your program. 
<a name="index-stropts_002eh-88"></a><a name="index-g_t_002fusr_002finclude-89"></a><a name="index-g_t_002fusr_002finclude_002fstropts_002eh-90"></a><a name="index-g_t_002fusr_002finclude_002fLiS_002fstropts_002eh-91"></a>
When linking your program, or performing a final <samp><span class="command">cc</span></samp> to build your
executable, include one of the following options on your command line.

     <dl>
<dt><code>/usr/lib/libLiS.a</code><dd>Use <samp><span class="file">libLiS.a</span></samp> (static, includes "pipe")
<a name="index-g_t_002fusr_002flib-92"></a><a name="index-g_t_002fusr_002flib_002flibLiS_002ea-93"></a><a name="index-libLiS_002ea-94"></a><br><dt><code>-lLiS</code><dd>Use <samp><span class="file">libLiS.so</span></samp> (dynamic, includes "pipe")
<a name="index-g_t_002fusr_002flib-95"></a><a name="index-g_t_002fusr_002flib_002flibLiS_002eso-96"></a><a name="index-libLiS_002eso-97"></a><br><dt><code>-lpLiS</code><dd>Use <samp><span class="file">libpLiS.so</span></samp> (dynamic, omits "pipe")
<a name="index-g_t_002fusr_002flib-98"></a><a name="index-g_t_002fusr_002flib_002flibpLiS_002eso-99"></a><a name="index-libpLiS_002eso-100"></a></dl>

   <p>Omit any options

   <p>As of <samp><span class="file">libc-2.2.1</span></samp> the LiS STREAMS interface routines will be used
automatically via <samp><span class="file">libpLiS.so</span></samp>.

<!--  -->
<!--  -->
<p><a name="Utilities"></a>

<h3 class="section">3.5 Utilities</h3>

<p><a name="index-utilities-101"></a>
The Linux STREAMS (LiS) package contains some user level commands that are used
to manage the package and assist the user with STREAMS functions.

   <p>These commands are installed in <samp><span class="file">/usr/bin</span></samp> or <samp><span class="file">/usr/sbin</span></samp>.  They are
referred to a "global commands." 
<a name="index-g_t_002fusr_002fbin-102"></a><a name="index-g_t_002fusr_002fsbin-103"></a>
A second group is built in the LiS installation directory and left there.  This
second group is oriented more towards testing of LiS than towards its operation. 
These commands remain undocumented since they are primarily intended for the use
of the authors of the modules that they test.

   <p>These are the commands that are installed in <samp><span class="file">/usr/bin</span></samp> or
<samp><span class="file">/usr/sbin</span></samp>, and are thus globally accessible to any user with those
directories in his/her path. 
<a name="index-g_t_002fusr_002fbin-104"></a><a name="index-g_t_002fusr_002fsbin-105"></a>

<p><a name="fattach"></a>

<h4 class="subsection">3.5.1 fattach</h4>

<pre class="example">     /usr/sbin/fattach [-v] [-m|-u|-M mode] [-p|STREAMS-path] path ...
     /usr/sbin/fattach -?
</pre>
   <p><a name="index-g_t_002fusr_002fsbin_002ffattach-106"></a>

<h5 class="unnumberedsubsubsec">Description</h5>

<p>The fattach program provides a command-line interface to the
underlying fattach(3) function.  If the -p and/or the -c option is
specified, a STREAMS-based pipe is created and its two ends are
alternately attached to the path names given.  In this mode of
usage, at least two path names are required, but there need not be an
even number of path names (i.e., the pipe ends need not be attached
to the same number of paths).

   <p>If the -p and -c options are not specified, the first path name given
must identify a STREAMS-based file.  That file will be opened, and it
will be attached to each of the path names subsequently specified
(of which there must be at least one).

<h5 class="unnumberedsubsubsec">Options</h5>

     <dl>
<dt>-p<dd>Create a STREAMS-based pipe, to which to attach the subsequently specified
path names.  The first path will be attached to the first pipe end, the second
to the second pipe end, the third to the first pipe end, etc., until the list
of path names is exhausted.

     <p>By default, the umask (see umask(2)) is also applied to each end of the pipe
after attaching.  (See fattach(3)).

     <br><dt>-c<dd>Like -p (both may be given), but additionally pushes the connld module onto
the first end of the pipe.  This conveniently creates a free-standing
pipe-serving pipe (see connld(9), and below).

     <br><dt>-m<dd>Apply the mode of the last-specified path(s) to the attached STREAMS-based
file(s) after attaching.  (See fattach(3).

     <br><dt>-u<dd>Apply the umask (see umask(2)) of the STREAMS-based file after attaching.  (See
fattach(3)).  This is done by default when a pipe is created via -p.

     <br><dt>-M <var>mode</var><dd>Apply the given <var>mode</var> to the STREAMS-based file(s) after attaching. 
(See fattach(3)).

     <br><dt>-v<dd>Operate in a "verbose" manner.  This causes fattach to report its progress via
message output to stdout or stderr.

     <br><dt>-?<dd>Provide a usage summary. 
</dl>

<h5 class="unnumberedsubsubsec">Return Value</h5>

<p>Upon successful completion, i.e., if all given path names are
attached to, fattach returns 0.  Upon failure, fattach returns 1. 
However, the failure of one more attachments does not otherwise affect
those that succeed, and the user is responsible for detaching any
that may have succeeded if that is the desired behavior in the event
of any failures.

<h5 class="unnumberedsubsubsec">Application Usage</h5>

<p>The -p and -c options provide a convenient means for creating
free-standing mounted pipes.  The openers of the paths attached via
-p will share a single pipe, while the openers of the paths attached
via -c will have access to a pipe-serving pipe.  I.e., each open
of the first end (e.g., the client end) will generate a new pipe,
one end of which will be given to the opener, and the other end of
which will be passed as if by the I_SENDFD ioctl to the path attached
to the other end (e.g., the server end).  Each opener of the server
path could poll(2) for input, receive a new pipe end using the
I_RECVFD ioctl, and then close the server path, therefter using the
new pipe end to communicate with the corresponding opener of the
client path (note that the sense of client and server will in fact
depend on the application - users of the two paths need only be aware
of whether or not an I_RECVFD ioctl must be performed).

<h5 class="unnumberedsubsubsec">See Also</h5>

<p>connld(9), fattach(3), fdetach(3), fdetach(8), STREAMS(4), umask(2)

<h5 class="unnumberedsubsubsec">History</h5>

<p>An fattach function has been provided for various STREAMS
implementations based on SVR4 STREAMS.  Not all of these have provided
a corresponding utility program of this sort.

<h5 class="unnumberedsubsubsec">Author</h5>

<p>John Boyd, protologos LLC <a href="mailto:jaboydjr@netwalk.com">jaboydjr@netwalk.com</a>
<a name="index-Boyd_002c-John-107"></a>

<p><a name="fdetach"></a>

<h4 class="subsection">3.5.2 fdetach</h4>

<pre class="example">     /usr/sbin/fdetach [-v] path ...
     /usr/sbin/fdetach -a
     /usr/sbin/fdetach -?
</pre>
   <p><a name="index-g_t_002fusr_002fsbin_002ffdetach-108"></a>

<h5 class="unnumberedsubsubsec">Description</h5>

<p>The fdetach program provides a command-line interface to the
underlying fdetach(3) function.

   <p>It is thus intended to provide a convenient means to dismantle
so-called mounted STREAMS.

   <p>If the -a option is specified, all currently attached STREAMS-based
files are detached.  If the -a option is not specified, the path names
given are taken to identify paths to which STREAMS-based files are
currently attached.  Those files will be detached from these paths.

<h5 class="unnumberedsubsubsec">Options</h5>

     <dl>
<dt>-a<dd>Undo all attachments currently in effect.

     <br><dt>-v<dd>Operate in a "verbose" manner.  This causes fdetach to report its progress via
message output to stdout or stderr.

     <br><dt>-?<dd>Provide a usage summary. 
</dl>

<h5 class="unnumberedsubsubsec">Return Value</h5>

<p>Upon successful completion, i.e., if all given path names identify
mounted STREAMS and these are all successfully detached, fdetach
returns 0.  Upon failure, fdetach returns 1.

   <p>Note, however, that a failure indication does not mean that no action
is taken; i.e., those detachments that succeed are not affected by
those that fail.

<h5 class="unnumberedsubsubsec">Warnings</h5>

<p>It should be noted that although the fdetach program implements the -a
option, by passing "*" to the fdetach function, this is not at all
equivalent to specifying "*" on the command line when executing the
program.  Normally, "*" specified on the command line will be
converted by a shell into a list of all files in the current working
directory.  By contrast, the -a option causes the fdetach operation
to operate not with respect to path names at all, but with respect to
STREAMS devices currently active within the STREAMS subsystem.  I.e.,
each active stream head is examined for attachments, and any
attachments found are dismantled.

   <p>The intended use for the -a option is thus to undo all attachments,
e.g., in preparation for unloading the STREAMS subsystem.

<h5 class="unnumberedsubsubsec">See Also</h5>

<p>fdetach(3), fattach(8), STREAMS(4)

<h5 class="unnumberedsubsubsec">History</h5>

<p>An fdetach function has been provided for various STREAMS
implementations based on SVR4 STREAMS.  Not all of these have provided
a corresponding utility program of this sort.

<h5 class="unnumberedsubsubsec">Author</h5>

<p>John Boyd, protologos LLC <a href="mailto:jaboydjr@netwalk.com">jaboydjr@netwalk.com</a>
<a name="index-Boyd_002c-John-109"></a>

<p><a name="polltst"></a>

<h4 class="subsection">3.5.3 polltst</h4>

<pre class="example">     /usr/bin/polltst
</pre>
   <p><a name="index-g_t_002fusr_002fbin_002fpolltst-110"></a>

<h5 class="unnumberedsubsubsec">Description</h5>

<p>polltst is a simple test program for the poll system call.  Using
poll, it reads keystrokes from stdin, writes them to one end of the
LiS loopback driver, reads them from the other end and then writes
them back to stdout.

   <p>While performing this operation it configures stdin for "no echo"
mode, so the appearance of "echoed" characters is evidence of the
operation of poll involving both a STREAMS and a non-STREAMS file.

<h5 class="unnumberedsubsubsec">Author</h5>

<p>David Grothe <a href="mailto:dave@gcom.com">dave@gcom.com</a>
<a name="index-Grothe_002c-David-111"></a>

<p><a name="streams"></a>

<h4 class="subsection">3.5.4 streams</h4>

<pre class="example">     /usr/sbin/streams Options
</pre>
   <p><a name="index-g_t_002fusr_002fsbin_002fstreams-112"></a>

<h5 class="unnumberedsubsubsec">Description</h5>

<p>The streams program is used to perform several different management
functions for the LiS package, including starting and stopping the LiS
subsystem.

<h5 class="unnumberedsubsubsec">Options</h5>

     <dl>
<dt>`<samp><span class="samp">start</span></samp>'<dd>Start the LiS subsystem.  This amounts to performing the command "modprobe
streams".

     <br><dt>`<samp><span class="samp">stop</span></samp>'<dd>Stop the LiS subsystem.  This amounts to performing the command "modprobe -r
streams".

     <br><dt>`<samp><span class="samp">status</span></samp>'<dd>Reports on the status of the LiS subsystem.

     <br><dt>-c <var>Kbytes</var><dd>Print or set the maximum message memory usage for LiS.  The value 0 (default)
means unlimited.

     <br><dt>-C <var>Kbytes</var><dd>Print or set the maximum total memory usage for LiS.  The value 0 (default)
means unlimited.

     <br><dt>-d <var>mask</var><dd>Set the debug mask for LiS.  See below for details.

     <br><dt>-D <var>mask</var><dd>Set an additional debug mask for LiS.  See below for details.

     <br><dt>-s<dd>Print STREAMS memory usage statistics.

     <br><dt>-L<dd>Print out lock contention statistics.  Use debug bit
<code>DEBUG_LOCK_CONTENTION</code> to enable the lock contention statistics gathering.

     <br><dt>-m<dd>Print STREAMS memory allocation to the system messages file (from kernel). 
This option should be used only for debugging and only when LiS is in a
quiescent state.  Unpredictable results can occur if this option is used while
LiS memory allocations are changing dynamically.

     <br><dt>-p<dd>Print the LiS lock trace buffer to the system messages file (from kernel). 
Used in conjunction with the <code>DEBUG_SPL_TRACE</code> debug option.

     <br><dt>-q<dd>Print all STREAMS queues to the system messages file (from kernel).  This
option should be used only for debugging and only when LiS is in a quiescent
state.  Unpredictable results can occur if this option is used while LiS queue
allocations are changing dynamically.

     <br><dt>-S<dd>Print out STREAMS queue-runner thread statistics.

     <br><dt>-t<dd>Print STREAMS timing statistics.  Used inconjunction with the
<code>DEBUG_MEAS_TIME</code> debug option.

     <br><dt>-T<dd>Print the LiS semaphore latency histogram.  Use debug bit <code>DEBUG_SEMTIME</code>
to enable the statistics collection.

     <br><dt>-h<dd>Print a command synopsis.

     <br><dt>-H<dd>Print a command synopsis including the debug mask mnemonics. 
</dl>

<h5 class="unnumberedsubsubsec">Debug Options</h5>

<p>The value that is used with the -d option consists of the logical "or" of the
following single bit options.

     <dl>
<dt>-d <var>Options</var><dd>
     <pre class="smallexample">          DEBUG_OPEN             0x00000001
          DEBUG_CLOSE            0x00000002
          DEBUG_READ             0x00000004
          DEBUG_WRITE            0x00000008
          DEBUG_IOCTL            0x00000010
          DEBUG_PUTNEXT          0x00000020
          DEBUG_STRRPUT          0x00000040
          DEBUG_SIG              0x00000080
          DEBUG_PUTMSG           0x00000100
          DEBUG_GETMSG           0x00000200
          DEBUG_POLL             0x00000400
          DEBUG_LINK             0x00000800
          DEBUG_MEAS_TIME        0x00001000
          DEBUG_MEM_LEAK         0x00002000
          DEBUG_FLUSH            0x00004000
          DEBUG_FATTACH          0x00008000
          DEBUG_SAFE             0x00010000
          DEBUG_TRCE_MSG         0x00020000
          DEBUG_CLEAN_MSG        0x00040000
          DEBUG_SPL_TRACE        0x00080000
          DEBUG_MP_ALLOC         0x00100000
          DEBUG_MP_FREEMSG       0x00200000
          DEBUG_MALLOC           0x00400000
          DEBUG_MONITOR_MEM      0x00800000
          DEBUG_DMP_QUEUE        0x01000000
          DEBUG_DMP_MBLK         0x02000000
          DEBUG_DMP_DBLK         0x04000000
          DEBUG_DMP_STRHD        0x08000000
          DEBUG_ADDRS            0x80000000
     </pre>
     <br><dt>-D <var>Options</var><dd>
     <pre class="smallexample">          DEBUG_SNDFD            0x00000001
          DEBUG_CP	       0x00000002
          DEBUG_CACHE	       0x00000004
          DEBUG_LOCK_CONTENTION  0x00000008
          DEBUG_REFCNTS          0x00000010
          DEBUG_SEMTIME          0x00000020
     </pre>
     </dl>

   <p>Most of these options are intuitive as to their operation from the mnemonics.

   <p>The <code>DEBUG_MEAS_TIME</code> option causes LiS to use a high precision timer to
calculate the execution time of several operations within itself.  These
timings include the time spent in STREAMS drivers.  Thus, under controlled
circumstances this option can be used to time STREAMS driver code.  It is used
in conjunction with the -t option to print out the timing statistics.

   <p>The <code>DEBUG_SAFE</code> option causes LiS to carefully check for NULL pointers
when performing message passing and queueing operations such as putq and
putnext.

   <p>The <code>DEBUG_CLEAN_MSG</code> option causes LiS to clear message data buffers to
zero when they are allocated.  It is useful for tracking down driver problems
relating to using uninitialized areas of messages.

   <p>The <code>DEBUG_SPL_TRACE</code> option causes LiS to maintain a trace table of all
LiS locking operations.  It is used in conjunction with the -p option to print
out the lock trace table.  The locking operations that are traced include calls
on the LiS locking primitives from STREAMS drivers.

   <p>The options <code>DEBUG_DMP_QUEUE</code>, <code>DEBUG_DMP_MBLK</code> and
<code>DEBUG_DMP_DBLK</code> control the verbosity of the printing out of LiS memory
areas via the -m option.  With these debug mask bits set, LiS will print out
the contents of these structures as well as the headers indicating that such a
structure was allocated.

   <p>The <code>DEBUG_ADDRS</code> option causes the -m option to print out the addresses
of structures as well as their memory tags and/or contents.

   <p>The <code>DEBUG_MONITOR_MEM</code> option causes LiS to monitor the guard words
surrounding allocated memory areas in an attempt to catch overwriting of these
words in a timely fashion.  This option comes at a fairly substantial CPU time
penalty.

<h5 class="unnumberedsubsubsec">Author</h5>

<p>David Grothe <a href="mailto:dave@gcom.com">dave@gcom.com</a>
<a name="index-Grothe_002c-David-113"></a>

<p><a name="strmakenodes"></a>

<h4 class="subsection">3.5.5 strmakenodes</h4>

<pre class="example">     /usr/sbin/strmakenodes
</pre>
   <p><a name="index-g_t_002fusr_002fsbin_002fstrmakenodes-114"></a>

<h5 class="unnumberedsubsubsec">Description</h5>

<p>strmakenodes makes all of the <samp><span class="file">/dev</span></samp> entries that are associated with
LiS as a result of the LiS build process.  All of the <samp><span class="file">Config</span></samp> files
that contributed to the LiS build are scanned for their "node"
declarations.  strmakenodes performs a mknod system call for each
specified "node". 
<a name="index-g_t_002fdev-115"></a><a name="index-Config-116"></a>
This command must be run before LiS can operate correctly after it is
installed.  This command is run automatically as a result of the "make
install" operation of LiS.

   <p>This command accepts the option "-r" to mean remove nodes instead of
making them.  The command is run with this option as a result of the
"make uninstall" operation.

   <p>The source code for this command is generated automatically as a
side-effect of running the strconf utility.

<p><a name="strtst"></a>

<h4 class="subsection">3.5.6 strtst</h4>

<pre class="example">     /usr/bin/strtst
</pre>
   <p><a name="index-g_t_002fusr_002fbin_002fstrtst-117"></a>

<h5 class="unnumberedsubsubsec">Description</h5>

<p>strtst is a test program which tests the core functionality of LiS. 
It is a user level program which uses the built-in drivers that are
installed by default with LiS.  It performs numerous STREAMS
operations and checks the results for correctness.  It prints out a
voluminous log file whose output is routed to the "messages" file
(kernel informational messages).

   <p>The output of strtst can be compared to earlier "reference" outputs to
see if the behavior of LiS has changed as a result of modifications to
the code.

<h5 class="unnumberedsubsubsec">Author</h5>

<p>David Grothe <a href="mailto:dave@gcom.com">dave@gcom.com</a>
<a name="index-Grothe_002c-David-118"></a>

<p><a name="timetst"></a>

<h4 class="subsection">3.5.7 timetst</h4>

<pre class="example">     /usr/bin/timetst [Iterations]
</pre>
   <p><a name="index-g_t_002fusr_002fbin_002ftimetst-119"></a>

<h5 class="unnumberedsubsubsec">Description</h5>

<p>timetst peforms a timing test using the LiS loopback driver.  It
writes short messages downstream under several different LiS options
and measures the round trip time for the messages.  The Iterations
parameter specified the number of iterations that timetst uses in its
timing loop, the default being 100,000.

<h5 class="unnumberedsubsubsec">Author</h5>

<p>David Grothe <a href="mailto:dave@gcom.com">dave@gcom.com</a>
<a name="index-Grothe_002c-David-120"></a>

<!--  -->
<!--  -->
<p><a name="Development"></a>

<h3 class="section">3.6 Development</h3>

<p><a name="index-developing-121"></a>

   <p>Linux STREAMS (LiS) provides for an interface between STREAMS drivers and the
surrounding kernel environment.  This interface has grown over time and is
likely to expand in the future.

   <p>In the Linux kernel, much of the interface between drivers and other kernel
modules and the core kernel services, such as memory allocation and
synchronization primitives, is implemented in macros and inline functions
declared in kernel header files.  This technique was used (probably) out of
considerations of efficiency (defined as execution speed) and a consideration
that there were no version problems with such constructs because one could
always recompile one's drivers in the context of the new kernel.  The only
"kernel primitives" compatibility that has been attempted from one kernel
release to the next is source code compatibility.

   <p>The real world of paying customers is quite different.  And, as it happens, the
world of paying customers seems to impinge upon LiS considerably.

   <p>In this world, the customers do not want to rebuild the kernel.  They don't want
to build the kernel at all.  They want to install a distribution with a binary
kernel that was configured only at install time.  They then want to install
add-on binary packages, and they expect these packages to operate correctly with
their kernel.

   <p>When these add-on packages consist of STREAMS based protocol drivers, LiS is
usually the only piece of code that is recompiled from source upon installation
into the customer's environment.  The STREAMS drivers themselves are typically
distributed in binary and linked in with LiS.  The resulting module is then
typically loaded using "modprobe" or some equivalent command.

   <p>In these circumstances it is highly desirable for LiS to "buffer" the interface
between the STREAMS drivers and the kernel environment.  This allows the STREAMS
driver writers to deliver smaller binary packages to their customers and
minimizes the number of different versions of those packages that must be
maintained by the STREAMS driver writers.  Ideally, LiS would be able to present
a uniform DKI that would support one version of a user's STREAMS driver across
all versions of the Linux kernel.

   <p>This ultimate goal is probably not achievable, but it is possible to insulate
STREAMS drivers from the Linux kernel to a considerable extent.  This is
possible in part due to the implied DKI of a STREAMS driver.  A STREAMS driver
most likely will confine itself to the SVR4 types of DKI calls which have syntax
and semantics that do not change over time.  The main challenges come from the
use of constructs, such as PCI configuration and interrupt service routines,
that go outside the SVR4 DKI and must use services of the Linux kernel
more-or-less directly.

   <p>In general, LiS attempts to replace inline functions and macros with actual
subroutine calls to perform kernel operations.  This allows the STREAMS driver
to be compiled once with references to these routines, with the routines
themselves being compiled in the context of the specific kernel version at
package installation time.  Thus, the STREAMS drivers do not have to be
sensitive to differences in kernel versions.

<p><a name="Coding-STREAMS-Applications"></a>

<h4 class="subsection">3.6.1 Coding STREAMS Applications</h4>

<p>This document is concerned with the include files and compilation techniques for
STREAMS application programs.  It is not intended to be a tutorial on the subject
of writing STREAMS applications.  Additional resources are available [17]here for
reference material.

<h5 class="subsubsection">3.6.1.1 Header Files</h5>

<p>In your STREAMS application program C language source, use the following line to
include LiS header files.

<pre class="example">     #include &lt;sys/stropts.h&gt;
</pre>
   <p><a name="index-stropts_002eh-122"></a>
This will include all of the STREAMS related information that you need for a
user level program.

   <p>If your application program uses the poll system call then you need to include
one or the other of the following lines depending upon the kernel version that
the application is intended to run on.  For kernel versions in the 2.0 group, use
the following in order to include the poll.h from LiS.

<pre class="example">     #include &lt;sys/poll.h&gt;
</pre>
   <p>For kernel versions in the 2.2 group, use the following in order to include
poll.h from the kernel's source tree.

<pre class="example">     #include &lt;linux/poll.h&gt;
</pre>
   <h5 class="subsubsection">3.6.1.2 Compilation Options</h5>

<p>When you compile your STREAMS application, put the following compiler option on
the gcc (cc) command line for each C language file that contains any of the
above include lines.

<pre class="example">     -I/usr/include/LiS
</pre>
   <h5 class="subsubsection">3.6.1.3 Linking Options</h5>

<p>When you perform the final link of your application using cc or gcc, add the
following to the end of your list of files and libraries to be linked.  This
links in the system call interface routines for LiS.

<pre class="example">     -lLiS
</pre>
   <p>This library includes the STREAMS based version of the pipe system call.  If you
want to use the standard STREAMS library routines, such as getmsg and putmsg,
but you want to use the standard Linux pipe system call, use the following
instead.

<pre class="example">     -lpLiS
</pre>
   <h5 class="subsubsection">3.6.1.4 Other STREAMS Resources</h5>

<p>Click [18]here for a list of other locations that you can consult for general
information concerning writing STREAMS applications.

<p><a name="LiS-SMP-Implementation"></a>

<h4 class="subsection">3.6.2 LiS SMP Implementation</h4>

<p>Beginning with LiS-2.12, LiS makes aggressive use of multiple CPUs in SMP
kernels.  It is useful for the STREAMS programmer to have some insight
into this design in order to know whether, or which, locking techniques
must be used in driver code.

<p><a name="CPU-Scheduling"></a>

<h5 class="subsubsection">3.6.2.1 CPU Scheduling</h5>

<p>LiS starts up a kernel thread for each CPU on the system.  In the output
of a ps display each thread will show as a process with a name such as
"LiS-2.12:0".  This notation means that an LiS kernel thread is running
and is bound to CPU 0 (":0").

   <p>LiS maintains a single global list of queues whose service procedures need
to be run.  A queue is place into this list by calling the function
qenable, whether directly or indirectly.  A given queue can only be in
this list once.  The read queue and write queue of a queue-pair are
considered two different queues for scheduling purposes and both can be
scheduled simultaneously.

   <p>At "certain points in time" LiS performs an operation that makes a
decision concerning the manner in which service procedures are to be
invoked via the list of scheduled queues.  There are several factors which
influence this decision.

     <ul>
<li>If the decision is being made just prior to LiS exiting back to user
mode from a system call, if the LiS kernel thread for this CPU is inactive
and if there are few enough entries in the list of scheduled queues then
LiS calls the routine that processes queues directly without waking up any
of its kernel threads.

     <li>If the decision is being made from an interrupt routine then the
queue processing routine is not to be called directly.

     <li>If the decision is being made from a call on the routine qenable
then the queue processing routine is not to be called directly.

     <li>The number of queues in the scheduling list affects the decision
making process.

     <li>The number of LiS kernel threads running affects the decision making
process.

     <li>Whether or not LiS is executing a system call affects the decision
making process.  In this case LiS may defer any queue processing action
until the system call is about to exit. 
</ul>

   <p>In the case that the queue processing routine does not get called
directly, LiS needs to decide whether to wake up a kernel thread process
or whether to defer queue processing until an LiS system call is about to
exit.

   <p>LiS tries to enlist one CPU for every four queues that are scheduled. 
This number is based on considerations of CPU loading and average queue
lengths from queueing theory.  If the number of CPUs currently processing
queues is not enough to meet this target then the scheduling process seeks
to enlist more CPUs until the number of CPUs is sufficient to meet this
target value.  Of course, sometimes there are simply too may queues
schedule for processing for the number of available CPUs.  In that case,
all available CPUs run their queue processing threads.

   <p>When making the decision as to whether or not to wake up a kernel thread,
LiS gives precedence to the CPU that it is running on.  If the scheduling
algorithm is called from a point just prior to executing back to the user,
and if the kernel thread for the active CPU is sleeping, then LiS will
simply call the queue processing routine without waking up the kernel
thread.  This saves the wakeup and context switch overhead.

   <p>The routine that actually runs the queues removes one element at a time
from the list of scheduled queues and calls the service procedure pointed
to by the queue.  The routine continues until the list of scheduled queues
is empty.  Thus, when a kernel thread is actively processing queues, and
if the number of scheduled queues does not exceed the estimated capacity
of the running threads, it is quite efficient to simply add a queue to the
list and let the already running threads process them in due course.

<p><a name="Queue-Locking"></a>

<h5 class="subsubsection">3.6.2.2 Queue Locking</h5>

<p>The queue_t structure in LiS contains a spin lock that is used by LiS to
ensure that service procedures are not reentered for the same queue.  This
lock is not to be used by driver code.

   <p>When the LiS queue running routine removes a queue from the list of
scheduled queues it acquires this lock prior to calling the service
procedure.

   <p>LiS also acquires this lock when calling the put procedure associated with
a queue.  Thus, execution of the put and service procedure are excluded
for the same queue.

   <p>In a multi-CPU environment, it can happen that one CPU is calling the put
procedure while a second CPU is calling the service procedure for the same
queue.  In this case, one or the other spins until the first CPU finishes
the operation and releases the spin lock.

   <p>When LiS is about to call the put procedure of a queue from the put or
service procedure of a neighboring queue (because the driver called the
putnext function), it continues to hold the lock for the calling queue
while acquiring the lock for the destination queue.  The locks are
acquired sequentially as the chain of putnext calls traverse the stream. 
The locks are released in reverse order as the put procedures return. 
This has the effect of incrementally locking the entire stream as messages
are passed from one module to another.

   <p>This behavior is only of interest when modules are I_PUSHed on top of a
driver.  Otherwise, it is just the stream head write queue and the driver
write queue that need to be locked (or other pairwise combinations such as
the driver read queue and stream head read queue, or queues involving
multiplexors).

   <p>The lock that LiS uses has the effect of excluding multiple entries from
different threads into the put or service procedure for a given queue. 
The other queue in the queue pair is unaffected by this locking. 
Therefore, if there are data structures shared between the read and write
put and service procedures of a driver or module, it is up to the driver
writer to protect these structures with spin locks.

<p><a name="Service-Procedure-Context"></a>

<h5 class="subsubsection">3.6.2.3 Service Procedure Context</h5>

<p>Due to the manner in which service procedures are called, sometimes from
the LiS queue runner threads and sometimes from a "borrowed" system call,
service procedures may or may not have some user context present when they
run.  Service procedures should always assume that there is no user
context.  Even in the cases where there is some user context, the identity
of the user process is unpredictable.

   <p>LiS does, however, maintain a copy of the credentials of the process that
opened the stream when it calls service procedures on the stream.  LiS
saves the user and group identifiers plus the capability masks
(credentials) of the running process in the stream head structure at the
time that the STREAMS file is opened.  These identifiers are restored to
the task structure before calling a service procedure on that stream.

   <p>When calling put procedures, however, no such identity restoration occurs. 
So the credentials in place when a driver or module put procedure is
invoked are those of the invoking entity.  Because the queue runner theads
always begin driver entry with a call to the service procedure, entries
into the put procedures of subsequent drivers will have the credentials of
the stream whose service procedure was called in the first instance.  When
a driver's put procedure is entered from a system call the credentials
will be that of the user process which issued the system call.

<p><a name="Scheduling-Statistics"></a>

<h5 class="subsubsection">3.6.2.4 Scheduling Statistics</h5>

<p>LiS gathers statistics on its queue scheduling algorithm.  They can be
printed out with the command streams -S.  The output looks like the
following.

<pre class="smallexample">     N-CPUs N-Qrunners N-Running N-Requested
          2          2         0          0
     
     CPU   Qsched-Cnts Qsched-ISR Svc-Q-Cnts Qrun-Cnts Active Thread-PID
       0     540752204  175753842  459587537 239611835      0        857
       1     540683832  175833424  459150290 239672683      0        858
</pre>
   <p>The fields have the following meanings.
     <dl>
<dt>`<samp><span class="samp">N-CPUs</span></samp>'<dd>Number of CPUs on the system.

     <br><dt>`<samp><span class="samp">N-Qrunners</span></samp>'<dd>Number of queue runner kernel threads.  These are the processes that
appear as LiS-2.12:0 in a ps display.

     <br><dt>`<samp><span class="samp">N-Running</span></samp>'<dd>Number of qeuue runner threads that are currently active.

     <br><dt>`<samp><span class="samp">N-Requested</span></samp>'<dd>The number of queues that are in the list of scheduled queues. 
</dl>

     <dl>
<dt>`<samp><span class="samp">CPU</span></samp>'<dd>The remainder of the statistics are kept on a per-CPU basis.

     <br><dt>`<samp><span class="samp">Qsched-Cnts</span></samp>'<dd>This is the number times the routine (lis_setqsched) that decides whether
or not to wake up a queue runner process or to directly process scheduled
queues has been called.  This routine is called whenever a queue is added
to the scheduling list.  The counter reflects which CPU made the call to
the routine.

     <br><dt>`<samp><span class="samp">Qsched-ISR</span></samp>'<dd>The number of times lis_setqsched was called from an interrupt routine and
from which CPU.

     <br><dt>`<samp><span class="samp">Svc-Q-Cnts</span></samp>'<dd>The number of callouts to service procedures on a per-CPU basis.

     <br><dt>`<samp><span class="samp">Qrun-Cnts</span></samp>'<dd>The number of times the routine (queurun) that removes queues from the
schedule list was called.  This routine does not return until the queue
scheduling list is empty.  It can be running on multiple CPUs
simultaneously.  It is typically called from the queue runner threads but
can also be called from an LiS system call either just prior to returning
to the user or just prior to sleeping on some event such as the arrival of
messages at the stream head.

     <br><dt>`<samp><span class="samp">Active</span></samp>'<dd>Displays as 0 or 1 depending upon whether there is a queue runner thread
running on the particular CPU at the time that the statistics were
sampled.

     <br><dt>`<samp><span class="samp">Thread-PID</span></samp>'<dd>The process id of the queue runner thread assaigned to eachCPU. 
</dl>

<p><a name="Operating-System-Interface"></a>

<h4 class="subsection">3.6.3 Operating System Interface Routines</h4>

<p>In the file &lt;sys/osif.h&gt;, LiS provides insulation routines for a number of
commonly used kernel functions.  These functions are used with their Linux kernel
names, but those names are redefined in &lt;sys/osif.h&gt; to be subroutine calls on
functions that are actually defined in the file osif.c within LiS.  The osif.c
file is compiled at LiS installation time and is sensitive to kernel version
information.

   <p>To use this interface, you include the header files that you would
normally include to use the kernel functions, and then include &lt;sys/osif.h&gt;
after all of the kernel include files.  This allows for the redefinition of the
names.

   <p>The kernel functions provided via &lt;sys/osif.h&gt; are as follows, grouped by type
of function.

<p><a name="PCI-BIOS-Interface"></a>

<h4 class="subsection">3.6.4 PCI BIOS Interface</h4>

<p>These are routines that utilize or simulate the original PCI BIOS interface of
the 2.0 series of kernels.  The names of these routines are changed via defines. 
Use them as if the prototypes were as follows.  You can use these routines on 2.2
kernels even though they represent the 2.0 style of inteface.

<pre class="smallexample">     #if LINUX_VERSION_CODE &lt; 0x020100       /* 2.0 kernel */
     unsigned long pcibios_init(unsigned long memory_start,
                                unsigned long memory_end);
     #else   /* 2.1 or 2.2 kernel * /
     void pcibios_init(void) ;
     #endif
     int pcibios_find_class(unsigned int class_code, unsigned short index,
                            unsigned char *bus, unsigned char *dev_fn);
     int pcibios_find_device(unsigned short vendor, unsigned short dev_id,
                             unsigned short index, unsigned char *bus,
                             unsigned char *dev_fn);
     int pcibios_read_config_byte(unsigned char bus, unsigned char dev_fn,
                                  unsigned char where, unsigned char *val);
     int pcibios_read_config_word(unsigned char bus, unsigned char dev_fn,
                                  unsigned char where, unsigned short *val);
     int pcibios_read_config_dword(unsigned char bus, unsigned char dev_fn,
                                   unsigned char where, unsigned int *val);
     int pcibios_write_config_byte(unsigned char bus, unsigned char dev_fn,
                                   unsigned char where, unsigned char val);
     int pcibios_write_config_word(unsigned char bus, unsigned char dev_fn,
                                   unsigned char where, unsigned short val);
     int pcibios_write_config_dword(unsigned char bus, unsigned char dev_fn,
                                    unsigned char where, unsigned int val);
     const char *pcibios_strerror(int error) ;
</pre>
   <p><a name="PCI-Interface"></a>

<h4 class="subsection">3.6.5 PCI Interface</h4>

<p>These routines constitute the PCI interface as implemented in the 2.2 series of
kernels.  Please note that these are filtered calls to the operating system and
still depend directly upon the kernel structure "struct pci_dev".  LiS provides a
more abstract interface to PCI that does not depend upon the direct definition
kernel structures.  The [61]LiS PCI interface is to be preferred since it
provides more insulation against changes in the kernel. 
<a name="index-struct-pci_005fdev-123"></a>
<pre class="smallexample">     struct pci_dev *pci_find_device(unsigned int vendor, unsigned int device,
                                     struct pci_dev *from);
     struct pci_dev *pci_find_class(unsigned int class, struct pci_dev *from);
     struct pci_dev *pci_find_slot(unsigned int bus, unsigned int devfn);
     int pci_read_config_byte(struct pci_dev *dev, u8 where, u8 * val);
     int pci_read_config_word(struct pci_dev *dev, u8 where, u16 * val);
     int pci_read_config_dword(struct pci_dev *dev, u8 where, u32 * val);
     int pci_write_config_byte(struct pci_dev *dev, u8 where, u8 val);
     int pci_write_config_word(struct pci_dev *dev, u8 where, u16 val);
     int pci_write_config_dword(struct pci_dev *dev, u8 where, u32 val);
     void pci_set_master(struct pci_dev *dev);
</pre>
   <p><a name="IRQ-Interface"></a>

<h4 class="subsection">3.6.6 IRQ Interface</h4>

<p>These are the routines that are used to attach and detach interrupt service
routines to hardware interrupts.

<pre class="smallexample">     int request_irq(unsigned int irq,
     void (*handler) ((int, void *, void *), unsigned long flags, const char *device,
                      void *dev_id);
     void free_irq(unsigned int irq, void *dev_id);
     void disable_irq(unsigned int irq);
     void enable_irq(unsigned int irq);
</pre>
   <p><a name="I%2fO-Memory-Mapping"></a>
<a name="I_002fO-Memory-Mapping"></a>

<h4 class="subsection">3.6.7 I/O Memory Mapping</h4>

<p>These are the routines that are typically used to map PCI bus or physical
addresses to CPU virtual addresses.  LiS includes some backward compatibility
here to older kernel versions.

<pre class="smallexample">     void *ioremap_nocache(unsigned long offset, unsigned long size);
     void iounmap(void *addr);
     void *vremap(unsigned long offset, unsigned long size);
     unsigned long virt_to_phys(volatile void *addr);
     void *phys_to_virt(unsigned long addr);
</pre>
   <p><a name="I%2fO-Port-Access"></a>
<a name="I_002fO-Port-Access"></a>

<h4 class="subsection">3.6.8 I/O Port Access</h4>

<p>These are the routines that allow a driver to register I/O ports.

<pre class="smallexample">     int check_region(unsigned int from, unsigned int extent);
     void request_region(unsigned int from, unsigned int extent, const char *name);
     void release_region(unsigned int from, unsigned int extent);
</pre>
   <p><a name="Memory-Allocation"></a>

<h4 class="subsection">3.6.9 Memory Allocation</h4>

<p>These are the kernel routines that can be used to allocate memory.  LiS also has
a more insulated abstraction for kernel memory allocation.  It is recommended
that you use the [66]LiS memory allocator versions rather than the direct kernel
versions.

<pre class="smallexample">     void *kmalloc(size_t nbytes, int type);
     void kfree(const void *ptr);
     void *vmalloc(unsigned long size);
     void vfree(void *ptr);
</pre>
   <p><a name="DMA-Routines"></a>

<h4 class="subsection">3.6.10 DMA Routines</h4>

<p>These are the routines that are used to allocate a main-board old-style DMA
channel for use by your driver.  These are not much used anymore. 
See below for a more elaborate abstraction of DMA routines.

<pre class="smallexample">     int request_dma(unsigned int dma_nr, const char *device_id);
     void free_dma(unsigned int dma_nr);
</pre>
   <p><a name="Delay-Routines"></a>

<h4 class="subsection">3.6.11 Delay Routines</h4>

<p>This is the routine that simply spins the CPU for a given number of
microseconds.  LiS also redefines the symbol "jiffies" to a subroutine call to
help insulate STREAMS drivers from changes in the way the kernel keeps track of
time.  Remember, the redefinition is accomplished using C language defines, so
the following declarations describe the effective usage of these symbols, not
their literal definition.

<pre class="smallexample">     void udelay(long micro_secs);
     unsigned long jiffies;
</pre>
   <p><a name="Printing-Routines"></a>

<h4 class="subsection">3.6.12 Printing Routines</h4>

<p>These are the most commonly used printf-like routines in the kernel.  STREAMS
drivers would be more portable if they used the cmn_err routine instead of
printk.

<pre class="smallexample">     int printk(const char *fmt, ...);
     int sprintf(char *bfr, const char *fmt, ...);
     int vsprintf(char *bfr, const char *fmt, va_list args);
</pre>
   <p><a name="Timer-Routines"></a>

<h4 class="subsection">3.6.13 Timer Routines</h4>

<p>These are the the routines that start and stop kernel timers.  STREAMS drivers
would be more portable if they used the standard "[71]timeout" routine.

<pre class="smallexample">     void add_timer(struct timer_list *timer);
     int del_timer(struct timer_list *timer);
</pre>
   <p><a name="index-struct-timer_005flist-124"></a>
The following routine converts time in micro seconds to system "ticks".  The
"ticks" value is suitable for use with the timeout routine.  Note that if the
micro_sec parameter is less than the number of micro seconds in a system tick
then the routine returns zero.

<pre class="smallexample">     unsigned lis_usectohz(unsigned micro_sec);
</pre>
   <p>The following routine is an LiS abstraction of the C library routine
gettimeofday.  Note the absence of the time zone parameter.

<pre class="smallexample">     void lis_gettimeofday(struct timeval *tv);
</pre>
   <p><a name="index-struct-timeval-125"></a>
The following two kernel routines are called via the LiS osif.c code.

<pre class="smallexample">     void do_gettimeofday(struct timeval *tp);
     void do_settimeofday(struct timeval *tp);
</pre>
   <p><a name="index-struct-timeval-126"></a>
<a name="Sleep-and-Wakeup-Routines"></a>

<h4 class="subsection">3.6.14 Sleep and Wakeup Routines</h4>

<p>These are the kernel routines for sleeping using wait queues.  STREAMS drivers
should not be using these since only "open" and "close" routines are allowed to
sleep, and for those cases, [73]LiS semaphores would provide better insulation
from the kernel.  STREAMS "put" and "service" routines should use [74]LiS spin
locks for mutual exclusion.

<pre class="smallexample">     void sleep_on(OSIF_WAIT_Q_ARG);
     void interruptible_sleep_on(OSIF_WAIT_Q_ARG);
     void wake_up(OSIF_WAIT_Q_ARG);
     void wake_up_interruptible(OSIF_WAIT_Q_ARG);
</pre>
   <p><a name="Thread-Creation"></a>

<h4 class="subsection">3.6.15 Thread Creation</h4>

<p>A STREAMS driver in LiS can create kernel threads if it so chooses.  The
following routine simplifies this task.  It consolidates all of the kernel
manipulations involved with the creation of a kernel thread into one place, thus
removing references to these kernel functions from STREAMS driver code.

<h5 class="subsubsection">3.6.15.1 Prototype</h5>

<pre class="smallexample">     pid_t lis_thread_start(int (*fcn) (void *), void *arg, const char *name);
     int lis_thread_stop(pid_t pid);
</pre>
   <p>Arguments

   <p>fcn

   <p>The function that is to be used as the entry point for the thread.

   <p>arg

   <p>The argument passed to the function.

   <p>name

   <p>An ASCII name associated with the thread.  This name should be less than 16
characters in length.  It will be the name of the thread that displays in a ps
listing.

<h5 class="subsubsection">3.6.15.2 Operation</h5>

<p>lis_thread_start creates a new thread, performs some operations prior to
entering the fcn, and then calls fcn which acts as the "main" routine for the
thread.  The arg parameter is passed to fcn.

   <p>Before fcn is entered, the newly created thread will have shed all user space
files and mapped memory.  Thus, it is a kernel-only thread.

   <p>All signals are still enabled.  Note that when the kernel goes down for reboot
all processes are first sent a SIGTERM.  Once those have been processed, all
processes are then sent a SIGKILL.  It is the implementor's choice which of these
it pays attention to in order to exit prior to a reboot.

   <p>The fcn is entered with the "big kernel lock" NOT held, just as it would be for
calling the "kernel_thread" function directly.  On 2.2 kernels, the fcn should
get this lock so that it can utilize kernel services safely.

   <p>The user's fcn returns a value when it exits and that value is returned to the
kernel.  It is not clear that anything actually pays any attention to this
returned value.  It particular, it is not visible to the thread that started the
new thread.

   <p>lis_thread_start itself returns the process id of the new thread, or a negative
error number.  This value can be used to kill the thread.

   <p>lis_thread_stop kills a thread started by lis_thread_start.  It returns 0 for
success or a negative error number for failure.

<p><a name="Major%2fMinor-Device-Numbering"></a>
<a name="Major_002fMinor-Device-Numbering"></a>

<h4 class="subsection">3.6.16 Major/Minor Device Numbering</h4>

<p>Please note that LiS-2.17 changed the internal representation of the major and
minor device numbers within the 32 bit <code>dev_t</code> structure.  The following
documents the new format and usage conventions. 
<a name="index-dev_005ft-127"></a>
In STREAMS the dev_t structure is used to combine a major device number and a
minor device number into a single integer length quantity.  The Linux kernel
restricts these numbers to the range 0 to 255 (8-bit values).

   <p><a name="index-dev_005ft-128"></a>LiS provides a typedef for <code>dev_t</code> that results in an unsigned integer
quantity.  Internal to LiS the high order 12 bits are used for major device
number and the low order 20 bits are used for minor device number.

   <p>STREAMS drivers include the file <samp><span class="file">&lt;sys/stream.h&gt;</span></samp> that causes the view of
<code>dev_t</code>
<a name="index-dev_005ft-129"></a>to change from the kernel's 8/8 view to the LiS 12/20 view.  To ensure proper
operation, STREAMS drivers should use the following functions to manipulate
<code>dev_t</code> variables.  These functions are SVR4 compatible.

     
<a name="index-getmajor-130"></a>
<dl><dt><code>int getmajor(dev_t dev);</code><dd>Extracts the major device number

     <p><a name="index-getminor-131"></a><br><dt><code>int getminor(dev_t dev);</code><dd>Extracts the minor device number

     <p><a name="index-makedevice-132"></a><br><dt><code>dev_t makedevice(int maj, int min);</code><dd>Combines a major and minor device number into a dev_t

     <p><a name="index-DEV_005fSAME-133"></a><br><dt><code>int DEV_SAME(dev_t d1, dev_t d2);</code><dd>True if the two devices are the same

     <p><a name="index-DEV_005fTO_005fINT-134"></a><br><dt><code>int DEV_TO_INT(dev_t dev);</code><dd>Converts dev_t to an int
</dl>

   <p>The sample drivers that come with LiS now use these constructs to manipulate
device structures and can serve as examples for their usage.

   <p>Within a STREAMS driver it is occasionally necessary to make a <code>dev_t</code>
<a name="index-dev_005ft-135"></a>value in the external 8/8 format.  This is required, for example, when a driver
is using the <samp><span class="command">lis_mknod()</span></samp>
<a name="index-lis_005fmknode-136"></a>function to create a device node at driver initialization time.  LiS provides
the function <samp><span class="command">UMKDEV(major, minor)</span></samp> for this purpose. 
<a name="index-UMKDEV-137"></a>
<a name="LiS-Memory-Allocation"></a>

<h4 class="subsection">3.6.17 LiS Memory Allocation</h4>

<p>LiS provides for several different styles of memory allocation, all of them
insulated from the Linux kernel.  These routines allow your driver to allocate
memory in several different ways while still maintaining compatibility with
different versions of the Linux kernel, with no driver recompilation required.

   <p>To use the LiS memory allocation routines include the file &lt;sys/lismem.h&gt; in
your STREAMS driver source code.

<p><a name="LiS-malloc-and-free-Equivalents"></a>

<h4 class="subsection">3.6.18 LiS malloc and free Equivalents</h4>

<p>The first group of memory allocation routines are the routines that play the
role of "malloc" and "free." These routines keep a master linked list of all
allocated memory areas.  This list can be printed out via an ioctl to LiS.  Each
allocated area is tagged with the file name and line number of the code that
caused it to be allocated.  Each area contains a guard word at the front and back
to enable the allocator to detect "off by one" accesses outside the allocated
area.

   <p>LiS uses this allocator internally for allocating queues, messages and other
internal data structures.  This would be the allocator of choice for STREAMS
drivers to use to allocate instance structures.

   <p>Memory allocated in this manner is ultimately allocated by the kernel routine
"kmalloc".  As such, it is not guaranteed to be DMA-able (in the old style), or
to occupy physically contiguous memory locations.  [78]See below for routines
that can be used to allocate these types of memory areas.

   <p>The routines are as follows:

<pre class="example">     void *ALLOC(int nbytes);
     void *ALLOCF(int nbytes, char *tag);
     void FREE(void *ptr);
</pre>
   <p>The ALLOC and FREE routines are analogous to "malloc" and "free".  The ALLOCF
routine includes a character string which is prepended to the file name stored
as the location from which the allocation occurred.  It can serve as a tag for
the type of memory being allocated.

   <p>Usage examples:

<pre class="example">     ptr = ALLOC(456);
     FREE(ptr);
     ptr = ALLOCF(578, "Instance: ");
     FREE(ptr);
</pre>
   <p><a name="LiS-Kernel-Memory-Allocators"></a>

<h4 class="subsection">3.6.19 LiS Kernel Memory Allocators</h4>

<p>These routines use the LiS malloc/free internal routines to allow for more
flexibility in the options used when calling the kernel allocator.  These
routines all lead to a call on "kmalloc" with appropriate options.  It is worth
noting that the numerical value of the constants used in calling the kernel's
"kmalloc" routine changed between the 2.2 and 2.4 versions of the kernel.  Thus,
drivers which called the kernel's "kmalloc" directly have to be recompiled to
run in a 2.4 kernel.  STREAMS drivers using the memory allocation interface
defined here could run without modification and without a recompilation on both
kernels, assuming that the drivers otherwise did not use any direct kernel
functions.

<pre class="example">     void *lis_alloc_atomic(int nbytes);
     void *lis_alloc_kernel(int nbytes);
     void *lis_alloc_dma(int nbytes);
     void *lis_free_mem(void *mem_area);
</pre>
   <p>These routines pass the allocation options GFP_ATOMIC, GFP_KERNEL, and
GFP_DMA, respectively, to "kmalloc" when allocating the memory.  LiS takes
care of passing the proper values to the kernel routine so that driver code can
remain portable.

   <p>The routine lis_free_mem returns a NULL pointer for the convenience of the
caller.

   <p>The kernel's kmalloc is restricted as to the number of bytes that it will
allocate.  The LiS routines do not have this restriction.  If the number of
requested bytes is larger than 16K the LiS allocation routines will call the
page allocator to allocate the memory.  The lis_free_mem routine knows whether to
free pages or to use the kernel's kfree routine.

   <p>Usage Examples:

<pre class="example">     ptr = lis_alloc_kernel(sizeof(structure));
     ptr = lis_free_mem(ptr);        /* returns NULL pointer */
</pre>
   <p><a name="LiS-Page-Allocator"></a>

<h4 class="subsection">3.6.20 LiS Page Allocator</h4>

<p>These routines allow a STREAMS driver to allocate memory directly from the
kernel's page allocator.  Memory allocated in this manner occupies physically
contiguous locations and is suitable for use with bus master DMA PCI devices.

   <p>Unlike the kernel's page allocator, the size that is specified when calling the
LiS page allocator is in bytes, not "order", or other encoding of page size.  LiS
calculates the number of pages based upon the requested size.

   <p>Also, LiS does not require you to pass the size of the area when freeing the
page.

   <p>The routines are as follows:

<pre class="example">     void *lis_get_free_pages(int nbytes);
     void *lis_free_pages(void *ptr);
</pre>
   <p>The lis_free_pages routine returns a NULL pointer for the convenience of the
caller.

   <p>Usage Examples:

<pre class="example">     ptr = lis_get_free_pages(1024 * kbytes);
     ptr = lis_free_pages(ptr);
</pre>
   <p><a name="LiS-PCI-Interface"></a>

<h4 class="subsection">3.6.21 LiS PCI Interface</h4>

<p>To assist in the portability of STREAMS drivers across different
versions of the Linux kernel, LiS provides an abstraction of the PCI
configuration interface.  It defines a data structure that is used to describe a
PCI device and a set of routines that perform operations on PCI configuration
space.

   <p>Using these abstractions, a STREAMS driver can be portable from the 2.2 kernel
to the 2.4 kernel with no recompilation required.  The LiS structures completely
hide the kernel data structures and PCI configuration space operations from the
STREAMS driver.

   <p>To use this interface include the file &lt;sys/lispci.h&gt; in your STREAMS driver
source code.

<p><a name="The-LiS-PCI-Device-Structure"></a>

<h4 class="subsection">3.6.22 The LiS PCI Device Structure</h4>

<p>This structure is distinct from a similar structure which is defined by the
Linux kernel, but which differs significantly between the 2.2 and 2.4 kernels. 
The LiS version of this structure is oriented towards providing just enough
information to allow a driver to operate the PCI device, without being concerned
about the details of PCI bus topology.

   <p>This structure is used to return information to the STREAMS driver concerning
devices that meet certain criteria, such as device class or manufacturer devide
identification.

<pre class="smallexample">     #define LIS_PCI_MEM_CNT 12      /* # mem addrs */
     typedef struct lis_pci_dev {
             unsigned bus;                   /* bus number */
             unsigned dev_fcn;               /* device/function code */
             unsigned vendor;                /* vendor id */
             unsigned device;                /* device id */
             unsigned class;                 /* class type */
             unsigned hdr_type;              /* PCI header type */
             unsigned irq;                   /* IRQ number */
             unsigned long mem_addrs[LIS_PCI_MEM_CNT];
             void *user_ptr;                 /* private for user */
     } lis_pci_dev_t;
</pre>
   <p><a name="index-struct-lis_005fpci_005fdev-138"></a>
The bus field contains the bus number on which the device is located.  LiS
obtains this information from the kernel.

   <p>The dev_fcn field contains an encoding of the device number on the bus and the
function number within the device that this particular structure pertains to. 
The pair bus and dev_fcn uniquely identifies a device in the PCI subsystem. 
Devices can be searched for on the PCI bus by bus number and dev_fcn value (see
below).

   <p>Given a dev_fcn value, a pair of macros will extract the "device" portion and
the "function number" portion from it.

     
<a name="index-LIS_005fPCI_005fDEV-139"></a>
<dl><dt><code>#define LIS_PCI_DEV(devfcn)</code><dd>Extracts the "device" portion

     <p><a name="index-LIS_005fPCI_005fFCN-140"></a><br><dt><code>#define LIS_PCI_FCN(devfcn)</code><dd>Extracts the "function number" portion

     <p><a name="index-LIS_005fMK_005fPCI_005fDEV_005fFCN-141"></a><br><dt><code>#define LIS_MK_DEV_FCN(dev,fcn)</code><dd>Put dev and fcn together

     <p>Given a device number and a function number, this macro will synthesize a
dev_fcn value suitable for use in searching the bus. 
</dl>

   <p>The vendor and device fields contain the vendor id (manuracturer code) and the
vendor's device identifier for the device.  Devices can be searched for on the
PCI bus by vendor and device identifier (see below).

   <p>The class field contains the class code associated with the device.  Devices can
be searched for on the PCI bus by class code (see below).

   <p>The hdr_type field gives the type information for the PCI configuration space
header.

   <p>The irq field gives the IRQ number that is assigned to this device.  This is the
number that is used to attach an interrupt service routine to the device.

   <p>The mem_addrs field contains a list of addresses associated with the device. 
These are raw PCI bus addresses and are not mapped into the address space of the
processor.  Empty slots contain the value zero.

<p><a name="LiS-PCI-Search-Routines"></a>

<h4 class="subsection">3.6.23 LiS PCI Search Routines</h4>

<p>These routines allow the STREAMS driver to find devices on the PCI bus and
obtain a pointer to the lis_pci_dev_t structure for the device.

<h5 class="subsubsection">3.6.23.1 <code>lis_pci_dev_t *lis_pci_find_device(unsigned vendor, unsigned device, lis_pci_dev_t *previous_struct);</code></h5>

<p>Find the device by vendor identification and vendor device identification.  By
passing in the pointer to the previous structure returned it is possible to find
all devices of a given type.

   <p>The routine returns NULL if there are no (more) devices for the given vender and
device identifiers.

   <p>Usage example:

<pre class="smallexample">     lis_pci_dev_t *pcip = NULL;
     while ((pcip = lis_pci_find_device(0x109e, 0x8474, pcip)) != NULL) {
             pcip points to a unique device from this vendor
     }
</pre>
   <h5 class="subsubsection">3.6.23.2 <code>lis_pci_dev_t *lis_pci_find_class(unsigned class, lis_pci_dev_t *previous_struct);</code></h5>

<p>Find the device by class.  The usage is similar to lis_pci_find_device in that
you can use a pointer to loop through all devices of a given class.

   <p>The function returns NULL if there are no (more) devices of the given class.

<h5 class="subsubsection">3.6.23.3 <code>lis_pci_dev_t *lis_pci_find_slot(unsigned bus, unsigned dev_fcn);</code></h5>

<p>Find the device by slot number.  If you know the bus number (zero for most simple
Intel PC systems) and the dev_fcn, you can obtain the PCI configuration
information for that particular "slot".  Use the LIS_MK_DEV_FCN macro to
synthesize the dev_fcn value from the "device" (slot) number and the function
number.

   <p>The function returns NULL if there is no device in that slot.

   <p>Note that this routine only returns one structure since it is not meaningful to
process a list of devices for the same slot.

<p><a name="LiS-PCI-Configuration-Space-Routines"></a>

<h4 class="subsection">3.6.24 LiS PCI Configuration Space Routines</h4>

<p>The following routines are used to read and write PCI configuration space for a
particular device.  Configuration space can be accessed by byte, word (16 bit) or
dword (32 bit).

   <p>Each routine takes a pointer to an lis_pci_dev_t structure as an argument.  It
also takes an index value which is the byte offset from the base of the
configuration space for the device at which the given byte/word/dword is to be
read or written.

   <p>Care should be exercised when writing to configuration space since many of these
values are determined by the PCI BIOS at system boot time.

   <p>The lis_pci_set_master routine sets the "bus master DMA" bit for the given
device.  This is used for devices that perform bus master DMA.

   <p>The routines are as follows:

<pre class="smallexample">     int lis_pci_read_config_byte(lis_pci_dev_t *dev, unsigned index,
                                  unsigned char *rtn_val);
     int lis_pci_read_config_word(lis_pci_dev_t *dev, unsigned index,
                                  unsigned short *rtn_val);
     int lis_pci_read_config_dword(lis_pci_dev_t *dev, unsigned index,
                                   unsigned long *rtn_val);
     int lis_pci_write_config_byte(lis_pci_dev_t *dev, unsigned index,
                                   unsigned char val);
     int lis_pci_write_config_word(lis_pci_dev_t *dev, unsigned index,
                                   unsigned short val);
     int lis_pci_write_config_dword(lis_pci_dev_t *dev, unsigned index,
                                    unsigned long val);
     void lis_pci_set_master(lis_pci_dev_t *dev);
</pre>
   <p><a name="LiS-PCI-DMA-Routines"></a>

<h4 class="subsection">3.6.25 LiS PCI DMA Routines</h4>

<p>These routines are used to allocate memory suitable for use with PCI bus master
DMA devices or to map page-allocated memory for those purposes.

   <p>To understand what these routines do, please refer to the file
<samp><span class="file">/usr/src/linux/Documentation/DMA-mapping.txt</span></samp> in a fairly recent 2.4 kernel
source tree.  The kernel provides more functionality than is provided in LiS, so
there are more routines documented there than are found in this interface. 
<a name="index-g_t_002fusr_002fsrc_002flinux_002fDocumentation_002fDMA_002dmapping_002etxt-142"></a>
You can use these routines in 2.2 kernels but the functions perfomed are simply
approximations of the 2.4 semantics and may not work in all cases.

   <p>Note that the LiS routines have simplified the kernel interface involving "DMA
handles" in such a way as to make these constructs easier to use and less error
prone.

   <p>The following routines are used to allocate memory which the hardware keeps
consistent between CPU access and DMA access.

<pre class="smallexample">     void *lis_pci_alloc_consistent(lis_pci_dev_t *dev, size_t size,
                                    lis_dma_addr_t * dma_handle);
     void *lis_pci_free_consistent(lis_dma_addr_t * dma_handle);
</pre>
   <p>The following routines are used to obtain a DMA address from a returned DMA
handle.  You need to know whether or not your hardware environment is using
32-bit or 64-bit DMA addresses.

<pre class="smallexample">     u32 lis_pci_dma_handle_to_32(lis_dma_addr_t * dma_handle);
     u64 lis_pci_dma_handle_to_64(lis_dma_addr_t * dma_handle);
</pre>
   <p>The following routines are usd to map page-allocated memory for DMA purposes. 
The direction indicator of LIS_SYNC_FOR_CPU means that you intend to use the
memory for DMA transfers into memory.  The direction indicator of
LIS_SYNC_FOR_DMA means that you intend to use the memory for DMA transfers out
of memory.  If the DMA operation goes both ways then use LIS_SYNC_FOR_BOTH.

<pre class="smallexample">     void lis_pci_map_single(lis_pci_dev_t *dev, void *ptr, size_t size,
                             lis_dma_addr_t * dma_handle, int direction);
     void *lis_pci_unmap_single(lis_dma_addr_t * dma_handle);
     int lis_osif_pci_map_sg(struct pci_dev *hwdev, struct scatterlist *sg,
     			int nents, int direction);
     void lis_osif_pci_unmap_sg(struct pci_dev *hwdev, struct scatterlist *sg,
     			int nents, int direction);
</pre>
   <p>The direction indicators are as follows:

<pre class="smallexample">     LIS_SYNC_FOR_CPU
     LIS_SYNC_FOR_DMA
     LIS_SYNC_FOR_BOTH
</pre>
   <p>With mapped memory, i.e., non-consistent memory, you need to synchronize the
memory whenever the CPU writes into it and the DMA needs to read it, or when the
DMA has written into it and the CPU needs to read it.  The following routine is
used for that purpose.

<pre class="smallexample">     void lis_pci_dma_sync_single(lis_dma_addr_t * dma_handle, size_t size,
                                  int direction);
     void lis_osif_pci_dma_sync_sg(struct pci_dev *hwdev,
     			      struct scatterlist *sg,
     			      int nelems, int direction);
</pre>
   <p>The following routines can be used at driver initialization time to discover and
control the addressing boundary restrictions of a device.

<pre class="smallexample">     int lis_pci_dma_supported(lis_pci_dev_t *dev, u64 mask);
     int lis_pci_set_dma_mask(lis_pci_dev_t *dev, u64 mask);
</pre>
   <p>Please consult the file <samp><span class="file">&lt;sys/osif.h&gt;</span></samp> for additional routines that may be
present for DMA support.

<p><a name="LiS-Atomic-Functions"></a>

<h4 class="subsection">3.6.26 LiS Atomic Functions</h4>

<p>LiS provides for atomic integers implemented in a portable fashion.  To declare
an LiS portable atomic integer use the following declaration syntax:

<pre class="smallexample">     lis_atomic_t myatom;
</pre>
   <p>LiS then provides the following operations on variables of this type.

<pre class="smallexample">     void lis_atomic_set(lis_atomic_t *atomic_addr, int valu);
     int lis_atomic_read(lis_atomic_t *atomic_addr);
     void lis_atomic_add(lis_atomic_t *atomic_addr, int amt);
     void lis_atomic_sub(lis_atomic_t *atomic_addr, int amt);
     void lis_atomic_inc(lis_atomic_t *atomic_addr);
     void lis_atomic_dec(lis_atomic_t *atomic_addr);
     int lis_atomic_dec_and_test(lis_atomic_t *atomic_addr);
</pre>
   <p>Of these, only lis_atomic_dec_and_test needs any explanation.  This routine
performs an atomic_dec on the variable and returns true if the counter reached
zero via that decrement operation.  Note that by the time the routine returns
some other CPU with access to the same variable may have changed its value.  So
the return reports only on the instantaneous value of the variable.

<p><a name="LiS-Locks"></a>

<h4 class="subsection">3.6.27 LiS Locks</h4>

<p>LiS provides an abstraction and an insulated interface to the Linux kernel for
spin locks, interrupt disabling and semaphores.  If you use this interface in
your STREAMS driver you can utilize these kernel services on different versions
of the Linux kernel without the necessity of recompiling your driver for each
version of the kernel.

   <p>The LiS locks are especially useful in consideration of Linux kernels compiled
with and without the SMP option set.  The spin locks and semaphores of the Linux
kernel are implemented using external inline functions.  These functions are
coded in assembly language and generate different sequences of instructions
depending upon the compile time setting of the SMP option.  Spin locks and
semaphores compiled with SMP reset will not function properly on a multi-CPU
system running an SMP kernel.

   <p>The LiS locks mechanism solves this problem by abstracting the locking
primitives into actual subroutines, not inlines, defined within LiS.  Since LiS
is compiled from source code when it is installed the subroutines in LiS have
the correct setting of SMP for the locking primitives.  This allows the STREAMS
driver code to be compiled once and the object code reused for multiple
installations with varying options.

   <p>The following sections document the spin locks, interrupt disabling and
semaphore mechanisms offered by LiS.  To use these mechanisms include the file
&lt;sys/lislocks.h&gt; in your STREAMS driver source code.

   <p>In choosing the appropriate type of lock to use, one must bear in mind that
STREAMS drivers are not allowed to "sleep" in "put" and "service" procedures,
only in "open" and "close" routines.  That means that spin locks are the mutual
exclusion mechanism of choice for "put" and "service" procedures.  It is
reasonable to use sleeping semaphores in "open" and "close" routines.

   <p>The simple interrupt exclusion mechanism can be used to exclude only interrupt
routine execution for a section of code.  However, this mechanism does not
exclude other "put" or "service" procedures that may be executed on other CPUs. 
This may not be much of a consideration since LiS acquires a lock in the queue
structure before executing the "put" or "service" procedure pointed to by that
queue.

   <p>However, it could happen that the "read put/service" and "write put/service"
procedures get executed simultaneously since there are two different locks in
the STREAMS queues, one in the read queue and one in the write queue.  In this
case, the STREAMS driver code would need to use spin locks to protect data
structures shared between the read and write "put" or "service" procedures. 
See the `<samp><span class="samp">qlock</span></samp>' option for <samp><span class="command">strconf</span></samp> for more information about LiS
implicit use of locks to protect put and service procedure entries.

<p><a name="LiS-Spin-Locks"></a>

<h4 class="subsection">3.6.28 LiS Spin Locks</h4>

<p>LiS provides an implementation of spin locks that utilizes the Linux kernel's
spin lock mechanism to perform the actual locking functions.  The LiS
implementation adds features to the kernel spin locks such as the following:

     <ul>
<li>LiS spin locks are nestable.  The same thread can acquire the same lock and
release it in nested fashion.

     <li>LiS spin locks are more debuggable.  The LiS lock structure contains an
ASCII name for the lock which makes it easier to identify in debugging
situations.

     <li>LiS maintains a lock trace table.  A debugging option for LiS causes it to
log all spin lock operations to a trace table which can be printed out via an
option to the streams command.

     <li>LiS spin locks are portable.  A STREAMS driver can utilize the same LiS
lock mechanism across different versions of the Linux kernel.  This pushes the
kernel differences into LiS and out of the STREAMS driver code.

     <li>LiS spin locks are documented.  You don't have to read the kernel source
code to figure out how to use them. 
</ul>

   <p>For these reasons I highly recommend that STREAMS drivers use the LiS spin lock
implementation in place of the direct kernel spin locks.  The portability aspect
of LiS spin locks cannot be overemphasized.  Different Linux kernel compile-time
options can lead to a proliferation of STREAMS driver code versions, or the
necessity of always compiling the driver from source when it is installed.  LiS
spin locks allow a STREAMS driver to be compiled independently of kernel options
with only the binary needed at driver installation time.

   <p>To declare a spin lock, use the typedef lis_spin_lock_t, as in the following:

   <p><a name="index-lis_005fspin_005flock_005ft-143"></a>
<pre class="smallexample">     lis_spin_lock_t mylock;
</pre>
   <p>LiS spin locks must be initialized before they are used.  There is one
initialization routine no matter which style of locking you intend to use.

   <p>void lis_spin_lock_init(lis_spin_lock_t *lock, const char *name) ;

   <p>This routine initializes the spin lock and associates an ASCII string name with
it.  The pointer name is saved in the lock structure for later use in printing
out the lock trace table.  It is the caller's responsibility to ensure that the
name resides in memory that will persist for the duration of the existence of
the lock.

   <p>You can also use dynamically allocated spin locks.  This technique allows your
STREAMS driver to be completely immune from changes in kernel version regarding
the size of a spin lock since your driver only has to store a pointer to the
allocated lock.  The allocation and deallocation routines are as follows.

<pre class="smallexample">     lis_spin_lock_t *lis_spin_lock_alloc(const char *name);
     lis_spin_lock_t *lis_spin_lock_free(lis_spin_lock_t *lock, const char *name);
</pre>
   <p>The allocation function returns a pointer to the spin lock, or NULL if the
memory could not be allocated.  The free function returns a NULL pointer for the
convenience of the caller.

   <p>For further information on spin locks, see the section on [89]debugging spin
locks.

   <p>To lock and unlock a spinlock, use any of the following pairs of routines.  If
you use the first routine to lock the spin lock then be sure to use its
companion unlock routine.  For nesting considerations, [91]see below.

<pre class="smallexample">     void lis_spin_lock(lis_spin_lock_t *lock);
     void lis_spin_unlock(lis_spin_lock_t *lock);
     int lis_spin_trylock(lis_spin_lock_t *lock);
</pre>
   <p>These routines are to be called only from background processing to lock and
unlock a spin lock.  The trylock routine locks the spin lock if it is available,
returning "true", or leaves it unlocked if it is unavailable, returning "false".

   <p>Background processing means any STREAMS driver processing that does not occur at
interrupt time.  These routines lock the lock but do not exclude interrupt
routines from execution.  Thus, your interrupt service routine can still be
called whether or not your driver is holding a spin lock that was locked with
one of these routines.

   <p>You can nest pairs of calls to these routines from the same thread of execution. 
[92]See below for more information on lock nesting.

   <p>Usage example:

<pre class="smallexample">     lis_spin_lock(&amp;mylock);
     ...
     lis_spin_unlock(&amp;mylock);
</pre>
   <pre class="smallexample">     void lis_spin_lock_irq(lis_spin_lock_t *lock);
     void lis_spin_unlock_irq(lis_spin_lock_t *lock);
</pre>
   <p>This pair of routines locks the spin lock with interrupts disabled for the
duration of the holding of the lock.  The routine lis_spin_lock_irq re-enables
interrupts after unlocking the lock.

   <p>You can use this technique to exclude interrupt routine execution.  However, it
is not advisable for interrupt routines themselves, or any routines called from
an interrupt routine, to use this mechanism since the unlock primitive
unconditionally enables interrupts, which may not be desirable from inside an
interrupt routine.

   <p>These routines may be used in nested fashion.  Only the outermost unlock routine
will actually enable interrupts.  [94]See below for more information about lock
nesting.

   <p>Usage example:

<pre class="smallexample">     lis_spin_lock_irq(&amp;mylock);
     ...
     lis_spin_unlock_irq(&amp;mylock);
</pre>
   <pre class="smallexample">     void lis_spin_lock_irqsave(lis_spin_lock_t *lock, int *flags);
     void lis_spin_unlock_irqrestore(lis_spin_lock_t *lock, int *flags);
</pre>
   <p>This pair of routines is similar to the "spin_lock_irq" routines in that the
locking routine disables interrupts.  However, it saves the interrupt state in
the integer argument whose pointer is passed to the locking routine.  The unlock
routine then restores the interrupt state after unlocking the lock.

   <p>These routines are suitable for use by routines that are called both from
interrupt level and from background.  They also have the effect, when used in an
interrupt routine, of excluding multiple execution of an interrupt routine on
multiple CPUs in an SMP system.

   <p>These routines may be used in nested fashion.  Only the outermost unlock routine
will actually restore the interrupt state.  [96]See below for more information
about lock nesting.

   <p>Usage example:

<pre class="smallexample">     lis_spin_lock_t mylock;
     int flags;
     lis_spin_lock_irqsave(&amp;mylock, &amp;flags);
     ...
     lis_spin_unlock_irqrestore(&amp;mylock, &amp;flags);
</pre>
   <p>Note that the unlock routine is passed the address of the flags just as in
calling the lock routine.

<p><a name="Lock-Nesting"></a>

<h4 class="subsection">3.6.29 Lock Nesting</h4>

<p>LiS spin locks can be locked and unlocked in nested fashion.  When doing so, it
is always best to use the same pair of lock and unlock routines at all levels of
nesting for the same lock.  Mixing different types of locking can lead to
unexpected results and non-portable behavior.

   <p>LiS allows a single thread to lock spin locks in nested fashion.  That is, the
second and subsequent calls to the lock routine from a single thread will not
spin on the lock because of finding it in a locked state from the first call. 
Also, every unlock call except the last one, the one that balances the first
locking call, does not unlock the lock.  Only the outermost unlock call causes
the lock to be unlocked.

   <p>If the nesting is via lis_spin_lock_irq, then only the outermost unlock call
enables interrupts.  If the nesting is via lis_spin_lock_irqsave, then only the
outermost unlock call restores the interrupt state.

   <p>When two or more threads attempt to lock a spin lock "simultaneously" only one
thread is allowed to proceed at a time.  The other threads "spin", that is, the
CPUs executing the other threads are executing a loop that tests the lock
repeatedly until it becomes available.  Consequently, it is advisable to use
locks to protect the execution of fairly short pieces of code if there is any
likelihood of contention for the lock.  While one thread is holding the lock,
other CPUs may be idling waiting for it.

   <p>In the context of locking, "simultaneously" means any time from the moment of
the first thread locking the spin lock until that thread unlocks the lock.  If
another thread attempts to lock the spin lock at any point in that interval then
it will "spin."

   <p>When multiple threads use multiple spin locks to protect multiple resources, it
is always a good idea if all threads execute "lock" operations on the multiple
spin locks in the same order.  It is also highly recommended that they execute
"unlock" operations in the exact reverse order as the "lock" operations.  This
avoids so-called "deadly embrace" situations in which process A acquires spin
lock A, process B acquires spin lock B, and then process A waits on B while
process B waits on A.

<p><a name="LiS-Read%2fWrite-Locks"></a>
<a name="LiS-Read_002fWrite-Locks"></a>

<h4 class="subsection">3.6.30 LiS Read/Write Locks</h4>

<p>LiS offers an abstraction of the kernel's read/write locks.  The LiS abstractions
allow STREAMS drivers to use these locks without concern for changes that occur
from one version of the kernel to the next.

   <p>A read/write lock is declared as a special data object of type lis_rw_lock_t. 
There are two types of routines to manipulate these locks.  One set operates on
the lock as a "read" lock.  The other set operates on the lock as a "write" lock.

   <p>There can be multiple threads owning the lock in read mode.  There can only be
one thread that owns the lock in write mode.  Furthermore, in order to acquire
the lock in write mode, all the owners of the read mode lock must give it up.

   <p>The locks are used in the obvious way.  If you only need to read the protected
structure you use the read lock routine.  If you need to change the structure you
use the write lock routine.

   <p>Note that once you have a read lock you must give it up in order to get the same
lock as a write lock.

   <p>The lock manipulation routines also allow for "regular", "irq" and "irqsave"
manipulations of the read/write locks, just as with spin locks.

   <p>You must initialize your lock before using it, just as with spin locks.  And in
parallel to spin locks LiS provides two initialization routines.  One operates
directly on the read/write lock, and the other allocates memory dynamically for
the lock.  You can deallocate the dynamically allocated lock by calling the
"free" routine.

   <p>The following is a listing of the read/write lock routines in LiS.  The
prototypes are in the file &lt;sys/lislocks.h&gt;.

<pre class="smallexample">     void lis_rw_read_lock(lis_rw_lock_t *lock);
     void lis_rw_write_lock(lis_rw_lock_t *lock);
     void lis_rw_read_unlock(lis_rw_lock_t *lock);
     void lis_rw_write_unlock(lis_rw_lock_t *lock);
     
     void lis_rw_read_lock_irq(lis_rw_lock_t *lock);
     void lis_rw_write_lock_irq(lis_rw_lock_t *lock);
     void lis_rw_read_unlock_irq(lis_rw_lock_t *lock);
     void lis_rw_write_unlock_irq(lis_rw_lock_t *lock);
     
     void lis_rw_read_lock_irqsave(lis_rw_lock_t *lock, int *flags);
     void lis_rw_write_lock_irqsave(lis_rw_lock_t *lock, int *flags);
     void lis_rw_read_unlock_irqrestore(lis_rw_lock_t *lock, int *flags);
     void lis_rw_write_unlock_irqrestore(lis_rw_lock_t *lock, int *flags);
     
     void lis_rw_lock_init(lis_rw_lock_t *lock, const char *name);
     lis_rw_lock_t *lis_rw_lock_alloc(const char *name);
     lis_rw_lock_t *lis_rw_lock_free(lis_rw_lock_t *lock, const char *name);
</pre>
   <p><a name="LiS-Interrupt-Enable%2fDisable"></a>
<a name="LiS-Interrupt-Enable_002fDisable"></a>

<h4 class="subsection">3.6.31 LiS Interrupt Enable/Disable</h4>

<p>LiS provides primitives for enabling and disabling interrupts modelled after the
SVR4 SPL mechanism.  There is one routine that is used to disable interrupts and
another one for enabling interrupts.  The routines are as follows:

<pre class="smallexample">     int lis_splstr(void);
     void lis_splx(int x);
</pre>
   <p>The lis_splstr routine is used to disable interrupts.  It returns a value that
must be passed to lis_splx when it it desired to restore the interrupt level to
its previous state.  These two routines are implemented using the primitives
lis_spin_lock_irqsave and lis_spin_unlock_irqrestore.

   <p>These routines can be used from background code ("put" and "service" procedures,
or "open" and "close" routines), or from interrupt level.  LiS itself uses these
routines to protect STREAMS structures from ill-timed modification by interrupt
routines.  Many LiS utility routines, such as putq, getq and qenable, call these
routines within themselves.

   <p>It is safe, and occurs frequently, to use these routines in a nested fashion. 
When using these routines in a nested fashion be sure that the value returned by
the call to lis_splstr at level n is the value passed back to lis_splx at level
n.  The nesting rules for these routines are otherwise the same as for the pair
lis_spin_lock_irqsave and lis_spin_unlock_irqrestore.

   <p>Usage examples:

<pre class="smallexample">     int x, y;
     x = lis_splstr();
     ...
     y = lis_splstr();
     ...
     lis_splx(y);
     ...
     lis_splx(x);
</pre>
   <p>For further information on these routines see the section on [100]debugging spin
locks.

<p><a name="LiS-Semaphores"></a>

<h4 class="subsection">3.6.32 LiS Semaphores</h4>

<p>LiS provides an implementation of semaphores that is built upon the Linux
kernel's semaphores.  The LiS implementation adds features to the kernel
semaphores such as the following:

     <ul>
<li>LiS semaphores are more debuggable.  The LiS semaphore structure contains
fields that save the file name and line number of the semaphore owner.  This
makes it easier to debug drivers which utilize semaphores.

     <li>LiS semaphores retain error information.  When a "down" operation fails,
LiS saves the error number in the semaphore structure for post mortem analysis.

     <li>LiS semaphores are portable.  A STREAMS driver can utilize the same LiS
semaphore mechanism across different versions of the Linux kernel.  This pushes
the kernel differences into LiS and out of the STREAMS driver code.

     <li>LiS semaphores can be easily allocated dynamically so your driver is
completely immune from Linux kernel version considerations.

     <li>LiS semaphores are documented.  You don't have to read the kernel source
code to figure out how to use them. 
</ul>

   <p>For these reasons I highly recommend that STREAMS drivers use the LiS semaphore
implementation in place of the direct kernel semaphores.  The portability aspect
of LiS semaphores cannot be overemphasized.  Different Linux kernel compile-time
options can lead to a proliferation of STREAMS driver code versions, or the
necessity of always compiling the driver from source when it is installed.  LiS
semaphores allow a STREAMS driver to be compiled independently of kernel options
with only the binary needed at driver installation time.

   <p>To declare an LiS semaphore, use a declaration similar to the following:

<pre class="smallexample">     lis_semaphore_t mysem;
</pre>
   <p>LiS semaphores must be initialized before they are used.  Use the following
routine to initialize a declared semaphore.

<pre class="smallexample">     void lis_sem_init(lis_semaphore_t *, int);
</pre>
   <p>If you initialize the semaphore to 0, then the first "down" operation on the
semaphore will wait.  If you initialize it to 1, then the first "down" operation
will not wait.  If you initialize it to n, then the first n "down" operations
will not wait.

   <p>You can also allocate semaphores dynamically using the following routine.

<pre class="smallexample">     lis_semaphore_t *lis_sem_alloc(int);
</pre>
   <p>This routine uses the kernel's memory allocator to allocate space for the
semaphore.  The lis_sem_destroy routine will deallocate it for you.  The
advantage of using this routine is that your STREAMS driver only has to have a
pointer to the semaphore, not a semaphore structure itself.  This adds an extra
level of protection of your driver from kernel version considerations.

   <p>You can use the semaphore value to manage a pool of resources by initializing a
semaphore to the number of items in the resource and having a driver open
routine perform a "down" operation on the semaphore.  This causes the open
operations to be queued until the resource is available.

   <p>LiS semaphores should be explicitly destroyed when they are no longer needed,
typically from your STREAMS driver close routine.  This operation is accomplished
via the following routine.

<pre class="smallexample">     lis_semaphore_t *lis_sem_destroy(lis_semaphore_t *,int);
</pre>
   <p>This routine returns a NULL pointer for the convenience of the caller.

   <p>For further information on semaphores, see the section on [102]debugging
semaphores.

   <p>The following two routines are used to acquire and release a semaphore.

<pre class="smallexample">     int lis_down(lis_semaphore_t *sem);
     void lis_down_nosig(lis_semaphore_t *lsem);
     void lis_up(lis_semaphore_t *sem);
</pre>
   <p>The routine <samp><span class="command">lis_down</span></samp>
<a name="index-lis_005fdown-144"></a>returns 0 for success and a negative error code for failure.  The caller has not
acquired the semaphore unless the routine returns zero.

   <p>One reason for a negative return could be that the calling task was signalled
while waiting for the semaphore to become available.  If this has occurred the
return code will be set to -EINTR.

   <p>The function <samp><span class="command">lis_down_nosig</span></samp>
<a name="index-lis_005fdown_005fnosig-145"></a>waits for the sempahore with signals blocked.  It is useful in driver close
routines that must use a semaphore to control access to the structures that need
to be deallocated.  It is common for the driver close routine to be called from
a process that has been signalled &ndash; for example a process that was killed with
a &lt;Ctrl-C&gt; from the keyboard.  In this case, <samp><span class="command">lis_down</span></samp> will return
immediately with <code>-EINTR</code>, an undesirable situation.  using
<samp><span class="command">lis_down_nosig</span></samp> in this situation blocks signals so that the close
routine can wait on the semaphore even if the process has been signalled.

   <p>Semaphores cannot be used in nested fashion.  Care must be exercised that a
single thread only performs one "down" operation on a given semaphore.

   <p>When multiple threads use multiple semaphores to protect multiple resources, it
is always a good idea if all threads execute "down" operations on the multiple
semaphores in the same order.  It is also highly recommended that they execute
"up" operations in the exact reverse order as the "down" operations.  This avoids
so-called "deadly embrace" situations in which process A acquires semaphore A,
process B acquires semaphore B, and then process A waits on B while process B
waits on A.

   <p>Semaphores should be used only in STREAMS driver "open" and "close" routines. 
STREAMS driver "put" and "service" procedures are not allowed to sleep.  They
should use spin locks instead of semaphores.

   <p>Usage example:

<pre class="smallexample">     if (lis_down(&amp;mysem) == 0) {
             ...
             lis_up(&amp;mysem);
     }
</pre>
   <p><a name="Debugging-Spin-Locks"></a>

<h4 class="subsection">3.6.33 Debugging Spin Locks</h4>

<p>LiS spin lock structures contain fields that assist in the debugging of
spin-lock related problems.  The LiS spin lock structure contains the following
fields.

   <p>Field Description

   <p>spin_lock_mem An opaque memory area that contains the kernel's spin lock
structure.

   <p>name

   <p>Pointer to an ASCII name for the lock.  This allows one to readily identify the
function of the lock (assuming that it is aptly named).

   <p>taskp

   <p>A (void *) which is really a (struct task_struct *) pointer.  It points to the
task that originally acquired the lock, or is NULL if no task has acquired the
lock. 
<a name="index-struct-task_005fstruct-146"></a>
spinner_file, spinner_line

   <p>File and line number of the most recent call to one of the lis_spin_lock
functions.  This tells which line of code most recently tried to get the lock.

   <p>owner_file, owner_line

   <p>File and line number of the call to one of the lis_spin_lock functions that
first acquired the lock.  These fields are set at the same time as the taskp
field.

   <p>unlocker_file, unlocker_line

   <p>File and line number of the call to one of the lis_spin_unlock functions that
performed the final unlock on the lock, thus making it available for another
thread.  These fields are set at the same time as the taskp field is set to NULL.

   <p>If a thread owns the lock then its value of the current task pointer will be in
taskp.  If there is no other thread spinning on the lock, and if the lock has not
been acquired in a nested fashion, then the spinner and owner fields will
indicate the same file and line number.

   <p>If the spinner and owner fields are different and if the taskp is non-NULL then
if the thread that most recently called one of the lis_spin_lock routines is
different from the task that owns the lock, then that other task is spinning on
the lock.  By examination of the lock you can see which task owns the lock and
where in the code it was acquired.  This is often enough information to figure
out why a deadlock is occurring.

   <p>A "deadly embrace" occurs when two threads each need to acquire two spin locks
but they acquire them in the opposite order from each other.  Under circumstances
of contention each process owns the lock that the other is spinning on and will
not release the lock until it acquires the other lock.  Thus, both threads spin
forever.

   <p>Note that the LiS splstr and splx functions are written in terms of LiS spin
locks.  LiS does not use these routines internally.  They are provided to the user
for backwards compatibility.  However, it is important to know that these
routines are spin locks in disguise.  This means that the order of use of these
functions mixed in with explicit spin lock manipulations may also lead to deadly
embraces.

   <p>An effective technique for troubleshooting these kinds of problems is to use the
two-machine kernel debugger, [105]kgdb.  With this setup you can break into the
target machine and look at memory using high level debugging techniques,
including printing out of structures.  Using kgdb you can find out where each CPU
is executing, look at the corresponding source code lines, observe the locks
that are involved, and then print out the lis_spin_lock_t structures for the
specific locks.  Oftentimes the information contained in the two locks will
immediately reveal the nature of the deadly embrace.

   <p>It is also possible to have LiS trace all lock and semaphore operations.  One of
the LiS debug bits enables this function.  To set this debug bit use the
following command.

<pre class="example">     streams -d0x0x80000
</pre>
   <p>This causes LiS to make entries in a global trace buffer named lis_spl_track. 
The global pointer lis_spl_track_ptr indicates the next location in the table
into which an entry is to be placed, which means that it points to the oldest
entry in the buffer.  Entries in the buffer are of type spl_track_t.

   <p>The fields of this structure are as follows. 
Field Description
type
The type of entry as follows.

   <p>Value

   <p>Meaning

   <p>1

   <p>splstr

   <p>2

   <p>splx

   <p>3

   <p>spin lock

   <p>4

   <p>spin unlock

   <p>5

   <p>semaphore down

   <p>6

   <p>semaphore up

   <p>cpu

   <p>The cpu number of the processor which made this entry.  addr The address of the
spin lock or semaphore involved in the operation.

   <p>tskp
The task pointer for the task that made this entry.  state Nesting value for
spin locks, count field of the semaphore.

   <p>file, line

   <p>File and line number of the call to the LiS locking or semaphore routine that
caused this entry to be made.

   <p>The trace buffer contains 4096 of these entries, maintained in a circular
fashion.  By printing out these entries you can see the history of lock
manipulation within LiS.  The command streams -p causes LiS to print out this
table from within the kernel.  The resulting output can be found in
<samp><span class="file">/var/log/messages</span></samp> (typically).  However, in practice the system is usually hung
when you need this information so you end up printing it from within the
debugger. 
<a name="index-g_t_002fvar_002flog_002fmessages-147"></a>
<a name="Lock-Semaphore-and-Queue-Contention"></a>

<h4 class="subsection">3.6.34 Lock Semaphore and Queue Contention</h4>

<p>The <samp><span class="command">streams</span></samp> command can be used to enable the tracking of contetion
for locks, semaphores and STREAMS queues.  Use the command `<samp><span class="samp">streams -D0x08</span></samp>'
to enable the contention tracking.  The command `<samp><span class="samp">streams -L</span></samp>' then causes
the contention tables to be printed out.

   <p>Locks and semaphores are in contention when a thread goes to spin on a lock or
perform a <samp><span class="command">down</span></samp> function on a sempahore, and the thread has to wait
because the lock or semaphore is owned by another thread.  LiS counts such
occurences on a per-lock basis and reports the results with the `<samp><span class="samp">streams -L</span></samp>'
command.

   <p>Queues are in contention when the semaphore that controls access to the queue is
in contention.  However, there are options that affect which semaphore is used
to control access to a queue and these options will also have an effect on the
reporting of queue contention.

<p><a name="Debugging-Semaphores"></a>

<h4 class="subsection">3.6.35 Debugging Semaphores</h4>

<p>LiS semaphore structures contain fields that assist in the debugging of
semaphore related problems.  The LiS semaphore structure contains the following
fields.

   <p>Field Description

   <p>sem_mem
An opaque memory area that contains the kernel's semaphore structure.

   <p>taskp

   <p>A (void *) which is really a (struct task_struct *) pointer.  It points to the
task that most recently acquired the semaphore, or is NULL if no task has
acquired the semaphore.  The taskp is set to NULL just prior to calling the
kernel's up routine on the semaphore.  Thus it stays NULL if no other task is
pending on the semaphore. 
<a name="index-struct-task_005fstruct-148"></a>
downer_file, downer_line
File and line number of the most recent call to the lis_down function.  This
tells which line of code most recently tried to get the semaphore.

   <p>owner_file, owner_line
File and line number of the call to the lis_down function that acquired the
semaphore.  These fields are set at the same time as the taskp field.

   <p>upper_file, upper_line
File and line number of the call to the lis_up function.  These fields are set at
the same time as the taskp field is set to NULL.

   <p>If the taskp field is non-NULL then the semaphore is owned by the task so
indicated.  If it is NULL then the semaphore is unowned.  The upper fields show
where the semaphore was last released.

   <p>If the downer and owner fields both indicate the same file and line number then
that is an indication that the semaphore was acquired at that location in the
program.  If they are different, and if the taskp is non-NULL, that is an
indication that there is a task waiting on the semaphore at the downer location. 
The owner fields show where the semaphore was acquired.

   <p>Bear in mind that semaphore acquisitions do not nest as is the case with spin
locks.  Therefore, if the same thread calls lis_down without calling lis_up on
the same semaphore then the thread will be deadlocked.  The downer and owner
fields will usually offer a clue to this type of deadlock.

   <p>You can also use the LiS [107]lock trace buffer mechanism to assist in debugging
semaphore usage.

<p><a name="STREAMS-Utility-Routines"></a>

<h4 class="subsection">3.6.36 STREAMS Utility Routines</h4>

<p>The following routines are available to LiS STREAMS drivers.  These are standard
AT&amp;T SVR4 utility routines.  They (hopefully) have the same semantics in LiS as
they do in SVR4 STREAMS.

   <p>These routines are presented here in alphabetical order with no description. 
Please refer to the [109]AT&amp;T SVR4 STREAMS documentation for the descriptions of
these routines.

<p><a name="Freezing-Streams"></a>

<h4 class="subsection">3.6.37 Freezing Streams</h4>

<p>There are two sets of routines that can be used to `<samp><span class="samp">freeze</span></samp>' a stream.  They
are used in slightly different ways and have slightly different semantics.  One
set uses the routines
<samp><span class="command">freezestr()</span></samp>
<a name="index-freezestr-149"></a>and <samp><span class="command">unfreezestr()</span></samp>;
<a name="index-unfreezestr-150"></a>the other set uses the routines
<samp><span class="command">qprocesoff()</span></samp>
<a name="index-qprocesoff-151"></a>and <samp><span class="command">qprocson()</span></samp>. 
<a name="index-qprocson-152"></a>

<h5 class="subsubsection">3.6.37.1 Freezestr and Unfreezestr</h5>

<pre class="example">     void freezestr(queue_t *q);
     void unfreezestr(queue_t *q);
</pre>
   <p>These routines operate on the entire stream of which the queue is a member.  The
stream is found by traversing the chain of queues in both directions until
encountering a queue that is not linked to another queue.  As a simple example
it includes all queues from the stream head down through any pushed modules to
the driver queue in which one of those queues is the one passed as the parameter
to either of these routines.

   <p>The process of freezing the stream is to place it into a state such that
messages will not flow up and down the stream.  That is <samp><span class="command">put</span></samp> and
<samp><span class="command">service</span></samp> procedures will not be called.  It <samp><span class="command">putnext()</span></samp>
<a name="index-putnext-153"></a>is called on a queue within a frozen stream the passed message is placed into a
special deferred message list.  Messages are removed from this list and passed
to the <samp><span class="command">put</span></samp> procedure when the stream is later unfrozen.

   <p>Drivers that have frozen a stream should refrain from performing queuing
operations on queues within the stream, such as <samp><span class="command">getq</span></samp> and
<samp><span class="command">putq</span></samp>.  LiS does not enforce this so one must exercise some care when
using these routines.

   <p>SVR4 STREAMS specification says that the driver's close routine will not be
called if the stream is frozen.  LiS does not implement this rule and will close
a frozen stream.

   <p>LiS uses these routines internally at stream close time to stop message flow
when the stream is being dismantled.  It also uses them during <code>I_PUSH</code> and
<code>I_POP</code> processing to inhibit message flow while replumbing the stream.

   <p>Drivers should use these routines with some caution.  Because the stream is
frozen the driver cannot receive any messages from above or below, including
<code>M_IOCTL</code>.  This may make it tricky deciding when to unfreeze a stream.

<h5 class="subsubsection">3.6.37.2 Qprocsoff and Qprocson</h5>

<pre class="example">     void qprocson(queue_t *rdq);
     void qprocsoff(queue_t *rdq);
</pre>
   <p>These routines are conventionally used in a driver open (<samp><span class="command">qprocson</span></samp>) and
close (<samp><span class="command">qprocsoff</span></samp>) routine.  In some STREAMS implementations
<samp><span class="command">qprocson</span></samp> must be called to enable messages to flow into the queue once
open processing has completed.  This is not necessary in LiS.

   <p>In LiS it does no harm to call <samp><span class="command">qprocson</span></samp> in the driver open routine and
<samp><span class="command">qprocsoff</span></samp> in the driver close routine, though it is not necessary to
do so.

   <p>The effect of <samp><span class="command">qprocsoff</span></samp> is similar to that of <samp><span class="command">freezestr</span></samp>
except that it applies just to the single queue rather than to the entire
stream.  Once significant difference is that if a pushable modules is in a
`<samp><span class="samp">qprocsoff</span></samp>' condition and a message flows into the module, STREAMS will
route the message to the next module or driver in the chain of queues, looking
for one that is enabled.  If no such module or driver exists, the messag will be
placed into the deferred message list of the queue at the far end of the chain
of queues.  The messages will be presented to the driver put routine when
<samp><span class="command">qprocon</span></samp> is called.

   <p>It is best to use these routines only at open and close time since that seems to
have been the intent of the STREAMS designers.

<p><a name="Flushing-Queue-Bands"></a>

<h4 class="subsection">3.6.38 Flushing Queue Bands</h4>

<p>A special note on flushing queue bands is in order.  The rules for flushing
queues are a bit complex, so we wish to review them here in some detail.

   <p><a name="index-M_005fDATA-154"></a><a name="index-M_005fPROTO-155"></a><a name="index-M_005fPCPROTO-156"></a><a name="index-M_005fDELAY-157"></a>
First some definitions and some things that affect all queue flushing.  The
term "data message" in the context of queue flushing means messages of type
<code>M_DATA</code>, <code>M_PROTO</code>, <code>M_PCPROTO</code> or <code>M_DELAY</code>.  All other
message types are considered "non-data messages".  You may find it less than
intuitive that <code>M_PCPROTO</code> is considered a "data message".

   <p><a name="index-M_005fDATA-158"></a><a name="index-M_005fPROTO-159"></a><a name="index-M_005fBREAK-160"></a><a name="index-M_005fCTL-161"></a><a name="index-M_005fDELAY-162"></a><a name="index-M_005fIOCTL-163"></a><a name="index-M_005fPASSFP-164"></a><a name="index-M_005fRSE-165"></a><a name="index-M_005fSETOPTS-166"></a><a name="index-M_005fSIG-167"></a><a name="index-M_005fPCPROTO-168"></a>
The term "ordinary message" in the context of queue flushing means messages of
type <code>M_DATA</code>, <code>M_PROTO</code>, <code>M_BREAK</code>, <code>M_CTL</code>,
<code>M_DELAY</code>, <code>M_IOCTL</code>, <code>M_PASSFP</code>, <code>M_RSE</code>,
<code>M_SETOPTS</code> or <code>M_SIG</code>.  Please note that <code>M_PCPROTO</code> is not on
this list.

   <p>The flag argument of FLUSHDATA means that only "data messages" are to be
flushed.  The flag argument of FLUSHALL means that "all" messages are to be
flushed.  As we shall see, in flushing queue bands whether a message gets flushed
or not depends upon what the meaning of the word "all" is.

   <p>First, let's take the case of the routine flushq(q,flag).  If flag is set to
FLUSHDATA then all "data messages" in the entire queue, including all queue
bands, are flushed.  If the flag is set to FLUSHALL then the entire queue is
flushed.

   <p>The case of the routine flushband(q,band,flag) is more complicated.

   <p>If the band argument is zero then special rules apply.  In this case, only
"ordinary" messages are flushed from the queue.  The value of the flag parameter
does not influence the operation.  In Solaris STREAMS this behavior does not
occur.  They flush either "data messages" or "all" messages on band zero. 
Comments in the Solaris 8 source code indicate that the author of the flush code
was somewhat confused on this point.

   <p>If the band argument is non-zero then the specific band of the queue is flushed
in a manner similar to that of flushq.  That is, the flag argument of FLUSHDATA
means just flush "data messages" and the value of FLUSHALL means flush "all"
messages from the specific band.

   <p><a name="index-M_005fPCPROTO-169"></a>One further item needs some attention.  Whenever an <code>M_PCPROTO</code> (or other
"high priority") message is inserted into a STREAMS queue it is queued ahead
of all messages in any queue band.  This means that an <code>M_PCPROTO</code> cannot
be directed to a queue band.  It also means that flushband can never flush an
<code>M_PCPROTO</code>, or any other "high priority" message from the queue.  In
order to flush <code>M_PCPROTO</code>s you must call flushq and flush the entire
queue of either "data messages" or "all" messages.

<p><a name="Utility-Prototypes"></a>

<h4 class="subsection">3.6.39 Utility Prototypes</h4>

<pre class="smallexample">     int adjmsg(mblk_t *mp, int length);
     struct msgb *allocb(int size, unsigned int priority);
     <a name="index-struct-msgb-170"></a>__________________________________________
     
     queue_t *backq(queue_t *q);
     int bcanput(queue_t *q, unsigned char band);
     int bcanputnext(queue_t *q, unsigned char band);
     void bcopy(void *src, void *dst, int nbytes);
     int bufcall(unsigned size, int priority, void (*function) (long), long arg);
     void bzero(void *addr, int nbytes);
     __________________________________________
     
     int canput(queue_t *q);
     int canputnext(queue_t *q);
     void cmn_err(int err_lvl, char *fmt, ...);
     mblk_t *copyb(mblk_t *mp);
     mblk_t *copymsg(mblk_t *mp);
     __________________________________________
     
     #define datamsg(type) -- true if msg-&gt;b_datap-&gt;db_type is data
     mblk_t *dupb(mblk_t *mp);
     mblk_t *dupmsg(mblk_t *mp);
     __________________________________________
     
     void enableok(queue_t *q);
     mblk_t *esballoc(unsigned char *base, int size, int priority, frtn_t *freeinfo);
     int esbbcall(int priority, void (*function) (long), long arg);
     __________________________________________
     
     void flushband(queue_t *q, unsigned char band, int flag);
     void flushq(queue_t *q, int flag);
     void freeb(mblk_t *bp);
     void freemsg(mblk_t *mp);
     void freezestr(queue_t *q);
     void unfreezestr(queue_t *q);
     __________________________________________
     
     int getmajor(dev_t dev);
     int getminor(dev_t dev);
     mblk_t *getq(queue_t *q);
     __________________________________________
     
     int insq(queue_t *q, mblk_t *emp, mblk_t *mp);
     __________________________________________
     
     void *kmem_alloc(int siz, int wait_code);
     void *kmem_zalloc(int siz, int wait_code);
     void kmem_free(void *ptr, int siz);
     __________________________________________
     
     void linkb(mblk_t *mp1, mblk_t *mp2);
     __________________________________________
     
     int msgdsize(mblk_t *mp);
     mblk_t *msgpullup(mblk_t *mp, int length);
     int msgsize(mblk_t *mp);
     __________________________________________
     
     void noenable(queue_t *q);
     __________________________________________
     
     queue_t *OTHERQ(queue_t *q);
     __________________________________________
     
     int pullupmsg(mblk_t *mp, int length);
     int putbq(queue_t *q, mblk_t *mp);
     int putctl(queue_t *q, int type);
     int putctl1(queue_t *q, int type, int param);
     void putnext(queue_t *q, mblk_t *mp);
     int putnextctl(queue_t *q, int type);
     int putnextctl1(queue_t *q, int type, int param);
     int putq(queue_t *q, mblk_t *mp);
     __________________________________________
     
     void qenable(queue_t *q);
     void qreply(queue_t *q, mblk_t *mp);
     int qsize(queue_t *q);
     void qprocsoff(queue_t *rdq);
     void qprocson(queue_t *rdq);
     __________________________________________
     
     queue_t *RD(queue_t *q);
     queue_t *WR(queue_t *q);
     queue_t *OTHERQ(queue_t *q);
     mblk_t *rmvb(mblk_t *mp, mblk_t *bp);
     void rmvq(queue_t *q, mblk_t *mp);
     __________________________________________
     
     int SAMESTR(queue_t *q);
     int strqget(queue_t *q, qfields_t what, unsigned char band, long *val);
     int strqset(queue_t *q, qfields_t what, unsigned char band, long val);
     __________________________________________
     
     int testb(int size, unsigned int priority);
     __________________________________________
     
     #define HZ -- ticks per second
     typedef void timo_fcn_t (caddr_t arg);
     <a name="index-timeo_005ffcn_005ft-171"></a>toid_t timeout(timo_fcn_t *timo_fcn, caddr_t arg, long ticks);
     toid_t lis_untimeout(toid_t id);
     __________________________________________
     
     void unbufcall(int bcid);
     mblk_t *unlinkb(mblk_t *mp);
     int untimeout(int id);
     __________________________________________
     
     queue_t *WR(queue_t *q);
     __________________________________________
     
     int xmsgsize(mblk_t *mp);
</pre>
<p><a name="System-Calls-from-within-the-Kernel"></a>

<h4 class="subsection">3.6.40 System Calls from within the Kernel</h4>

<p>LiS provides STREAMS drivers with a few system calls that can be made from
within the kernel.  These calls are intended to allow STREAMS drivers to manage
their device special files through which the drivers are accessed.  For example,
by using the <dfn>lis_mknod</dfn> function a dynamically loaded driver can register itself
with LiS, obtain a major device number and make its "/dev" entries at module
load time.  Using the lis_unlink function it can remove these "/dev" entries when
the module unloads.

   <p>The semantics of the following routines are exactly the same as the user level
routines of the same names without the "lis_" prefix.  This is so because these
routines are really just wrappers on a kernel system call.  We list the function
prototypes here but leave the detailed documentation to "man pages" and other
documentation.

   <p>The following function prototypes exist in the file &lt;sys/dki.h&gt;.

<pre class="smallexample">     int lis_mknod(char *name, int mode, dev_t dev);
     int lis_unlink(char *name);
     int lis_mount(char *dev_name, char *dir_name, char *fstype,
                   unsigned long rwfla g, void *data);
     int lis_umount(char *file, int flags);
</pre>
   <!--  -->
<!--  -->
<p><a name="Conformance"></a>

<h2 class="chapter">4 Conformance</h2>

<p><a name="index-conformance-172"></a>

<p><a name="STREAMS-Compatibility"></a>

<h3 class="section">4.1 STREAMS Compatibility</h3>

<p><a name="index-compatibility-173"></a>
<cite>Linux STREAMS (LiS)</cite> provides some degree of compatibility with other <dfn>STREAMS</dfn>
implementation as follows:

     <dl>
<dt><cite>&mdash; SVR 4.2 ES/MP</cite><dd><cite>Linux STREAMS (LiS)</cite> provides some degree of operational compatibility with
<cite>SVR 4.2 ES/MP</cite>
to ease portability and common comprehension,
see <a href="LiSSPG.html#SVR-4_002e2-Compatibility">SVR 4.2 Compatibility</a>.

     <br><dt><cite>&mdash; AIX 5L Version 5.1</cite><dd><cite>Linux STREAMS (LiS)</cite> provides some degree of operational compatibility with
<cite>AIX 5L Version 5.1</cite>
to ease portability and common comprehension,
see <a href="LiSSPG.html#AIX-Compatibility">AIX Compatibility</a>.

     <br><dt><cite>&mdash; HP-UX 11.0i v2</cite><dd><cite>Linux STREAMS (LiS)</cite> provides some degree of operational compatibility with
<cite>HP-UX 11.0i v2</cite>
to ease portability and common comprehension,
see <a href="LiSSPG.html#HP_002dUX-Compatibility">HP-UX Compatibility</a>.

     <br><dt><cite>&mdash; OSF/1 1.2/Digital UNIX/True 64</cite><dd><cite>Linux STREAMS (LiS)</cite> provides some degree of operational compatibility with
<cite>OSF/1 1.2/Digital UNIX</cite>
to ease portability and common comprehension,
see <a href="LiSSPG.html#OSF_002f1-Compatibility">OSF/1 Compatibility</a>.

     <br><dt><cite>&mdash; UnixWare 7.1.3 (OpenUnix 8)</cite><dd><cite>Linux STREAMS (LiS)</cite> provides some degree of operational compatibility with
<cite>UnixWare 7.1.3 (OpenUnix 8)</cite>
to ease portability and common comprehension,
see <a href="LiSSPG.html#UnixWare-Compatibility">UnixWare Compatibility</a>.

     <br><dt><cite>&mdash; Solaris 9/SunOS 5.9</cite><dd><cite>Linux STREAMS (LiS)</cite> provides some degree of operational compatibility with
<cite>Solaris 9/SunOS 5.9</cite>
to ease portability and common comprehension,
see <a href="LiSSPG.html#Solaris-Compatibility">Solaris Compatibility</a>.

     <br><dt><cite>&mdash; SUPER-UX</cite><dd><cite>Linux STREAMS (LiS)</cite> provides some degree of operational compatibility with
<cite>SUPER-UX</cite>
to ease portability and common comprehension,
see <a href="LiSSPG.html#SUX-Compatibility">SUX Compatibility</a>.

     <br><dt><cite>&mdash; UXP/V</cite><dd><cite>Linux STREAMS (LiS)</cite> provides some degree of operational compatibility with
<cite>UXP/V</cite>
to ease portability and common comprehension,
see <a href="LiSSPG.html#UXP-Compatibility">UXP Compatibility</a>.

     <br><dt><cite>&mdash; LiS-2.16.18</cite><dd><cite>Linux STREAMS (LiS)</cite> provides some degree of operational compatibility with
<cite>LiS 2.16</cite>
to ease portability and common comprehension,
see <a href="LiSSPG.html#LiS-Compatibility">LiS Compatibility</a>. 
</dl>

   <p>For additional details,
see <a href="LiSSPG.html#Top">About This Manual</a>.

<p><a name="Porting"></a>

<h3 class="section">4.2 Porting</h3>

<p><a name="index-porting-174"></a>
     <dl>
<dt><cite>&mdash; SVR 4.2 ES/MP</cite><dd><cite>Linux STREAMS (LiS)</cite> provides compatibility functions for source level compatibility with
<cite>SVR 4.2 ES/MP</cite>
and to ease porting of modules and drivers to <cite>Linux STREAMS (LiS)</cite>. 
Portability considerations are mantained in a separate manual:
see <a href="porting.html#Porting-from-SVR-4_002e2-MP">Porting from SVR 4.2 MP</a>.

     <br><dt><cite>&mdash; AIX 5L Version 5.1</cite><dd><cite>Linux STREAMS (LiS)</cite> provides compatibility functions for source level compatibility with
<cite>AIX 5L Version 5.1</cite>
and to ease porting of modules and drivers to <cite>Linux STREAMS (LiS)</cite>. 
Portability considerations are mantained in a separate manual:
see <a href="porting.html#Porting-from-AIX-5L-Version-5_002e1">Porting from AIX 5L Version 5.1</a>.

     <br><dt><cite>&mdash; HP-UX 11.0i v2</cite><dd><cite>Linux STREAMS (LiS)</cite> provides compatibility functions for source level compatibility with
<cite>HP-UX 11.0i v2</cite>
and to ease porting of modules and drivers to <cite>Linux STREAMS (LiS)</cite>. 
Portability considerations are mantained in a separate manual:
see <a href="porting.html#Porting-from-HP_002dUX-11_002e0i-v2">Porting from HP-UX 11.0i v2</a>.

     <br><dt><cite>&mdash; OSF/1 1.2/Digital UNIX/True 64</cite><dd><cite>Linux STREAMS (LiS)</cite> provides compatibility functions for source level compatibility with
<cite>OSF/1 1.2/Digital UNIX/True 64</cite>
and to ease porting of modules and drivers to <cite>Linux STREAMS (LiS)</cite>. 
Portability considerations are mantained in a separate manual:
see <a href="porting.html#Porting-from-OSF_002f1-1_002e2_002fDigital-UNIX">Porting from OSF/1 1.2/Digital UNIX</a>.

     <br><dt><cite>&mdash; UnixWare 7.1.3 (OpenUnix 8)</cite><dd><cite>Linux STREAMS (LiS)</cite> provides compatibility functions for source level compatibility with
<cite>UnixWare 7.1.3 (OpenUnix 8)</cite>
and to ease porting of modules and drivers to <cite>Linux STREAMS (LiS)</cite>. 
Portability considerations are mantained in a separate manual:
see <a href="porting.html#Porting-from-UnixWare-7_002e1_002e3-_0028OpenUnix-8_0029">Porting from UnixWare 7.1.3 (OpenUnix 8)</a>.

     <br><dt><cite>&mdash; Solaris 9/SunOS 5.9</cite><dd><cite>Linux STREAMS (LiS)</cite> provides compatibility functions for source level compatibility with
<cite>Solaris 9/SunOS 5.9</cite>
and to ease porting of modules and drivers to <cite>Linux STREAMS (LiS)</cite>. 
Portability considerations are mantained in a separate manual:
see <a href="porting.html#Porting-from-Solaris-9_002fSunOS-5_002e9">Porting from Solaris 9/SunOS 5.9</a>.

     <br><dt><cite>&mdash; SUPER-UX</cite><dd><cite>Linux STREAMS (LiS)</cite> provides compatibility functions for source level compatibility with
<cite>SUPER-UX</cite>
and to ease porting of modules and drivers to <cite>Linux STREAMS (LiS)</cite>. 
Portability considerations are mantained in a separate manual:
see <a href="porting.html#Porting-from-SUPER_002dUX">Porting from SUPER-UX</a>.

     <br><dt><cite>&mdash; UXP/V</cite><dd><cite>Linux STREAMS (LiS)</cite> provides compatibility functions for source level compatibility with
<cite>UXP/V</cite>
and to ease porting of modules and drivers to <cite>Linux STREAMS (LiS)</cite>. 
Portability considerations are mantained in a separate manual:
see <a href="porting.html#Porting-from-UXP_002fV">Porting from UXP/V</a>.

     <br><dt><cite>&mdash; LiS-2.16.18</cite><dd><cite>Linux STREAMS (LiS)</cite> provides compatibility functions for source level compatibility with
<cite>LiS-2.16.18</cite>
and to ease porting of modules and drivers to <cite>Linux STREAMS (LiS)</cite>. 
Portability considerations are mantained in a separate manual:
see <a href="porting.html#Porting-from-Linux-STREAMS-_0028LiS_0029-2_002e16_002e18">Porting from Linux STREAMS (LiS) 2.16.18</a>. 
</dl>

   <p>For additional details,
see <a href="proting.html#Top">About This Manual</a>.

<!--  -->
<!--  -->
<p><a name="Releases"></a>

<h2 class="chapter">5 Releases</h2>

<p><a name="index-releases-175"></a>

<!-- *- texinfo -*- vim: ft=texinfo -->
<!-- ========================================================================= -->
<!-- @(#) releases.texi,v 1.1.4.21 2006/07/03 02:59:01 brian Exp -->
<!-- ========================================================================= -->
<!-- Copyright (c) 2001-2006  OpenSS7 Corporation <http://www.openss7.com/> -->
<!-- Copyright (c) 1997-2000  Brian F. G. Bidulock <bidulock@openss7.org> -->
<!-- All Rights Reserved. -->
<!-- Permission is granted to make and distribute verbatim copies of this -->
<!-- manual provided the copyright notice and this permission notice are -->
<!-- preserved on all copies. -->
<!-- Permission is granted to copy and distribute modified versions of this -->
<!-- manual under the conditions for verbatim copying, provided that the -->
<!-- entire resulting derived work is distributed under the terms of a -->
<!-- permission notice identical to this one. -->
<!-- Since the Linux kernel and libraries are constantly changing, this -->
<!-- manual page may be incorrect or out-of-date.  The author(s) assume no -->
<!-- responsibility for errors or omissions, or for damages resulting from -->
<!-- the use of the information contained herein.  The author(s) may not -->
<!-- have taken the same level of care in the production of this manual, -->
<!-- which is licensed free of charge, as they might when working -->
<!-- professionally. -->
<!-- Formatted or processed versions of this manual, if unaccompanied by -->
<!-- the source, must acknowledge the copyright and authors of this work. -->
<!--  -->
<!-- U.S. GOVERNMENT RESTRICTED RIGHTS.  If you are licensing this Software -->
<!-- on behalf of the U.S. Government ("Government"), the following -->
<!-- provisions apply to you.  If the Software is supplied by the Department -->
<!-- of Defense ("DoD"), it is classified as "Commercial Computer Software" -->
<!-- under paragraph 252.227-7014 of the DoD Supplement to the Federal -->
<!-- Acquisition Regulations ("DFARS") (or any successor regulations) and the -->
<!-- Government is acquiring only the license rights granted herein (the -->
<!-- license rights customarily provided to non-Government users).  If the -->
<!-- Software is supplied to any unit or agency of the Government other than -->
<!-- DoD, it is classified as "Restricted Computer Software" and the -->
<!-- Government's rights in the Software are defined in paragraph 52.227-19 -->
<!-- of the Federal Acquisition Regulations ("FAR") (or any successor -->
<!-- regulations) or, in the cases of NASA, in paragraph 18.52.227-86 of the -->
<!-- NASA Supplement to the FAR (or any successor regulations). -->
<!-- ========================================================================= -->
<!-- Commercial licensing and support of this software is available from -->
<!-- OpenSS7 Corporation at a fee.  See http://www.openss7.com/ -->
<!-- ========================================================================= -->
<!-- Last Modified 2006/07/03 02:59:01 by brian -->
<!-- ========================================================================= -->
<!--  -->
<p>This is the OpenSS7 Release of the Linux STREAMS (LiS) core, tools, drivers and modules that
implement the <dfn>Linux STREAMS (LiS)</dfn> SVR 4 STREAMS utility for Linux.

   <p>The following sections provide information on Linux STREAMS (LiS) releases as well as
compatibility information of OpenSS7 release to the original GCOM releases of these modules and
drivers, as well as Linux kernel compatibility.

<!--  -->
<!--  -->
<p><a name="Prerequisites"></a>

<h3 class="section">5.1 Prerequisites</h3>

<p><a name="index-prerequisites-176"></a>
Prerequisites for the Linux STREAMS (LiS) package are as follows:

     <ul>
<li>A fairly LSB compliant GNU/Linux distribution. 
<a rel="footnote" href="#fn-2" name="fnd-2"><sup>2</sup></a>
<li>Linux 2.4 or 2.6 kernel (2.4.10 - 2.4.27) or (2.6.3 - 2.6.17)
<li>glibc2 or better. 
<li>GNU info (for info files). 
<li>GNU groff (for man pages). 
<a rel="footnote" href="#fn-3" name="fnd-3"><sup>3</sup></a>
</ul>

   <p>If you need to rebuild the package from sources with modifications, you will need a larger GNU
toolchain as described in See <a href="#Downloading-from-CVS">Downloading from CVS</a>.

<!--  -->
<!--  -->
<p><a name="Compatibility"></a>

<h3 class="section">5.2 Compatibility</h3>

<p><a name="index-compatibility-177"></a>
This section discusses compatibility with major prerequisites.

<!--  -->
<p><a name="GNU%2fLinux-Distributions"></a>
<a name="GNU_002fLinux-Distributions"></a>

<h4 class="subsection">5.2.1 GNU/Linux Distributions</h4>

<p><a name="index-GNU_002fLinux-Distributions-178"></a>
<dfn>Linux STREAMS (LiS)</dfn> is compatible with the following <dfn>Linux</dfn>
distributions:<a rel="footnote" href="#fn-4" name="fnd-4"><sup>4</sup></a>

     <ul>
<li>CentOS Enterprise Linux 3.4 (centos34)
<li>CentOS Enterprise Linux 4.0 (centos4)
<li>Debian 3.0r2 Woody (deb3.0) &ndash; TBD
<li>Debian 3.1r0a Sarge (deb3.1)
<li>Fedora Core 1 (FC1) &ndash; TBD
<li>Fedora Core 2 (FC2) &ndash; TBD
<li>Fedora Core 3 (FC3) &ndash; TBD
<li>Fedora Core 4 (FC4)
<li>Fedora Core 5 (FC5)
<li>Gentoo 2006.1 (untested)
<li>Lineox 4.026 (LEL4) &ndash; TBD
<li>Lineox 4.053 (LEL4)
<li>Mandrakelinux 10.0 (MDK100) &ndash; TBD
<li>Mandrakelinux 10.1 (MDK101) &ndash; TBD
<li>Mandrakelinux 9.2 (MDK92) &ndash; TBD
<li>Mandriva Linux LE2005 (MDK102) &ndash; TBD
<li>Mandriva Linux LE2006 (MDK103)
<li>Mandriva One (untested)
<li>Performance Technlogies <dfn>NexusWare24</dfn> &ndash; TBD
<li>Performance Technologies NexusWare 8.0
<li>RedHat Linux 7.2 (RH7)
<li>RedHat Linux 7.3 (RH7)
<li>RedHat Linux 8.0 (RH8) &ndash; TBD
<li>RedHat Linux 9 (RH9) &ndash; TBD
<li>RedHat Enterprise Linux 3.0 (EL3)
<li>RedHat Enterprise Linux 4 (EL4)
<li>SuSE 8.0 Professional (SuSE8.0) &ndash; TBD
<li>SuSE 9.1 Personal (SuSE9.1) &ndash; TBD
<li>SuSE 9.2 Professional (SuSE9.2) &ndash; TBD
<li>SuSE OpenSuSE (SuSEOSS)
<li>SuSE 10.0 (SuSE10.0)
<li>SuSE 10.1 (SuSE10.1) (untested)
<li>Ubuntu 5.10 (ubu5.10)
<li>Ubuntu 6.06 LTS (ubu6.06)
<li>WhiteBox Enterprise Linux 3.0 (WBEL3)
<li>WhiteBox Enterprise Linux 4 (WBEL4)
</ul>

   <p>When installing from the tarball (see <a href="#Installing-the-Tar-Ball">Installing the Tar Ball</a>), this distribution is probably
compatible with a  much broader array of distributions than those listed above.  These are the
distributions against which the current maintainer creates and tests builds.

<p><a name="Linux-Kernel"></a>

<h4 class="subsection">5.2.2 Kernel</h4>

<p><a name="index-Kernel-179"></a>
The <cite>Linux STREAMS (LiS)</cite> package compiles as a <dfn>Linux</dfn> kernel module.  It is not
necessary to patch the <dfn>Linux</dfn> kernel to build or use the package.<a rel="footnote" href="#fn-5" name="fnd-5"><sup>5</sup></a> Nor do you have to
recompile your kernel to build or use the package.  OpenSS7 packages use <samp><span class="command">autoconf</span></samp> scripts
to adapt the package source to your existing kernel.  The package builds and runs nicely against
production kernels from the distributions listed above.  Rather than relying on kernel versions, the
<samp><span class="command">autoconf</span></samp> scripts interrogate the kernel for specific features and variants to better adapt
to distribution production kernels that have had patches applied over the official
<a href="http://www.kernel.org/">kernel.org</a> sources.

   <p>The <cite>Linux STREAMS (LiS)</cite> package is compatible with 2.4 kernel series after 2.4.10 and has
been tested up to and including 2.4.27.  It has been tested from 2.6.3 up to and including 2.6.17. 
Please note that your mileage may vary if you use a kernel more recent than 2.6.17: it is difficult
to anticipate changes that kernel developers will make in the future.  Many kernels in the 2.6
series now vary widely ny release version and if you encounter problems, try a kernel within the
supported series.

   <p>UP validation testing for kernels is performed on all supported architectures.  SMP validation
testing is performed on UP machines, as well as on an Intel 3.0GHz Pentium IV 630 with
HyperThreading enabled.  Because HyperThreading is not as independent as multiple CPUs, SMP
validation testing is limited.

<p><a name="Linux-Architectures"></a>

<h4 class="subsection">5.2.3 Architectures</h4>

<p><a name="index-Architectures-180"></a>
The <cite>Linux STREAMS (LiS)</cite> package compiles and installs on a wide range of architectures. 
Although it is believed that the package will work on all architectures supported by the Linux
kernel being used, validation testing has only been performed with the following architectures:

     <ul>
<li>ix86
<li>x86_64
<li>ppc (MPC 860)
<li>ppc64
</ul>

   <p>32-bit compatibility validation testing is performed on all 64-bit architectures supporting 32-bit
compatibility.  If you would like to validate an OpenSS7 package on a specific machine architecture,
you are welcome to sponsor the project with a test machine.

<p><a name="Kernel-Version-2.3.x"></a>
<a name="Kernel-Version-2_002e3_002ex"></a>

<h5 class="subsubsection">5.2.3.1 Kernel Version 2.3.x</h5>

<p>For LiS version 2.7 and later and for kernel version 2.3.x there are some significant compatibility
issues.  Version 2.3 of the Linux kernel brings with it some compatibility issues that need to be
addressed by the LiS user.  The two most important ones concern the file <samp><span class="file">&lt;sys/stropts.h&gt;</span></samp> and
the major device numbers used by LiS.  <a name="index-stropts_002eh-181"></a>

<h5 class="subsubheading"><samp><span class="file">stropts.h</span></samp> Compatibility</h5>

<p>There are no more compatibility problems with <samp><span class="file">&lt;sys/stropts.h&gt;</span></samp> with glibc-2.1 and LiS-2.10. 
The following is more for historical purposes than practical necessity.

   <p>Beginning at least with egcs-2.91.66 (egcs-1.1.2 release), which comes with Red Hat 6.0, there is a
file in the standard include directory named <samp><span class="file">&lt;sys/stropts.h&gt;</span></samp>.  This file has constant
definitions that are incompatible with those used in <samp><span class="file">LiS/include/sys/stropts.h</span></samp>.  If you
compile an application against the glibc version of <samp><span class="file">stropts.h</span></samp>, and compile LiS using its own
version then certain ioctls may not work correctly.  You should be aware of this problem and be sure
to include "-I/usr/src/LiS/include" in the compiler options that you use in compiling your STREAMS
based applications.

   <p>In this version of LiS, some of the constants in <samp><span class="file">stropts.h</span></samp> have been changed to conform to
the values used by UnixWare and Solaris.  These are different values than previously used in LiS. 
When you install LiS the installation procedure will ask you whether you want LiS compiled with the
backward-compatible LiS constants, or the UnixWare/Solaris compatible constants.  Logically
speaking, it does not matter which set you use as long as LiS and your application code are both
compiled with the same values.

   <p>I highly recommend that you use the UnixWare/Solaris compatible version, however.  A future release
of egcs, utilizing glibc 2.2, will contain an updated version of its <samp><span class="file">stropts.h</span></samp> which has
constants that are compatible with UnixWare, Solaris and LiS.  So by selecting the UnixWare/Solaris
compatible version at this time you can ensure that your applications will be fully compatible with
these values in the future.

   <p>With any luck, these constants will never have to change again.

<h5 class="subsubheading">Major Device Number Compatibility</h5>

<p>The second major compatibility issue concerns the major device numbers that LiS assigns to STREAMS
devices.  In the past LiS based these device numbers at 50, since the Linux kernel did not
pre-define many major device numbers.  As of kernel version 2.3.x there are major device numbers
defined up to 220 and beyone! So starting with LiS-2.12, we have used the major number of 240 as the
base for STREAMS device files.  This range is supposed to be reserved for "experimental drivers"
which should make it safe to use.

   <p>What this means is that you must be sure to run the strmakenodes program before running any STREAMS
applications after installing LiS-2.12.  This need not concern you overly, since doing a "make
install" in the <samp><span class="file">/usr/src/LiS</span></samp> directory causes strmakenodes to be run anyway.  This is more a
concern if you are compiling LiS on one machine and then loading it onto another for execution.  In
such cases you may need to load the new strmakenodes program and run it. 
<a name="index-g_t_002fusr_002fsrc_002fLiS-182"></a>
I am hoping that the kernel developers will expand the major and minor device number spaces for 2.6. 
If they do that then LiS should be able to get a block of majors allocated to it.

<p><a name="Kernel-Version-2.2.x"></a>
<a name="Kernel-Version-2_002e2_002ex"></a>

<h5 class="subsubsection">5.2.3.2 Kernel Version 2.2.x</h5>

<p>For LiS version 2.5 and later and for kernel version 2.2.x there are no compatibility issues; there
are no kernel patches whatsoever required to install LiS.  You will need LiS-2.4 at minimum to run
in a 2.2.x kernel.

<p><a name="Kernel-Version-2.0.36"></a>
<a name="Kernel-Version-2_002e0_002e36"></a>

<h5 class="subsubsection">5.2.3.3 Kernel Version 2.0.36</h5>

<p>The latest version of LiS has not been tested on 2.0 kernels.  Therefore, do not be surprised if it
does not install or execute correctly in these kernels.  If you are using an old kernel, you must
also use an older version of LiS, perhaps LiS-2.5.

   <p>For LiS version 2.5 and later and for kernel version 2.0.36 there are no kernel patches required to
run LiS as a "bottom half" process.  A one-line patch is required to run LiS as a kernel daemon
process.  The installation default is to run as a bottom half process in 2.0.36.  LiS-1.25 or later
should install properly with 2.0.36.  The more recent the version of LiS, the less kernel patching
is required.

<p><a name="Linux-STREAMS"></a>

<h4 class="subsection">5.2.4 Linux STREAMS</h4>

<p><a name="index-Linux-STREAMS-183"></a>
<dfn>Linux Fast-STREAMS</dfn> provides a suitable replacement for the (now deprecated)
<dfn>Linux STREAMS (LiS) 2.18.0</dfn> package formerly maintained by Dave Goethe of
<a href="http://www.gcom.com/">GCOM</a>.

<p><a name="LiS-2.18-Kernel-and-Driver-Compatibility"></a>
<a name="LiS_002d2_002e18-Kernel-and-Driver-Compatibility"></a>

<h5 class="subsubsection">5.2.4.1 LiS-2.18 Kernel and Driver Compatibility</h5>

<p>There are several issues that needed to be addressed for compatibility with the 2.6 Linux kernel. 
You are encouraged to follow the links in the paragraphs below to see more detailed information on
each of these topics.

     <ol type=1 start=1>
<li>The 2.6 kernel redefined the size of the dev_t structure.  LiS has extended its internal dev_t
structure to be compatible with the 2.6 method for some time. 
<li>The 2.6 kernel changed the approach to building and installing kernel modules.  This affects LiS as
a whole and also affects how you install separate loadable STREAMS drivers.  LiS provides a
mechanism that allows STREAMS drivers and moduels to be easily installed. 
<li>The 2.6 kernel offers an option to compile the kernel using machine registers to pass parameters to
functions.  LiS takes this into account. 
<li>The 2.6 kernel needs GCC version 3.3.3 (sic) to be compiled properly.  LiS needs to be compiled
using the same version of the compiler when running with the 2.6 kernel. 
<li>You may have to edit the file /etc/rc.d/rc.sysinit to get demand loadable modules to work correctly. 
This is especially true when hosting a 2.6 kernel on a 2.4 distribution.
        </ol>

<p><a name="LiS-2.16-Kernel-and-Driver-Compatibility"></a>
<a name="LiS_002d2_002e16-Kernel-and-Driver-Compatibility"></a>

<h5 class="subsubsection">5.2.4.2 LiS-2.16 Kernel and Driver Compatibility</h5>

<p>LiS-2.16 is a small change from LiS-2.15.  The change is that it no longer uses Linux system calls
to implement getpmsg and putpmsg.  Instead it overloads the read and write file system functions
with particular values for the count parameter, values that are otherwise invalid.<a rel="footnote" href="#fn-6" name="fnd-6"><sup>6</sup></a>

<p><a name="LiS-2.15-Kernel-and-Driver-Compatibility"></a>
<a name="LiS_002d2_002e15-Kernel-and-Driver-Compatibility"></a>

<h5 class="subsubsection">5.2.4.3 LiS-2.15 Kernel and Driver Compatibility</h5>

<p>LiS-2.15 continues to insulate STREAMS drivers from the Linux kernel.  It works with 2.2, 2.4, and
2.5 versions of the kernel.  Support for 2.0 kernels has been dropped.

   <p>Driver writers will need to recompile their drivers against LiS-2.15 include files.  You will see
the following major changes.

     <ul>
<li>LiS spin locks and semaphores have been rearranged so that the kernel memory is at the end of the
structure instead of the beginning. 
<li>The former change allows for there to be dynamic allocation routines for spin locks and semaphores. 
(see <a href="#LiS-Spin-Locks">LiS Spin Locks</a>)
<li>LiS now provides an abstraction for read/write locks, with dynamic allocation.  (see <a href="#LiS-Read_002fWrite-Locks">LiS Read/Write Locks</a>)
<li>Those experimenting with 2.5 kernels will notice that the "sleep while holding spin lock" problems
have been fixed. 
<li>Porting to 2.5 has necessitated some changes to the major/minor device structure handling. 
(see <a href="#Major_002fMinor-Device-Numbering">Major/Minor Device Numbering</a>)
<li>The fattach related functions are functional on kernels version 2.4.7 and later. 
<li>STREAMS pipes and FIFOs are now functional. 
<li>OS interface code has been added for the kernel's DMA mapping functions. 
</ul>

   <p>There is one known bug in LiS-2.15 relative to 2.5 kernels.  It has to do with a memory leak
involving timer structures, and may prove to be a kernel bug rather than an LiS bug.  Since the 2.5
kernel is not suitable for general use I am saving the investigation of this bug for later.

<p><a name="LiS-2.14-Kernel-and-Driver-Compatibility"></a>
<a name="LiS_002d2_002e14-Kernel-and-Driver-Compatibility"></a>

<h5 class="subsubsection">5.2.4.4 LiS-2.14 Kernel and Driver Compatibility</h5>

<p>LiS-2.13 was a series of beta releases.  LiS-2.14 represents the culmination of this series.  There
should be enough distribution and kernel compatibility that LiS-2.14 will hold up for some time.

   <p>The known fattach and FIFO bugs have still not been fixed.  The author of those subsystems has not
found the time to put in the fixes, nor have I.

<p><a name="LiS-2.13-Kernel-and-Driver-Compatibility"></a>
<a name="LiS_002d2_002e13-Kernel-and-Driver-Compatibility"></a>

<h5 class="subsubsection">5.2.4.5 LiS-2.13 Kernel and Driver Compatibility</h5>

<p>This version of LiS has been tested with 2.4 kernels up to 2.4.16.  LiS does not yet support the
fattach/fdetach functions on kernel versions 2.4.7 and beyond.  There are also known bugs in the LiS
pipe/FIFO code.  All of these problems are scheduled to be fixed in early 2002.

   <p>LiS-2.13 adds the ability for drivers to make their own "/dev" nodes via the <dfn>lis_mknod</dfn>
function (see <a href="#System-Calls-from-within-the-Kernel">System Calls from within the Kernel</a>).  Also provided is an <dfn>lis_unlink</dfn>
function that allows drivers to remove their device files.

   <p>There is almost no new functionality added by LiS-2.13.  The differences between LiS-2.13 and
LiS-2.12 are almost entirely kernel compatibility issues and bug fixes.

<p><a name="LiS-2.12-Kernel-and-Driver-Compatibility"></a>
<a name="LiS_002d2_002e12-Kernel-and-Driver-Compatibility"></a>

<h5 class="subsubsection">5.2.4.6 LiS-2.12 Kernel and Driver Compatibility</h5>

<p>This version of LiS is compatible with all 2.2.x versions of the kernel and with early versions of
the 2.4.x kernel, at least up to 2.4.2 and perhaps later versions as well.

   <p>If you have drivers that have worked with LiS-2.10 or LiS-2.11 (or earlier) please recompile them
using the header files from LiS-2.12.  This may be the last recompile in quite some time that you
will need for your driver code.

   <p>LiS-2.12 contains a sufficient Driver/Kernel Interface (DKI), (see <a href="#Development">Development</a>), that it is
straightforward to write a STREAMS driver that can be compiled against LiS-2.12 and the resulting
object modules used either on a 2.2 or 2.4 kernel, with only LiS needing recompilation on the target
machine.

   <p>When run on 2.4 kernels, LiS makes full use of multiple CPUs (see <a href="#LiS-SMP-Implementation">LiS SMP Implementation</a>).  It
forks a queue runner task for each CPU and locks each task onto its CPU.  Queue runner tasks are
awakened to assist with service procedure processing as the number of scheduled queues increases.

   <p>Because of this aggressive use of processors, you may find that your drivers do not function
properly when run with LiS-2.12 in a multi-CPU SMP environment.  You should expect that drivers that
worked in single-CPU environments will continue to work as before.

   <p>Making your drivers MP safe involves the use of spin locks.  The DKI documentation contains advice
on the use of these locks.  See <a href="#LiS-Spin-Locks">LiS Spin Locks</a>.

   <p>This version of LiS also contains a rewrite of the flushing code and tests added to strtst for
flushing.  In particular the details of the rules for flushing queue bands are now adhered to. 
See <a href="#Flushing-Queue-Bands">Flushing Queue Bands</a>.  Be advised, however, that Solaris STREAMS does not adhere strictly to
these rules so there may be some subtle differences in behavior between LiS and Solaris when
flushing queue bands.

   <p>Speaking of queue bands, the queue band handling code has been debugged a bit more and a test added
to strtst to illustrate its correct behavior.

<p><a name="LiS-2.10-Kernel-and-Driver-Compatibility"></a>
<a name="LiS_002d2_002e10-Kernel-and-Driver-Compatibility"></a>

<h5 class="subsubsection">5.2.4.7 LiS-2.10 Kernel and Driver Compatibility</h5>

<p>This version of LiS is compatible with all 2.2.x versions of the Linux kernel.  It may work with
2.4.x kernels, but you should probably wait for LiS-2.11 for that.

   <p>If you have drivers that worked with LiS-2.8 or earlier, you must recompile your drivers in the
context of the LiS-2.10 header files.  The queue_t structure has changed in size since LiS-2.8 which
means that the old RD and WR macros will not compute the correct addresses.

   <p>LiS-2.10 contains features that are intended to greately reduce the necessity of recompiling STREAMS
driver code in future versions of LiS or future versions of the kernel.  The goal is to be able to
compile STREAMS drivers against LiS-2.10 header files and use the resulting object code on both
2.2.x kernels and 2.4.x kernels.

   <p>For more details about the interface between STREAMS drivers and the kernel, see the Driver/Kernel
Interface documentation, (see <a href="#Development">Development</a>).

<p><a name="Linux-Fast-STREAMS"></a>
<a name="Linux-Fast_002dSTREAMS"></a>

<h4 class="subsection">5.2.5 Linux Fast-STREAMS</h4>

<p><a name="index-Linux-Fast_002dSTREAMS-184"></a>
The <cite>Linux STREAMS (LiS)</cite> package is no longer receiving active development or support.  The
<cite>Linux STREAMS (LiS)</cite> package is so fraught with bugs that it is unusable as far as The
OpenSS7 Project is concerned.  <cite>Linux Fast-STREAMS</cite> is the preferred replacement for
<cite>Linux STREAMS (LiS)</cite>.

<!--  -->
<!--  -->
<p><a name="Release-Notes"></a>

<h3 class="section">5.3 Release Notes</h3>

<p><a name="index-release-notes-185"></a>
The sections that follow provide information on OpenSS7 releases of the <br>
Linux STREAMS (LiS) package.

<!--  -->
<p><a name="Release-LiS-2.18.4.rc2"></a>
<a name="Release-LiS_002d2_002e18_002e4_002erc2"></a>

<h4 class="subsection">5.3.1 Release LiS-2.18.4.rc2</h4>

<p><a name="index-release-_0040value_007bPACKAGE_007d_002d_0040value_007bVERSION_007d-186"></a>
Added `<samp><span class="samp">--enable-devel</span></samp>' <samp><span class="command">configure</span></samp> option for embedded targets. 
Added <samp><span class="command">send-pr</span></samp> script for automatic problem report generation.

<p><a name="Release-LiS-2.18.2"></a>
<a name="Release-LiS_002d2_002e18_002e2"></a>

<h4 class="subsection">5.3.2 Release LiS-2.18.2</h4>

<p><a name="index-release-LiS_002d2_002e18_002e2-187"></a>
Corrections for and testing of 64-bit clean compile and test runs on x86_64 architecture.  Some bug
corrections resulting from gcc 4.0.2 compiler warnings.

   <p>Corrected build flags for Gentoo and 2.6.15 kernels as reported on mailing list.  Builds on FC4
2.6.15 kernel and with gcc 4.0.2.

   <p>Added in many of Paul's 64-bit corrections.

   <p>The <cite>Linux STREAMS (LiS) 2.18.3</cite> is still largely unusable on 64-bit or SMP kernels. 
<b>Linux STREAMS (LiS) package is deprecated.  Do not use it.  The package contains many
unresovled bugs. Use </b><cite>Linux Fast-STREAMS</cite><b> instead.</b>

<p><a name="Release-LiS-2.18.2"></a>
<a name="Release-LiS_002d2_002e18_002e2"></a>

<h4 class="subsection">5.3.3 Release LiS-2.18.2</h4>

<p><a name="index-release-LiS_002d2_002e18_002e2-188"></a>
Cross-build support for newer <cite>NexusWare</cite> releases.  Build support for (recent FC4) 2.6.14
kernel.  Corrected installation support (init scripts) for SuSE 9.2.

   <p>Binary compatibility backwards compatible to GCOM 2.18.0 included.  This includes exported symbols
changed to not generate versioned symbols on 2.4 kernels.  Also, exported symbols are always
compiled <code>attribute((regparm(0)))</code> on regparm capable architectures, regardless of the kernel
version or compile options.<a rel="footnote" href="#fn-7" name="fnd-7"><sup>7</sup></a>
For actual binary compatibilty packaging, see the <samp><span class="file">strcompat</span></samp> package.

   <p>A major change for 2.18.2 is the port-back of POSIX/SUSv3 XSR/XSI conformance test suites and
performance programs from Linux Fast-STREAMS.  The purpose of porting back theses tests suites and
supporting modules and drivers is to provide the ability to do comparison tests between LiS and
Linux Fast-STREAMS.

   <p>Another change is a module unloading safe vstrlog hook register and unregister functions
register_strlog() and unregister_strlog().

   <p>Some bug corrections and fixes for glaring SMP errors reported by Kutluck.

   <p>This might be the last OpenSS7 release of <dfn>Linux STREAMS (LiS)</dfn>.  You should seriously
consider using the Linux Fast-STREAMS package (streams-0.7a.4 or later) instead.  If you need
comptibility to LiS (or other STREAMS implementation), investigate the strcompat package, which
provides some binary compatibility to LiS under Linux Fast STREAMS.

<p><a name="Release-LiS-2.18.1"></a>
<a name="Release-LiS_002d2_002e18_002e1"></a>

<h4 class="subsection">5.3.4 Release LiS-2.18.1</h4>

<p><a name="index-release-LiS_002d2_002e18_002e1-189"></a>
Initial autoconf/RPM packaging of the <samp><span class="command">LiS</span></samp> release.

   <p>This is a port forward of most of the build and patches from 2.16.19 forward and applied over
2.18.0.  This is our first LiS-2.18 release.  All further development on 2.16.19 will now cease. 
2.18.1 is maintained on both 2.4 and 2.6 kernels.  No active development will be performed on
2.18.1, only maintenance.  For an active development release, see the Linux Fast-STREAMS releases.

   <p>Major changes from LiS-2.18.0 include all of the autoconf build system, manual pages and texi/pdf
manual for LiS that were applied on the 2.16.19 release.  This includes a number of 64 bit, HPPA,
PARISC, printf, atomic stats, HZ calculations for 64bit machines, DMA patch for mblk buffer
alignment, flush handling patch, panic patch, smp patch, parisc syscall patch, appq patch, and
multithreaded test program patches, POSIX threads compilant library functions.

   <p>Additional changes made to support later 2.6 kernels and distributions.  Switched
putpmsg()/getpmsg() to use ioctl for system call emulation instead of read()/write(), primarily
because 2.6.11 kernels check for a valid count before calling the driver's read()/write() file
operations.  Updates to the build system to support a wider range of kernels and distributions.  See
the installation and reference manual for a complete list of supported kernels and distributions.

   <p>Please note that the entire package is released under GPL.

<p><a name="Release-LiS-2.16.19"></a>
<a name="Release-LiS_002d2_002e16_002e19"></a>

<h4 class="subsection">5.3.5 Release LiS-2.16.19</h4>

<p><a name="index-release-LiS_002d2_002e16_002e19-190"></a>
Not publicly released.

<p><a name="Release-LiS-2.16.18-22"></a>
<a name="Release-LiS_002d2_002e16_002e18_002d22"></a>

<h4 class="subsection">5.3.6 Release LiS-2.16.18-22</h4>

<p><a name="index-release-LiS_002d2_002e16_002e18_002d22-191"></a>
Replaced m4 and automake files with common equivalents.  This allows the same set of m4 macros and
automake fragments to be used with all of the OpenSS7 release packages.  Maintenance is easier as
one correction will propagate across all items.  Performed similar function with texinfo
documentation pieces.

<p><a name="Release-LiS-2.16.18-21"></a>
<a name="Release-LiS_002d2_002e16_002e18_002d21"></a>

<h4 class="subsection">5.3.7 Release LiS-2.16.18-21</h4>

<p><a name="index-release-LiS_002d2_002e16_002e18_002d21-192"></a>
Removed all XTI/TLI and Linux networking code, headers and documentation from LiS distribution and
bumped epoch to 2.  Linux networking code has been migrated to the <strong>strxns</strong>,
<strong>strxnet</strong>, <strong>strinet</strong> and <strong>strsctp</strong> packages.  The purpose for doing this was to
allow the Linux networking to build against Linux Fast-STREAMS as well as
<dfn>Linux STREAMS (LiS)</dfn> and is a preparation for phasing out LiS and phasing in LfS.

   <p>Added missing <samp><span class="file">configure.nexusware</span></samp> to distribution.  LiS cache options now default to 'no'
because of instabilities with timers.

   <p>Not publicly released.

<p><a name="Release-LiS-2.16.18-20"></a>
<a name="Release-LiS_002d2_002e16_002e18_002d20"></a>

<h4 class="subsection">5.3.8 Release LiS-2.16.18-20</h4>

<p><a name="index-release-LiS_002d2_002e16_002e18_002d20-193"></a>
Minor corrections: made conflicting manpage <samp><span class="file">xti_sctp.3</span></samp> dependent on OpenSS7 SCTP kernel.

   <p>Not publicly released.

<p><a name="Release-LiS-2.16.18-19"></a>
<a name="Release-LiS_002d2_002e16_002e18_002d19"></a>

<h4 class="subsection">5.3.9 Release LiS-2.16.18-19</h4>

<p><a name="index-release-LiS_002d2_002e16_002e18_002d19-194"></a>
Changes to compile, install and builds rpms for Fedora Core 1 (FC1), Whitebox Enterprise Linux
(WBEL) and RedHat Enterprise Linux 3 (EL3).  Included explicit epoch in internal dependencies in
spec file for RPM versions 4.2.1, 4.2.2 and higher.  Added hugemem kernel detection and moved
getpmsg and putpmsg manual pages.

   <p>Correction to symbolic linking and system map file location during non-rpm autoconf installation.

   <p>Correction to zero <code>maxlen</code> behavior in <code>t_rcvconnect()</code>.

<p><a name="Release-LiS-2.16.18-18"></a>
<a name="Release-LiS_002d2_002e16_002e18_002d18"></a>

<h4 class="subsection">5.3.10 Release LiS-2.16.18-18</h4>

<p><a name="index-release-LiS_002d2_002e16_002e18_002d18-195"></a>
Added check for <code>CONFIG_REGPARM</code>, addition of <code>-mregparm=3</code> <code>CFLAGS</code>, addition of
<code>regparm_</code> prefix for exported ksyms.

   <p>Minor corrections to separate build directory install of devices and caching of detected ksyms.

<p><a name="Release-LiS-2.16.18-17"></a>
<a name="Release-LiS_002d2_002e16_002e18_002d17"></a>

<h4 class="subsection">5.3.11 Release LiS-2.16.18-17</h4>

<p><a name="index-release-LiS_002d2_002e16_002e18_002d17-196"></a>
Added option <code>--disable-k-modversions</code> to supress versioning of LiS exported symbols.

   <p>A couple of corrections to the build process reported by Gurol.  Changed order of build in `make
rebuild' target to build tools last so that the rpm debug package is built correctly on RH9.

   <p>Change <code>MODULE_PARM</code> to static so that <code>make install-strip</code> does not strip module
parameter symbols.

   <p>Added <code>lis_check_mem_region()</code>, <code>lis_release_mem_region()</code> and
<code>lis_request_mem_region()</code> for memory mapped io instead of just io.

   <p>Added <code>printk</code> patches discussed on linux-stream mailling list.  Added gcc <code>printf</code>
checking and corrected errors in LiS debugging <code>printk</code> statements.

   <p>Added HP patches.  There are a couple of questionable components in the HP patches that I reversed. 
They include;

     <ul>
<li>modification of <code>lis_msgsize</code> to <code>lis_msgdsize</code>.  This would change the calculation of
queue counts.  Queue counts aren't <code>M_DATA</code> counts, they are "data" message counts.  LiS
probably doesn't have this the right way, but <code>lis_msgdsize</code> is not correct either.

     <li>addition of <code>qi_mstat-&gt;ms_pcnt</code> increment on <code>lis_safe_putmsg</code>.  Same for <code>ms_scnt</code>,
<code>ms_ocnt</code>, <code>ms_ccnt</code>.  STREAMS is not supposed to increment counts.  It is the module
writer's responsibility to increment counts in their own queue procedures. 
</ul>

   <p>Added HP <code>ldl</code> patches.

   <p>Made modifications to <code>putq()</code>, <code>putbq()</code>, <code>insq()</code> and <code>appq()</code> discussed on
linux-streams mailing list.  These do not free messages on failure.  Modified all ocurrences
internal to LiS to free the message on error to ensure old behavior.

   <p>Added HP dejagnu patches to <code>strtst</code> and added dejagnu testsuite directory and file.  Added the
<code>make check</code> target.  Use <code>DEJATOOLS</code> on the make command line to invoke the tests, such
as `<code>make DEJATOOLS=strtst check</code>' to invoke the tests.  Because a patched <code>netperf</code> is
not commonly available and <code>netperf</code> will not be distributed with the package, GNU
<code>autotest</code> might be a better choice.  But that's for a later release.

<p><a name="Release-LiS-2.16.18-16"></a>
<a name="Release-LiS_002d2_002e16_002e18_002d16"></a>

<h4 class="subsection">5.3.12 Release LiS-2.16.18-16</h4>

<p><a name="index-release-LiS_002d2_002e16_002e18_002d16-197"></a>
General updates to the build process, optimization options, build options.  Corrected library
linkage.  Synced TLI modules and INET driver to Linux Fast-STREAMS.  Removed deadlock from INET
driver and loosened locking.  Unfortunately suitable libraries must be installed before distcheck
will clear.

   <p>Smoother and more reliable stripping of kernel symbols, starts with /proc/ksyms if applicable then
System.map then modversions.h to attempt to choose symbols most closely synced with an installed or
running kernel.

   <p>Improvements to autoconf installation of manpages (autocompressed now) and info and pdf manuals are
distributed.  install-strip target will actually properly strip kernel modules.

   <p>Included an option to build and install only kernel or user parts of package to speed rpm rebuild
process for multiple kernel.  Added `rebuild' target to rebuild the rpms from srpm for multiple
kernel and architectures.  Added a `sign' and `resign' target to sign srpm and rebuilt rpms
respectively.

   <p>Greatly enhanced cross-build and cross-compile support, primarily in support of the NexusWare
embedded target.  Added NexusWare helper script and documentation.  DESTDIR is now a blessed
environment variable used by configure to set the cross-build root as well as the install root.  Try
adding &ndash;with-k-optimize='size' to configure to optimize for size for embedded targets.  Builds
clean against NexusWare24 (810p0674.10-rc4).

   <p>Added start of an option to build as linkable object for embedded targets rather than loadable
kernel module.

<p><a name="Release-LiS-2.16.18-15"></a>
<a name="Release-LiS_002d2_002e16_002e18_002d15"></a>

<h4 class="subsection">5.3.13 Release LiS-2.16.18-15</h4>

<p><a name="index-release-LiS_002d2_002e16_002e18_002d15-198"></a>
Fixed several symbol errors that made -13 and -14 unusable.  Corrected error in calculation of
kernel debug flags.

<p><a name="Release-LiS-2.16.18-14"></a>
<a name="Release-LiS_002d2_002e16_002e18_002d14"></a>

<h4 class="subsection">5.3.14 Release LiS-2.16.18-14</h4>

<p><a name="index-release-LiS_002d2_002e16_002e18_002d14-199"></a>
A few more enhancements to the build process to work with autoconf 2.59.

<p><a name="Release-LiS-2.16.18-13"></a>
<a name="Release-LiS_002d2_002e16_002e18_002d13"></a>

<h4 class="subsection">5.3.15 Release LiS-2.16.18-13</h4>

<p><a name="index-release-LiS_002d2_002e16_002e18_002d13-200"></a>
Enhanced build process for autoconf-2.59, automake-1.8.3, gettext-0.14.1, and libtool-1.5.6.

<p><a name="Release-LiS-2.16.18-12"></a>
<a name="Release-LiS_002d2_002e16_002e18_002d12"></a>

<h4 class="subsection">5.3.16 Release LiS-2.16.18-12</h4>

<p><a name="index-release-LiS_002d2_002e16_002e18_002d12-201"></a>
Added defaults for SK_WMEM_MAX and SK_RMEM_MAX for lastest 2.4.25 and 2.4.26 kernel builds.

   <p>Enhanced build process.

   <p>All kernel symbols exported by LiS are versioned on kernels that have versioned symbols.  This makes
it safer to compile kernel modules against kernel/LiS combinations.  This is in preparation for
splitting off the strxnet package, and the technique was imported from the Linux Fast-STREAMS build.

<p><a name="Release-LiS-2.16.18-11"></a>
<a name="Release-LiS_002d2_002e16_002e18_002d11"></a>

<h4 class="subsection">5.3.17 Release LiS-2.16.18-11</h4>

<p><a name="index-release-LiS_002d2_002e16_002e18_002d11-202"></a>
Ripped three additional kernel symbols in support of INET driver that were missing in -10 release.

<p><a name="Release-LiS-2.16.18-10"></a>
<a name="Release-LiS_002d2_002e16_002e18_002d10"></a>

<h4 class="subsection">5.3.18 Release LiS-2.16.18-10</h4>

<p><a name="index-release-LiS_002d2_002e16_002e18_002d10-203"></a>
Added support for cooked manpages both for non-rpm systems and for rpm systems.  It is still better
to leave manpages uncooked for rpm releases because they are much smaller that way.  Give the
&ndash;with-cooked-manpages flag to configure if you want cooked manpages.  You still need grefer on the
build system.

   <p>Updates to all manual pages in man7, and some others (xti) in man3.  Removed unused .macros and
.refs files.

   <p>Moved automake fragments into separate directory.  Cleaned up automake fragments.

   <p>Rearranged header files in the xti subdirectory to install in LiS package include directory instead. 
Reworked xti, tihdr and tiuser file groups to include properly from kernel or user space independent
of order.  tiuser and xti still cannot be included together.  Added older TLI interface &lt;tiuser.h&gt;
that is still consistent with newer XTI interface.  Changed references in man pages to XTI/TLI
instead of just XTI.

   <p>Added ticlts.h, ticots.h and ticotsord.h header files.  Updated dlpi.h and npi.h header files. 
Removed sys/LiS/tpicommon.h because it is largely replaced by sys/tli.h and sys/tpi.h.  Removed the,
now redundant, xti header file subdirectory.

   <p>A series of bug fixes to xnet.c (libxnet) that resulted from discussions with Gurol Akman on
openss7-develop mailing list.  Mostly surrounding t_alloc and t_getinfo behaviour and the behavior
when NULL pointers are passed to various XTI/TLI library calls.  Updated xti documentation as well.

   <p>Many changes to the inet.c INET driver.  Wildcard IP addresses can now be bound and wildcard
addresses will be assigned with no address is passed to most providers.  (/dev/rawip still requires
an address or TNOADDR is returned.)  Option management has been extensively rewritten to be more
conformant to XNS documentation.  Test programs test-inet_raw, test-inet_udp, test-inet_tcp have
been upgraded and converted to multiple child processes.  A number of fixes to SMP lock behavior and
M_FLUSH have beend added as reported by Dave Grothe.  Corrected all level and TBADOPT behavior on
negotiation.

   <p>Although this driver is now closer to expected behavior, it has not been tested for XNS 5.2
compliance, nor will it be until someone has the time to extend the test programs to handle all test
cases in a similar manner as was done for the library.  Your mileage many vary.  Remember, there is
no warranty.

<p><a name="Release-LiS-2.16.18-9"></a>
<a name="Release-LiS_002d2_002e16_002e18_002d9"></a>

<h4 class="subsection">5.3.19 Release LiS-2.16.18-9</h4>

<p><a name="index-release-LiS_002d2_002e16_002e18_002d9-204"></a>
Changes primarily in support of builds on HPPA (PARISC) architectures.  LiS doesn't build too well
on PARISC so some modifications where used from the Linux Fast-STREAMS package to correct
deficiencies.  Better building on recent 2.4 kernels (2.4.23, 2.4.24, 2.4.25) is also provided.

<p><a name="Release-LiS-2.16.18-8"></a>
<a name="Release-LiS_002d2_002e16_002e18_002d8"></a>

<h4 class="subsection">5.3.20 Release LiS-2.16.18-8</h4>

<p><a name="index-release-LiS_002d2_002e16_002e18_002d8-205"></a>
Changes to permit better builds on recent RedHat kernels, and especially kernel-2.4.20-30.9.

<p><a name="Release-LiS-2.16.18-7"></a>
<a name="Release-LiS_002d2_002e16_002e18_002d7"></a>

<h4 class="subsection">5.3.21 Release LiS-2.16.18-7</h4>

<p><a name="index-release-LiS_002d2_002e16_002e18_002d7-206"></a>
Fixed a module loading bug in LiS.  Previously modules would not demand load.

<p><a name="Release-LiS-2.16.18-6"></a>
<a name="Release-LiS_002d2_002e16_002e18_002d6"></a>

<h4 class="subsection">5.3.22 Release LiS-2.16.18-6</h4>

<p><a name="index-release-LiS_002d2_002e16_002e18_002d6-207"></a>
Fixed a possible null pointer dereference in libxnet.  Corrected t_bind to return TNOADDR instead of
TBADADDR on wildcard bind attempt.  Module loading bug patched.

<p><a name="Release-LiS-2.16.18-5"></a>
<a name="Release-LiS_002d2_002e16_002e18_002d5"></a>

<h4 class="subsection">5.3.23 Release LiS-2.16.18-5</h4>

<p><a name="index-release-LiS_002d2_002e16_002e18_002d5-208"></a>
Fixes a t_open and t_bind problem in libxnet.  Fixes alignemnt of data portion of mblks.  Adds
(untested) ticots_ord, ticots and ticlts devices over UNIX domain sockets.

<p><a name="Release-LiS-2.16.18-4"></a>
<a name="Release-LiS_002d2_002e16_002e18_002d4"></a>

<h4 class="subsection">5.3.24 Release LiS-2.16.18-4</h4>

<p><a name="index-release-LiS_002d2_002e16_002e18_002d4-209"></a>
Adds back in missing strms_up/down/status scripts to distribution and install.

<p><a name="Release-LiS-2.16.18-3"></a>
<a name="Release-LiS_002d2_002e16_002e18_002d3"></a>

<h4 class="subsection">5.3.25 Release LiS-2.16.18-3</h4>

<p><a name="index-release-LiS_002d2_002e16_002e18_002d3-210"></a>
Not publicly released.

<p><a name="Release-LiS-2.16.18-2"></a>
<a name="Release-LiS_002d2_002e16_002e18_002d2"></a>

<h4 class="subsection">5.3.26 Release LiS-2.16.18-2</h4>

<p><a name="index-release-LiS_002d2_002e16_002e18_002d2-211"></a>
Not publicly released.

<p><a name="Release-LiS-2.16.18-1"></a>
<a name="Release-LiS_002d2_002e16_002e18_002d1"></a>

<h4 class="subsection">5.3.27 Release LiS-2.16.18-1</h4>

<p><a name="index-release-LiS_002d2_002e16_002e18_002d1-212"></a>
This OpenSS7 release of LiS-2.16.18 updates the previous LiS-2.16.16 rpm release to the lastest
LiS-2.16 release level.

<p><a name="Release-LiS-2.16.16-1"></a>
<a name="Release-LiS_002d2_002e16_002e16_002d1"></a>

<h4 class="subsection">5.3.28 Release LiS-2.16.16-1</h4>

<p><a name="index-release-LiS_002d2_002e16_002e16_002d1-213"></a>
This OpenSS7 release of LiS-2.16.16 includes autoconf for configuration, complete manual pages and
documentation, and packaging in source and binary RPMs for ease and repeatability of installation. 
The package also builds and installs properly versioned LiS shared object libraries.

   <p>Before the OpenSS7 release of LiS, it was necessary to have a significant working knowledge of the
Linux kernel, kernel source, headers and other intricacies.  This made it difficult to distribute
software based on LiS to users not proficient in those areas.  The OpenSS7 release removes the
configuration and installation tasks from the user and permits distribution of applications, modules
and driver software based on LiS to users without sufficient kernel expertise to install the
package.

   <p>This OpenSS7 release fixes few of the outstanding bugs and deficiencies of the LiS software.  This
release is intended to package and distribute LiS in an efficient manner and, for the most part,
does not address LiS deficiencies or errors.

   <p>This OpenSS7 release is compatible with Linux 2.4 kernels only and will refuse to configure for
older or newer kernels.

   <p>Following are the new features of the OpenSS7 release of LiS:

     <ul>
<li>adds configuration using the GNU tools, autoconf, automake and autotest.

     <p>These tools greatly enhance the ability to maintain a repeatable and testable release cycle as well
as being compatible with most major package managers such as Redhat's RPM.

     <li>adds long options to all LiS utilities.

     <p>This change was necessitated because we use GNITS (the strictest level) of configuration with
autoconf that requires for distribution checking that all utility programs support the `<samp><span class="samp">--help</span></samp>'
and `<samp><span class="samp">--version</span></samp>' long options wtihout side-effects.

     <li>provides a source and binary release mechanism using both autoconf distributions as well as RedHat
source and binary RPMs.

     <p>Use of the RPM mechanism for release permits add-on packages to ensure that they have sufficient
level of support and verionsing of the LiS load during their build and installation process.  It is
now also possible to ensure that add on binaries are compatible with a loaded LiS during
installation.

     <li>includes a complete set of kernel programmer manual pages for all LiS exported kernel functions for
use by STREAMS module and driver developers.

     <li>includes a complete set of user manual pages for all libLiS functions and separate administrative
utilities.

     <li>includes the OpenSS7 strinet driver providing XTI/TLI access to the Linux native NET4 IP stack
including TCP, UDP, IP and (and OpenSS7 SCTP if your kernel is so equipped).

     <li>includes functional <code>tirdwr</code> and <code>timod</code> modules for use with the included XTI/TLI
library.<a rel="footnote" href="#fn-8" name="fnd-8"><sup>8</sup></a>

     <li>includes complete, thread-safe XNS 5.2 XTI/TLI library support with the <samp><span class="file">libxnet</span></samp> library,
complete manual pages and documentation released under the LGPL (see <a href="#GNU-Lesser-General-Public-License">GNU Lesser General Public License</a>). 
</ul>

   <p>The next release may include some <dfn>strss7</dfn> software.

<!--  -->
<!--  -->
<p><a name="Maturity"></a>

<h3 class="section">5.4 Maturity</h3>

<p><a name="index-maturity-214"></a>
The <cite>OpenSS7 Project</cite> adheres to the following release philosophy:

     <ul>
<li>pre-alpha release
<li>alpha release
<li>beta release
<li>gamma release
<li>production release
</ul>

<p><a name="Pre-Alpha-Releases"></a>
<a name="Pre_002dAlpha-Releases"></a>

<h4 class="subsection">5.4.1 Pre-Alpha Releases</h4>

<p><dfn>Pre-alpha</dfn> releases are releases that have received no testing whatsoever.  Code in the release
is not even known to configure or compile.  The purpose of a pre-alpha release is to make code and
documenation available for insepection only, and to solicit comments on the design approach or other
characteristics of the software package.

   <p><dfn>Pre-alpha</dfn> release packages ship containing warnings recommending that the user not even
execute the contained code.

<p><a name="Alpha-Releases"></a>

<h4 class="subsection">5.4.2 Alpha Releases</h4>

<p><dfn>Alpha</dfn> release are releases that have received little to no testing, or that have been tested
and contains known bugs or defects that make the package unsuitable even for testing.  The purpose
for an <dfn>alpha</dfn> release are the same as for the pre-alpha release, with the additional purpose
that it is an earily release of partially functional code that has problems that an external
developer might be willing to fix themselves and contribute back to the project.

   <p><dfn>Alpha</dfn> release packages ship containing warnings that executing the code can crash machines and
might possibly do damage to systems upon which it is executed.

<p><a name="Beta-Releases"></a>

<h4 class="subsection">5.4.3 Beta Releases</h4>

<p><dfn>Beta</dfn> releases are releases that have received some testing, but the testing to date is not
exhaustive.  <dfn>Beta</dfn> release packages do not ship with known defects.  All known defects are
respolved before distribution; however, as exhaustive testing has not been performed, unknown
defects may exist.  The purpose for a <dfn>beta</dfn> release is to provide a baseline for other
organizations to participate in the rigorous testing of the package.

   <p><dfn>Beta</dfn> release packages ship containing warnings that the package has not been exhaustively
tested and that the package may cause systems to crash.  Suitability of software in this category
for production use is not advised by the project; however, as always, is at the discretion of the
user of the software.

<p><a name="Gamma-Releases"></a>

<h4 class="subsection">5.4.4 Gamma Releases</h4>

<p><dfn>Gamma</dfn> release are releases that have received exhaustive testing within the project, but
external testing has been minimal.  <dfn>Gamma</dfn> release packages do not ship with known defects.  As
exhaustive internal testing has been performed, unknown defects should be few.  Please remember that
there is NO WARRANTY on public release packages.

   <p><dfn>Gamma</dfn> release packages typically resolve problems in previous <dfn>beta</dfn> releases, and might
not have had full regression testing performed.  Suitability of software in this category for
production use is at the discretion of the user of the software.   <dfn>The OpenSS7 Project</dfn>
recommends that the complete validation test suites provided with the package be performed and pass
on target systems before considering production use.

<p><a name="Production-Releases"></a>

<h4 class="subsection">5.4.5 Production Releases</h4>

<p><dfn>Production</dfn> releases are releases that have received exhaustive testing within the project and
validated on specific distributions and architectures.  <dfn>Production</dfn> release packages do not
ship with known defects.  Please remember that there is NO WARRANTY on public release packages.

   <p><dfn>Production</dfn> packages ship containig a list of validated distributions and architecutres. 
Full regression testing of any maintenance changes is performed.  Suitability of software in this
category for production use on the specified target distributions and architectures is at the
discretion of the user.  It should not be necessary to preform validation tests on the set of
supported target systems before considering production use.

<!--  -->
<!--  -->
<p><a name="Bugs"></a>

<h3 class="section">5.5 Bugs</h3>

<p><a name="index-bugs-215"></a>

<p><a name="Defect-Notices"></a>

<h4 class="subsection">5.5.1 Defect Notices</h4>

<!-- This is the defect notice for pre-alpha release software -->
<!-- This is the defect notice for alpha release software -->
<!-- This is the defect notice for beta release software -->
<!-- This is the defect notice for gammar release software -->
<!-- This is the defect notice for production release software -->
<p><dfn>Linux STREAMS (LiS)</dfn>, both releases from <cite>OpenSS7</cite> and <cite>GCOM</cite>, contany many known
bugs. These are unstable releases.  Although there are no bugs known to be harmful, the
<cite>OpenSS7 Project</cite> has tested the release and found defects that cause the kernel to lock or
crash. Use at your own risk.  Remember that there is <b>NO WARRANTY</b><a rel="footnote" href="#fn-9" name="fnd-9"><sup>9</sup></a> and that the package is no longer actively
maintained.

   <p><b>This software has tested </b><i>unstable</i><b>.  As such, it can crash your kernel.  Installation of the
software could irreparably mangle your header files or Linux distribution in such a way as to make
it unusable.  Crashes can lock your system and rebooting the system might not repair the problem. 
You can loose all the data on your system.  Because this software locks or crashes under a large
number of test cases in the test suite, simply running the test cases can cause locks or crashes. 
The resulting unstable system could destroy computer hardware or peripherals making them unusable. 
You could void the warranty on any system on which you run this software. YOU HAVE BEEN WARNED.</b>

<p><a name="Known-Defects"></a>

<h4 class="subsection">5.5.2 Known Defects</h4>

<p><a name="index-known-bugs-216"></a><a name="index-bugs_002c-known-217"></a>
With the exception of packages not originaly created by the <cite>OpenSS7 Project</cite>, the
<cite>OpenSS7 Project</cite> software does not ship with known bugs in any release stage except
<dfn>pre-alpha</dfn>.  <dfn>Linux STREAMS (LiS)</dfn> had many known bugs at the time of release.

   <p><dfn>Linux STREAMS (LiS)</dfn> has many known bugs.  Under some architectures, the test cases in the
conformance test suite cause the kernel to lock or crash.  <dfn>Linux STREAMS (LiS)</dfn> contains many
races and defects and is unsuitable for production environments.  This section provides a summary of
some (but not all) known defects.

     <ol type=1 start=1>
<li>A substantial group of test cases in the <dfn>POSIX</dfn> conformance test suite fail.  This is largely
due to non-fatal defects in LiS. 
<li>A number of test cases fail under any architecture and result in a kernel lock.  In particular if a
significant number of modules are pushed onto a Stream using I_PUSH, the kernel will lock when the
Stream is closed.  The number of modules pushed to cause a crash depends on the speed of the machine
upon which the test case is run.  The test case in the test suite pushes 64 modules and has always
resulted in a kernel lock regardless of the machine speed upon which it was tested.  Pushing 20
modules results in a kernel lock on some of the <cite>OpenSS7 Project</cite> 2.57GHz test machines.

     <p>As a result, any test case that pushes a number of modules, and the performance tests (that push
modules for measurement) will cause the kernel to lock. 
<li>A large number of test cases fail when running under an SMP kernel, regardless of the number of
processors on the test system.  These test cases cause the kernel to lock.  The kernel locks are
apparentlhy due to locking defects in the implementation.  None of these implementation defects have
been repaired. 
<li>The original <samp><span class="file">LiS-2.18.0</span></samp> release from <cite>GCOM</cite> has a large number of defects that were
repaired in the <cite>OpenSS7</cite> <samp><span class="file">LiS-2.18.1</span></samp> release. 
<li>The original <cite>LiS-2.18.0</cite> release has defects in the description of data types and handling
under 64-bit architectures.  32-bit compatibility for 64-bit architectures is all but non-existent
in the LiS-2.18.0 release.  Because of binary compatibility issues, many of these defects persist in
the <cite>OpenSS7</cite> <samp><span class="file">LiS-2.18.1</span></samp> and <samp><span class="file">LiS-2.18.2</span></samp> releases.  LiS is largely unusable in a
64-bit and almost completely unusable in a mixed architecture.
        </ol>

   <p>The work-around for these defects is to not use LiS at all: use the <cite>OpenSS7 Linux
Fast-STREAMS</cite> release instead.  The <cite>OpenSS7 Linux Fast-STREAMS</cite>, being a completely
independent implemenation, does not suffer from this extensive set of LiS defects.

<!--  -->
<!--  -->
<p><a name="Schedule"></a>

<h3 class="section">5.6 Schedule</h3>

<p><a name="index-schedule-218"></a>
<!--  -->
<!--  -->

<p><a name="History"></a>

<h3 class="section">5.7 History</h3>

<p><a name="index-history-219"></a>
<!--  -->

<!--  -->
<!--  -->
<p><a name="Installation"></a>

<h2 class="chapter">6 Installation</h2>

<p><a name="index-installation-220"></a>

<!-- *- texinfo -*- vim: ft=texinfo -->
<!-- ========================================================================= -->
<!-- @(#) install.texi,v 1.1.4.15 2006/07/03 06:07:39 brian Exp -->
<!-- ========================================================================= -->
<!-- Copyright (c) 2001-2006  OpenSS7 Corporation <www.openss7.com> -->
<!-- Copyright (c) 1997-2000  Brian F. G. Bidulock <bidulock@openss7.org> -->
<!-- All Rights Reserved. -->
<!-- Permission is granted to make and distribute verbatim copies of this -->
<!-- manual provided the copyright notice and this permission notice are -->
<!-- preserved on all copies. -->
<!-- Permission is granted to copy and distribute modified versions of this -->
<!-- manual under the conditions for verbatim copying, provided that the -->
<!-- entire resulting derived work is distributed under the terms of a -->
<!-- permission notice identical to this one. -->
<!-- Since the Linux kernel and libraries are constantly changing, this -->
<!-- manual page may be incorrect or out-of-date.  The author(s) assume no -->
<!-- responsibility for errors or omissions, or for damages resulting from -->
<!-- the use of the information contained herein.  The author(s) may not -->
<!-- have taken the same level of care in the production of this manual, -->
<!-- which is licensed free of charge, as they might when working -->
<!-- professionally. -->
<!-- Formatted or processed versions of this manual, if unaccompanied by -->
<!-- the source, must acknowledge the copyright and authors of this work. -->
<!--  -->
<!-- U.S. GOVERNMENT RESTRICTED RIGHTS.  If you are licensing this Software -->
<!-- on behalf of the U.S. Government ("Government"), the following -->
<!-- provisions apply to you.  If the Software is supplied by the Department -->
<!-- of Defense ("DoD"), it is classified as "Commercial Computer Software" -->
<!-- under paragraph 252.227-7014 of the DoD Supplement to the Federal -->
<!-- Acquisition Regulations ("DFARS") (or any successor regulations) and the -->
<!-- Government is acquiring only the license rights granted herein (the -->
<!-- license rights customarily provided to non-Government users).  If the -->
<!-- Software is supplied to any unit or agency of the Government other than -->
<!-- DoD, it is classified as "Restricted Computer Software" and the -->
<!-- Government's rights in the Software are defined in paragraph 52.227-19 -->
<!-- of the Federal Acquisition Regulations ("FAR") (or any successor -->
<!-- regulations) or, in the cases of NASA, in paragraph 18.52.227-86 of the -->
<!-- NASA Supplement to the FAR (or any successor regulations). -->
<!-- ========================================================================= -->
<!-- Commercial licensing and support of this software is available from -->
<!-- OpenSS7 Corporation at a fee.  See http://www.openss7.com/ -->
<!-- ========================================================================= -->
<!-- Last Modified 2006/07/03 06:07:39 by brian -->
<!-- ========================================================================= -->
<!--  -->
<!--  -->
<p><a name="Downloading"></a>

<h3 class="section">6.1 Downloading</h3>

<p><a name="index-downloading-221"></a>
The Linux STREAMS (LiS) package releases can be downloaded from the downloads
page of <a href="http://www.openss7.org/download.html">The OpenSS7 Project</a>.  The
package is available as a binary RPM (for popular architectures) a source RPM,
Debian binary DEB and source DSC, or as a tar ball.  If you are using a
browsable viewer, you can obtain the OpenSS7 release of
<samp><span class="command">LiS</span></samp> from the links in the sections that follow.

   <p>By far the easiest form for installing and using
<samp><span class="command">LiS-2.18.4.rc2</span></samp> is to download and install binary RPM. 
If a binary RPM is not available for your distribution,  but your distribution
supports RPM, the next best method for installing and using
<samp><span class="command">LiS-2.18.4.rc2</span></samp> is to download and rebuild the source
RPM.  If your architecture does not support RPM at all, or you have special
needs (such as cross-compiling for embedded targets), the final resort method is
to download, configure, build and install from the source tarball.

<!--  -->
<p><a name="Downloading-the-Binary-RPM"></a>

<h4 class="subsection">6.1.1 Downloading the Binary RPM</h4>

<p><a name="index-downloading_002c-binary-rpms-222"></a><a name="index-binary-rpms-223"></a>
To install from binary RPM, you will need several of the RPM for a complete
installation.  Binary RPM fall into several categories.  To download and install a
complete package requires the appropriate RPM from each of the several categories
below.

   <p>To install from Binary RPM, you will need all of the following kernel
indepdendent packages for your architecture, and one of the kernel-depdendent
packages from the next section.

<h5 class="subsubheading">Independent RPM</h5>

<p>Independent RPM are
not dependent on the Linux kernel version. 
For example, the
source package
`<samp><span class="samp">LiS-source-2.18.4.rc2-1.FC5.noarch.rpm</span></samp>',
is not dependent on
kernel.

<p class="noindent">All of the following kernel independent RPM are required for your architecture. 
Binary RPMs listed here are for example only: additional binary RPMs are
available from the downloads site.  If your architecture is not available, you
can build binary RPM from the source RPM (see see <a href="#Building-from-the-Source-RPM">Building from the Source RPM</a>).

<h5 class="subsubheading">Architecture Independent</h5>

     <dl>
<dt><a href="http://www.openss7.org/rpms/RPMS/noarch/LiS-dev-2.18.4.rc2-1.FC5.noarch.rpm">LiS-dev-2.18.4.rc2-1.FC5.noarch.rpm</a><dd>The <samp><span class="file">LiS-dev</span></samp> package contains the device definitions necessary
to run applications programs developed for Linux STREAMS (LiS).<a rel="footnote" href="#fn-10" name="fnd-10"><sup>10</sup></a>

     <br><dt><a href="http://www.openss7.org/rpms/RPMS/noarch/LiS-doc-2.18.4.rc2-1.FC5.noarch.rpm">LiS-doc-2.18.4.rc2-1.FC5.noarch.rpm</a><dd>The <samp><span class="file">LiS-doc</span></samp> package contains this manual in plaintext,
postscript, PDF and HTML forms, along with the meta-information from the
<samp><span class="file">LiS</span></samp> package.  It also contains all of the manual pages
necessary for developing Linux STREAMS (LiS) applications and
Linux STREAMS (LiS) STREAMS modules or drivers.

     <br><dt><a href="http://www.openss7.org/rpms/RPMS/noarch/LiS-init-2.18.4.rc2-1.FC5.noarch.rpm">LiS-init-2.18.4.rc2-1.FC5.noarch.rpm</a><dd>The <samp><span class="file">LiS-init</span></samp> package contains the init scripts and provides
the postinst scripts necessary to create kernel module preloads and modules
definitions for all kernel module `<samp><span class="samp">core</span></samp>' subpackages.

     <br><dt><a href="http://www.openss7.org/rpms/RPMS/noarch/LiS-source-2.18.4.rc2-1.FC5.noarch.rpm">LiS-source-2.18.4.rc2-1.FC5.noarch.rpm</a><dd>The <samp><span class="file">LiS-source</span></samp> package contains the source code necessary for
building the Linux STREAMS (LiS) release.  It includes the <samp><span class="command">autoconf</span></samp>
configuration utilities necessary to create and distribute tarballs, rpms and
deb/dscs. 
</dl>

<h5 class="subsubheading">Architecture Dependent</h5>

     <dl>
<dt><a href="http://www.openss7.org/rpms/RPMS/i686/LiS-devel-2.18.4.rc2-1.FC5.i686.rpm">LiS-devel-2.18.4.rc2-1.FC5.i686.rpm</a><dd>The <samp><span class="file">LiS-devel</span></samp> package contains library archives for static
compilation, header files to develop Linux STREAMS (LiS) modules and drivers. 
This also includes the header files and static libraries required to compile
Linux STREAMS (LiS) applications programs.

     <br><dt><a href="http://www.openss7.org/rpms/RPMS/i686/LiS-lib-2.18.4.rc2-1.FC5.i686.rpm">LiS-lib-2.18.4.rc2-1.FC5.i686.rpm</a><dd>The <samp><span class="file">LiS-lib</span></samp> package contains the run-time shared libraries
necessary to run application programs and utilities developed for the
<samp><span class="file">LiS</span></samp> package.

     <br><dt><a href="http://www.openss7.org/rpms/RPMS/i686/LiS-util-2.18.4.rc2-1.FC5.i686.rpm">LiS-util-2.18.4.rc2-1.FC5.i686.rpm</a><dd>The <samp><span class="file">LiS-util</span></samp> package provides administrative and
configuration test utilities and commands associated with the
Linux STREAMS (LiS) package. 
</dl>

<h5 class="subsubheading">Kernel-Dependent RPM</h5>

<p>Kernel-Dependent RPM are dependent on specific Linux Kernel Binary RPM releases. 
Packages are provided for popular released <cite>RedHat</cite> kernels.  Packages
dependent upon <cite>RedHat</cite> or other kernel RPM will have the `<samp><span class="samp">_kversion</span></samp>'
kernel package version in the package name.

   <p>One of the following Kernel-Dependent packages is required for your architecture
and kernel version.  If your architecture or kernel version is not on the list,
you can build binary RPM from the source RPM (see see <a href="#Building-from-the-Source-RPM">Building from the Source RPM</a>).<a rel="footnote" href="#fn-11" name="fnd-11"><sup>11</sup></a>

     <dl>
<dt><a href="http://www.openss7.org/rpms/RPMS/i686/LiS-core-2.6.17-1.2139_FC5-2.18.4.rc2-1.FC5.i686.rpm">LiS-core-2.6.17-1.2139_FC5-2.18.4.rc2-1.FC5.i686.rpm</a><dd>The <samp><span class="file">LiS-core</span></samp> package contains the loadable kernel modules
that depend only on the kernel.  This package is heavily tied to the kernel for
which it was compiled.  This particular package applies to kernel version
`<samp><span class="samp">2.6.17-1.2139_FC5</span></samp>'.<a rel="footnote" href="#fn-12" name="fnd-12"><sup>12</sup></a>

     <br><dt><a href="http://www.openss7.org/rpms/RPMS/i686/LiS-info-2.6.17-1.2139_FC5-2.18.4.rc2-1.FC5.i686.rpm">LiS-info-2.6.17-1.2139_FC5-2.18.4.rc2-1.FC5.i686.rpm</a><dd>The <samp><span class="file">LiS-info</span></samp> package<a rel="footnote" href="#fn-13" name="fnd-13"><sup>13</sup></a> contains the
module symbol version information for the <samp><span class="file">core</span></samp> subpackage, above.  It is
possible to load this subpackage and compile modules that use the exported
symbols without loading the actual kernel modules (from the <samp><span class="file">core</span></samp>
subpackage above).  This package is heavily tied to the kernel for which it was
compiled.  This particular package applies to kernel version
`<samp><span class="samp">2.6.17-1.2139_FC5</span></samp>'.<a rel="footnote" href="#fn-14" name="fnd-14"><sup>14</sup></a>

   </dl>

<h5 class="subsubheading">Configuration and Installation</h5>

<p>To configure, build and install the binary RPM, See <a href="#Configuring-the-Binary-RPM">Configuring the Binary RPM</a>.

<!--  -->
<p><a name="Downloading-the-Debian-DEB"></a>

<h4 class="subsection">6.1.2 Downloading the Debian DEB</h4>

<p><a name="index-downloading_002c-debian-debs-224"></a><a name="index-binary-debs-225"></a>
To install from binary DEB, you will need several of the DEB for a complete
installation.  Binary DEB fall into several categories.  To download and install a
complete package requires the appropriate DEB from each of the several categories
below.

   <p>To install from Binary DEB, you will need all of the following kernel
indepdendent packages for your architecture, and one of the kernel-depdendent
packages from the next section.

<h5 class="subsubheading">Independent DEB</h5>

<p>Independent DEB are not dependent on the Linux kernel version. 
For example, the source package
`<samp><span class="samp">LiS-source_2.18.4.rc2-0_i386.deb</span></samp>',
is not dependent on kernel.

<p class="noindent">All of the following kernel independent DEB are required for your
architecture.  Binary DEBs listed here are for example only: additional binary
DEBs are available from the downloads site.  If your architecture is not
available, you can build binary DEB from the Debian DSC (see see <a href="#Building-from-the-Debian-DSC">Building from the Debian DSC</a>).

<h5 class="subsubheading">Architecture Independent</h5>

     <dl>
<dt><a href="http://www.openss7.org/debian/LiS-dev_2.18.4.rc2-0_all.deb">LiS-dev_2.18.4.rc2-0_all.deb</a><dd>The <samp><span class="file">LiS-dev</span></samp> package contains the device definitions necessary
to run applications programs developed for Linux STREAMS (LiS). 
<a rel="footnote" href="#fn-15" name="fnd-15"><sup>15</sup></a>

     <br><dt><a href="http://www.openss7.org/debian/LiS-doc_2.18.4.rc2-0_all.deb">LiS-doc_2.18.4.rc2-0_all.deb</a><dd>The <samp><span class="file">LiS-doc</span></samp> package contains this manual in plaintext,
postscript, PDF and HTML forms, along with the meta-information from the
<samp><span class="file">LiS</span></samp> package.  It also contains all of the manual pages
necessary for developing Linux STREAMS (LiS) applications and
Linux STREAMS (LiS) STREAMS modules or drivers.

     <br><dt><a href="http://www.openss7.org/debian/LiS-init_2.18.4.rc2-0_all.deb">LiS-init_2.18.4.rc2-0_all.deb</a><dd>The <samp><span class="file">LiS-init</span></samp> package contains the init scripts and provides
the postinst scripts necessary to create kernel module preloads and modules
definitions for all kernel module `<samp><span class="samp">core</span></samp>' subpackages.

     <br><dt><a href="http://www.openss7.org/debian/LiS-source_2.18.4.rc2-0_all.deb">LiS-source_2.18.4.rc2-0_all.deb</a><dd>The <samp><span class="file">LiS-source</span></samp> package contains the source code necessary for
building the Linux STREAMS (LiS) release.  It includes the <samp><span class="command">autoconf</span></samp>
configuration utilities necessary to create and distribute tarballs, rpms and
deb/dscs. 
!ignore
<a rel="footnote" href="#fn-16" name="fnd-16"><sup>16</sup></a>
!end ignore
</dl>

<h5 class="subsubheading">Architecture Dependent</h5>

     <dl>
<dt><a href="http://www.openss7.org/debian/LiS-devel_2.18.4.rc2-0_i386.deb">LiS-devel_2.18.4.rc2-0_i386.deb</a><dd>The <samp><span class="file">LiS-devel</span></samp> package contains library archives for static
compilation, header files to develop Linux STREAMS (LiS) modules and drivers. 
This also includes the header files and static libraries required to compile
Linux STREAMS (LiS) applications programs.

     <br><dt><a href="http://www.openss7.org/debian/LiS-lib_2.18.4.rc2-0_i386.deb">LiS-lib_2.18.4.rc2-0_i386.deb</a><dd>The <samp><span class="file">LiS-lib</span></samp> package contains the run-time shared libraries
necessary to run application programs and utilities developed for the
<samp><span class="file">LiS</span></samp> package.

</dl>

<h5 class="subsubheading">Kernel-Dependent DEB</h5>

<p>Kernel-Dependent DEB are dependent on specific Linux Kernel Binary DEB releases. 
Packages are provided for popular released <cite>RedHat</cite> kernels.  Packages
dependent upon <cite>RedHat</cite> or other kernel DEB will have the `<samp><span class="samp">_kversion</span></samp>'
kernel package version in the package name.

   <p>One of the following Kernel-Dependent packages is required for your architecture
and kernel version.  If your architecture or kernel version is not on the list,
you can build binary DEB from the source DEB (see see <a href="#Building-from-the-Debian-DSC">Building from the Debian DSC</a>).<a rel="footnote" href="#fn-17" name="fnd-17"><sup>17</sup></a>

     <dl>
<dt><a href="http://www.openss7.org/debian/LiS-core-2.6.17-1.2139_FC5_2.18.4.rc2-0_i386.deb">LiS-core-2.6.17-1.2139_FC5_2.18.4.rc2-0_i386.deb</a><dd>The <samp><span class="file">LiS-core</span></samp> package contains the loadable kernel modules
that depend only on the kernel.  This package is heavily tied to the kernel for
which it was compiled.  This particular package applies to kernel version
`<samp><span class="samp">2.6.17-1.2139_FC5</span></samp>'.<a rel="footnote" href="#fn-18" name="fnd-18"><sup>18</sup></a>

     <br><dt><a href="http://www.openss7.org/debian/LiS-info-2.6.17-1.2139_FC5_2.18.4.rc2-0_i386.deb">LiS-info-2.6.17-1.2139_FC5_2.18.4.rc2-0_i386.deb</a><dd>The <samp><span class="file">LiS-info</span></samp> package<a rel="footnote" href="#fn-19" name="fnd-19"><sup>19</sup></a> contains the
module symbol version information for the <samp><span class="file">core</span></samp> subpackage, above.  It is
possible to load this subpackage and compile modules that use the exported
symbols without loading the actual kernel modules (from the <samp><span class="file">core</span></samp>
subpackage above).  This package is heavily tied to the kernel for which it was
compiled.  This particular package applies to kernel version
`<samp><span class="samp">2.6.17-1.2139_FC5</span></samp>'.<a rel="footnote" href="#fn-20" name="fnd-20"><sup>20</sup></a>

   </dl>

<h5 class="subsubheading">Configuration and Installation</h5>

<p>To configure, build and install the Debian DEB, See <a href="#Configuring-the-Debian-DEB">Configuring the Debian DEB</a>.

<!--  -->
<p><a name="Downloading-the-Source-RPM"></a>

<h4 class="subsection">6.1.3 Downloading the Source RPM</h4>

<p><a name="index-downloading_002c-source-srpm-226"></a><a name="index-source-rpms-227"></a>
If you cannot obtain a binary RPM for your architecture, or would like to roll
you own binary RPM, download the following source RPM.

     <dl>
<dt><a href="http://www.openss7.org/rpms/SRPMS/LiS-2.18.4.rc2-1.src.rpm">LiS-2.18.4.rc2-1.src.rpm</a><dd>This is the source RPM for the package.  From this source RPM it is possible to
build binary RPM for any supported architecture and for any 2.4 or 2.6 kernel. 
</dl>

<h5 class="subsubheading">Configuration</h5>

<p>To configure the source RPM, See <a href="#Configuring-the-Source-RPM">Configuring the Source RPM</a>.

<!--  -->
<p><a name="Downloading-the-Debian-DSC"></a>

<h4 class="subsection">6.1.4 Downloading the Debian DSC</h4>

<p><a name="index-downloading_002c-debian-dscs-228"></a><a name="index-source-dscs-229"></a>
If you cannot obtain a binary DEB for your architecture, or would like to roll
your own DEB, download the following Debian DSC.

     <dl>
<dt><a href="http://www.openss7.org/debian/LiS_2.18.4.rc2-0.dsc">LiS_2.18.4.rc2-0.dsc</a><dt><a href="http://www.openss7.org/debian/LiS_2.18.4.rc2-0.tar.gz">LiS_2.18.4.rc2-0.tar.gz</a><dd>This is the Debian DSC for the package.  From this Debian DSC it is possible to
build binary DEB for any supported architecture and for any 2.4 or 2.6 kernel. 
</dl>

<h5 class="subsubheading">Configuration</h5>

<p>To configure the source RPM, See <a href="#Configuring-the-Debian-DSC">Configuring the Debian DSC</a>.

<!--  -->
<p><a name="Downloading-the-Tar-Ball"></a>

<h4 class="subsection">6.1.5 Downloading the Tar Ball</h4>

<p><a name="index-downloading_002c-tar-ball-230"></a><a name="index-tar-ball-231"></a>
For non-RPM architectures, such as <cite>NexusWare</cite> embedded target, download
the tarball as follows:

     <dl>
<dt><a href="http://www.openss7.org/LiS-2.18.4.rc2.tar.gz">LiS-2.18.4.rc2.tar.gz</a><dt><a href="http://www.openss7.org/LiS-2.18.4.rc2.tar.bz2">LiS-2.18.4.rc2.tar.bz2</a><dd>These are the <samp><span class="command">tar</span></samp> balls for the release.  These <samp><span class="command">tar</span></samp> balls
contain the <samp><span class="command">autoconf</span></samp> distribution which includes all the source
necessary for building and installing the package.  These tarballs will even
build Source RPM and Binary RPM on RPM architectures and Debian DSC and DEB on
DPKG architectures. 
</dl>

   <p>The tar ball may be downloaded easily with <samp><span class="command">wget</span></samp> as follows:

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<pre class="example">     % wget http://www.openss7.org/LiS-2.18.4.rc2.tar.bz2
</pre>
   </td></tr></table>

<p class="noindent">or

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<pre class="example">     % wget http://www.openss7.org/LiS-2.18.4.rc2.tar.gz
</pre>
   </td></tr></table>

<h5 class="subsubheading">Unpacking the Archive</h5>

<p>After downloading one of the tar balls, unpack the archive using one of the
following commands:

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<pre class="example">     % wget http://www.openss7.org/LiS-2.18.4.rc2.tar.gz
     % tar -xzvf LiS-2.18.4.rc2.tar.gz
</pre>
   </td></tr></table>

<p class="noindent">or

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<pre class="example">     % wget http://www.openss7.org/LiS-2.18.4.rc2.tar.bz2
     % tar -xjvf LiS-2.18.4.rc2.tar.bz2
</pre>
   </td></tr></table>

<p class="noindent">Either will create a subdirectory name
<samp><span class="file">LiS-2.18.4.rc2</span></samp>
containing all of the files and subdirectories for the
<samp><span class="command">LiS</span></samp> package.

<h5 class="subsubheading">Configuration</h5>

<p>To configure and install the tar ball, See <a href="#Configuring-the-Tar-Ball">Configuring the Tar Ball</a>.

<!--  -->
<p><a name="Downloading-from-CVS"></a>

<h4 class="subsection">6.1.6 Downloading from CVS</h4>

<p><a name="index-checkout_002c-cvs-232"></a><a name="index-cvs-233"></a>
If you are a subscriber or sponsor of <a href="http://www.openss7.org/">The OpenSS7 Project</a> with CVS archive access privileges then you can download release or
mid-release versions of the <samp><span class="file">LiS</span></samp> package from the project
CVS archive.

   <p>The Linux STREAMS (LiS) package is located in the <samp><span class="file">LiS</span></samp>
subdirectory of <samp><span class="file">/var/cvs</span></samp>.  For release tag information, see
<a href="#Releases">Releases</a>.

   <p>To access the archive from the project CVS pserver, use the following commands
to check out a version from the archive:

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<pre class="example">     % export CVSROOT='-d:pserver:<var>username</var>@cvs.openss7.com:2401/var/cvs'
     % cvs login
     Password: *********
     % cvs co -r LiS_2.18.4.rc2 LiS
     % cvs logout
</pre>
   </td></tr></table>

   <p>It is, of course, possible to check out by date or by other criteria.  For more
information, see <a href="*manpages*.html#cvs_00281_0029">cvs(1)</a>.

<h5 class="subsubheading">Preparing the CVS Working Directory</h5>

<p>Although public releases of the <samp><span class="file">LiS</span></samp> package do not
require reconfiguration, creating a configurable directory from the CVS archive
requires tools not normally distributed with the other releases.

   <p>The build host requires the following GNU tools:

     <ul>
<li><samp><span class="command">autoconf 2.59</span></samp>
<li><samp><span class="command">automake 1.9.6</span></samp>
<li><samp><span class="command">libtool 1.5.22</span></samp>
<li><samp><span class="command">gettext 0.14.5</span></samp>
</ul>

   <p>It should be stressed that, in particular, the <samp><span class="command">autoconf</span></samp> and
<samp><span class="command">automake</span></samp> must be at version releases <samp><span class="command">2.59</span></samp> and <samp><span class="command">1.9</span></samp>. 
<em>The versions normally distributed in mainstream GNU/Linux distributions
are, in fact, much older than these versions.</em><a rel="footnote" href="#fn-21" name="fnd-21"><sup>21</sup></a>  GNU version of these packages configured and installed to default
directories will install in <samp><span class="file">/usr/local/</span></samp> allowing them to coexist with
distribution installed versions.

   <p>For building documentation, the build host also requires the following
documentation tools:

     <ul>
<li><samp><span class="command">gs 8.15</span></samp>
<li><samp><span class="command">tetex 3.0</span></samp>
<li><samp><span class="command">texinfo 4.8</span></samp>
<li><samp><span class="command">transfig 3.2.5</span></samp>
<li><samp><span class="command">imagemagick 6.2.4</span></samp>
<li><samp><span class="command">groff 1.17.2</span></samp>
</ul>

   <p>Most desktop GNU/Linux distributions will have these tools; however, some
server-style installations (e.g. <cite>Ubuntu</cite>-server) will not and they must
be installed separately.

   <p>For uncooked manual pages, the entire <samp><span class="command">groff</span></samp> package is required on
<cite>Debian</cite> and <cite>Ubuntu</cite> systems (the base package does not include
grefer which is used extensively by uncooked manual pages).  The following will
get what you need:

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<pre class="example">     Debian: % apt-get install groff_ext
     Ubuntu: % apt-get install groff
</pre>
   </td></tr></table>

   <p>In addition, the build host requires a complete tool chain for compiling for the
target host, including kernel tools such as <samp><span class="command">genksyms</span></samp> and others.

   <p>If you wish to package rpms on an <samp><span class="command">rpm</span></samp> system, or debs on a
<samp><span class="command">dpkg</span></samp> system, you will need the appropriate tool chain.  Systems based
on <samp><span class="command">rpm</span></samp> typically have the necessary toolchain available, however,
<samp><span class="command">dpkg</span></samp> systems do not.  The following on a <cite>Debian</cite> or
<cite>Ubuntu</cite> system will get what you need:

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<pre class="example">     % apt-get install debhelper
     % apt-get install fakeroot
</pre>
   </td></tr></table>

   <p>To generate a configuration script and the necessary scriptlets required by the
GNU <samp><span class="command">autoconf</span></samp> system, execute the following commands on the working
directory:

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<pre class="example">     % autoreconf -fiv LiS
</pre>
   </td></tr></table>

<p class="noindent">where, <samp><span class="file">LiS</span></samp> is the name of the directory to where the working
copy was checked out under the previous step.  This command generates the
<samp><span class="command">configure</span></samp> script and other missing pieces that are normally
distributed with the release Tar Balls, SRPMs and DSCs.

   <p>Make sure that `<samp><span class="samp">autoreconf --version</span></samp>' returns `<samp><span class="samp">2.59</span></samp>'.  Otherwise, you
may need to perform something like the following:

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<pre class="example">     % PATH="/usr/local/bin:$PATH"
     % autoreconf -fiv LiS
</pre>
   </td></tr></table>

<p class="noindent">After reconfiguring the directory, the package can then be configured and built
using the same instructions as are used for the Tar Ball, see <a href="#Configuring-the-Tar-Ball">Configuring the Tar Ball</a>, and <a href="#Building-from-the-Tar-Ball">Building from the Tar Ball</a>.

   <p>Do note, however, that <samp><span class="command">make</span></samp> will rebuild the documentation that is
normally released with the package.  Additional tools may be necessary for
building the documentation.

   <p>When configuring the package in a working directory and while working a
change-compile-test cycle that involves configuration macros or documentation, I
find it of great advantage to invoke the GNU <samp><span class="command">configure</span></samp> options
<samp><span class="command">--enable-maintainer-mode</span></samp> and <samp><span class="command">--enable-dependency-tracking</span></samp>. 
The first of these two options will add maintainer-specific targets to any
generated <samp><span class="file">Makefile</span></samp>, and the later will invoke automatic dependency
tracking within the <samp><span class="file">Makefile</span></samp> so rebuilds after changes to macro, source
or documentation files will be automatically rebuilt.

<!--  -->
<!--  -->
<p><a name="Configuration"></a>

<h3 class="section">6.2 Configuration</h3>

<p><a name="index-configuration-234"></a>

<!--  -->
<p><a name="Configuring-the-Binary-RPM"></a>

<h4 class="subsection">6.2.1 Configuring the Binary RPM</h4>

<p><a name="index-configuring_002c-binary-rpms-235"></a><a name="index-binary-rpms-236"></a>
In general the binary RPM do not require any configuration, however, during
installation it is possible to relocate some of the installation directories. 
This allows some degree of customization.  Relocations that are available on the
binary RPM are as follows:

     <dl>
<dt><samp><span class="file">LiS-core-2.6.17-1.2139_FC5-2.18.4.rc2-1.FC5.i686.rpm</span></samp><dd><a name="index-g_t_0040value_007bPACKAGE_007d_0040_002d_002dcore_0040_002d_002d_0040value_007b_005fkversion_007d_0040_002d_002d_0040value_007bVERSION_007d_0040_002d_002d_0040value_007bPACKAGE_005fRPMRELEASE_007d_0040value_007bPACKAGE_005fRPMEXTRA_007d_0040_002d_002ei686_0040_002d_002erpm-237"></a>
          <dl>
<dt><samp><span class="file">/lib/modules/2.6.17-1.2139_FC5</span></samp><dd>This relocatable directory contains the kernel modules that provide the
LiS core, drivers and modules.<a rel="footnote" href="#fn-22" name="fnd-22"><sup>22</sup></a>
</dl>

     <br><dt><samp><span class="file">LiS-info-2.6.17-1.2139_FC5-2.18.4.rc2-1.FC5.i686.rpm</span></samp><dd><a name="index-g_t_0040value_007bPACKAGE_007d_0040_002d_002dinfo_0040_002d_002d_0040value_007b_005fkversion_007d_0040_002d_002d_0040value_007bVERSION_007d_0040_002d_002d_0040value_007bPACKAGE_005fRPMRELEASE_007d_0040value_007bPACKAGE_005fRPMEXTRA_007d_0040_002d_002ei686_0040_002d_002erpm-238"></a>
          <dl>
<dt><samp><span class="file">/usr/include/LiS/2.6.17-1.2139_FC5</span></samp><dd>This relocatable directory contains the kernel module exported symbol
information that allows other kernel modules to be compiled against the correct
version of the LiS package.<a rel="footnote" href="#fn-23" name="fnd-23"><sup>23</sup></a>
</dl>

     <br><dt><samp><span class="file">LiS-dev-2.18.4.rc2-1.FC5.i686.rpm</span></samp><dd><a name="index-g_t_0040value_007bPACKAGE_007d_0040_002d_002ddev_0040_002d_002d_0040value_007bVERSION_007d_0040_002d_002d_0040value_007bPACKAGE_005fRPMRELEASE_007d_0040value_007bPACKAGE_005fRPMEXTRA_007d_0040_002d_002ei686_0040_002d_002erpm-239"></a>(not relocatable)

     <br><dt><samp><span class="file">LiS-devel-2.18.4.rc2-1.FC5.i686.rpm</span></samp><dd><a name="index-g_t_0040value_007bPACKAGE_007d_0040_002d_002ddevel_0040_002d_002d_0040value_007bVERSION_007d_0040_002d_002d_0040value_007bPACKAGE_005fRPMRELEASE_007d_0040value_007bPACKAGE_005fRPMEXTRA_007d_0040_002d_002ei686_0040_002d_002erpm-240"></a>
          <dl>
<dt><samp><span class="file">/usr/lib</span></samp><dd>This relocatable directory contains LiS libraries. 
<br><dt><samp><span class="file">/usr/include/LiS</span></samp><dd>This relocatable directory contains LiS header files. 
</dl>

     <br><dt><samp><span class="file">LiS-doc-2.18.4.rc2-1.FC5.i686.rpm</span></samp><dd><a name="index-g_t_0040value_007bPACKAGE_007d_0040_002d_002ddoc_0040_002d_002d_0040value_007bVERSION_007d_0040_002d_002d_0040value_007bPACKAGE_005fRPMRELEASE_007d_0040value_007bPACKAGE_005fRPMEXTRA_007d_0040_002d_002ei686_0040_002d_002erpm-241"></a>
          <dl>
<dt><samp><span class="file">/usr/share/doc</span></samp><dd>This relocatable directory contains all package specific documentation
(including this manual).  The subdirectory in this directory is the
<samp><span class="file">LiS-2.18.4.rc2</span></samp> directory. 
<br><dt><samp><span class="file">/usr/share/info</span></samp><dd>This relocatable directory contains info files (including the info version of
this manual). 
<br><dt><samp><span class="file">/usr/share/man</span></samp><dd>This relocatable directory contains manual pages. 
</dl>

     <br><dt><samp><span class="file">LiS-lib-2.18.4.rc2-1.FC5.i686.rpm</span></samp><dd><a name="index-g_t_0040value_007bPACKAGE_007d_0040_002d_002dlib_0040_002d_002d_0040value_007bVERSION_007d_0040_002d_002d_0040value_007bPACKAGE_005fRPMRELEASE_007d_0040value_007bPACKAGE_005fRPMEXTRA_007d_0040_002d_002ei686_0040_002d_002erpm-242"></a>
          <dl>
<dt><samp><span class="file">/usr/lib</span></samp><dd>This relocatable directory contains the run-time shared libraries necessary to
run applications programs and utilities developed for Linux STREAMS (LiS). 
<br><dt><samp><span class="file">/usr/share/locale</span></samp><dd>This relocatable directory contains the locale information for shared library
files. 
</dl>

     <br><dt><samp><span class="file">LiS-source-2.18.4.rc2-1.FC5.i686.rpm</span></samp><dd><a name="index-g_t_0040value_007bPACKAGE_007d_0040_002d_002dsource_0040_002d_002d_0040value_007bVERSION_007d_0040_002d_002d_0040value_007bPACKAGE_005fRPMRELEASE_007d_0040value_007bPACKAGE_005fRPMEXTRA_007d_0040_002d_002ei686_0040_002d_002erpm-243"></a>
          <dl>
<dt><samp><span class="file">/usr/src</span></samp><dd>This relocatable directory contains the source code. 
</dl>

     <br><dt><samp><span class="file">LiS-util-2.18.4.rc2-1.FC5.i686.rpm</span></samp><dd><a name="index-g_t_0040value_007bPACKAGE_007d_0040_002d_002dutil_0040_002d_002d_0040value_007bVERSION_007d_0040_002d_002d_0040value_007bPACKAGE_005fRPMRELEASE_007d_0040value_007bPACKAGE_005fRPMEXTRA_007d_0040_002d_002ei686_0040_002d_002erpm-244"></a>
          <dl>
<dt><samp><span class="file">/usr/bin</span></samp><dd>This relocatable directory contains binary programs and utilities. 
<br><dt><samp><span class="file">/usr/sbin</span></samp><dd>This relocatable directory contains system binary programs and utilities. 
<br><dt><samp><span class="file">/usr/libexec</span></samp><dd>This relocatable directory contains test programs. 
<br><dt><samp><span class="file">/etc</span></samp><dd>This relocatable directory contains init scripts and configuration information. 
</dl>

   </dl>

<h5 class="subsubheading">Installation</h5>

<p>To install the binary RPM, See <a href="#Installing-the-Binary-RPM">Installing the Binary RPM</a>.

<!--  -->
<p><a name="Configuring-the-Debian-DEB"></a>

<h4 class="subsection">6.2.2 Configuring the Debian DEB</h4>

<p><a name="index-configuring_002c-binary-debs-245"></a><a name="index-binary-debs-246"></a>
In general the binary DEB do not require any configuration.

<h5 class="subsubheading">Installation</h5>

<p>To install the Debian DEB, See <a href="#Installing-the-Debian-DEB">Installing the Debian DEB</a>.

<!--  -->
<p><a name="Configuring-the-Source-RPM"></a>

<h4 class="subsection">6.2.3 Configuring the Source RPM</h4>

<p><a name="index-configuring_002c-source-srpm-247"></a><a name="index-source-rpms-248"></a>
When building from the source RPM (see <a href="#Building-from-the-Source-RPM">Building from the Source RPM</a>), the
rebuild process uses a number of macros from the user's <samp><span class="file">.rpmmacros</span></samp> file
as described in <a href="*manpages*.html#rpm_00288_0029">rpm(8)</a>.

   <p>Following is an example of the <samp><span class="file">~/.rpmmacros</span></samp> file that I use for
rebuilding RPMS:

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<pre class="smallexample">     #
     # RPM macros for building rpms
     #
     
     %_topdir /usr/src/openss7.rpms
     
     %vendor OpenSS7 Corporation
     %distribution OpenSS7
     %disturl http://www.openss7.org/
     %packager Brian Bidulock &lt;bidulock@openss7.org&gt;
     %url http://www.openss7.org/
     
     %_signature gpg
     %_gpg_path /home/brian/.gnupg
     %_gpg_name openss7@openss7.org
     %_gpgbin /usr/bin/gpg
     
     %_source_payload w9.bzdio
     %_binary_payload w9.bzdio
     
     %_unpackaged_files_terminate_build 1
     %_missing_doc_files_terminate_build 1
     %_enable_debug_packages 1
     
     #
     # Template for debug information sub-package.
     # with our little addition of release
     #
     %debug_package \
     %ifnarch noarch\
     %global __debug_package 1\
     %package debug\
     Summary: Debug information for package %{name}\
     Group: Development/Debug\
     AutoReqProv: 0\
     %{?fullrelease:Release: %{fullrelease}}\
     %description debug\
     This package provides debug information for package %{name}.\
     Debug information is useful when developing applications that use this\
     package or when debugging this package.\
     %files debug -f debugfiles.list\
     %defattr(-,root,root)\
     %endif\
     %{nil}
     
</pre>
   </td></tr></table>

   <p>When building from the source RPM (see <a href="#Building-from-the-Source-RPM">Building from the Source RPM</a>), it is
possible to pass a number of additional configuration options to the
<samp><span class="command">rpmbuild</span></samp> process.

   <p>The additional configuration options are described below.

   <p>Note that distributions that use older versions of rpm do not have the
`<samp><span class="samp">--with</span></samp>' or `<samp><span class="samp">--without</span></samp>' options defined.  To acheive the same effect
as:
<pre class="example">     --with someparm=somearg
</pre>
   <p>do:
<pre class="example">     --define "_with_someparm --with-someparm=somearg"
</pre>
     <dl>
<dt><code>--define "_kversion $PACKAGE_KVERSION"</code><dd><a name="index-PACKAGE_005fKVERSION-249"></a><a name="index-k_002drelease-250"></a>Specifies the kernel version other than the running kernel for which to build. 
If <samp><span class="command">_kversion</span></samp> is not defined when rebuilding, the environment variable
<var>PACKAGE_KVERSION</var> is used.  If the environment variable
<var>PACKAGE_KVERSION</var> is not defined, then the version of the running kernel
(i.e. discovered with `<samp><span class="samp">uname -r</span></samp>') is used as the target version for
kernel-dependent packages.  This option can also be defined in an
<samp><span class="file">.rpmspec</span></samp> file using the macro name `<samp><span class="samp">_kversion</span></samp>'.

     <br><dt><code>--with checks</code><dt><code>--without checks</code><dd><a name="index-checks-251"></a>Enable or disable preinstall checks.  Each packages supports a number of
preinstall checks that can be performed by invoking the `<samp><span class="samp">check</span></samp>' target with
<samp><span class="command">make</span></samp>.  These currently consist of checking each kernel module for
unresolved kernel symbols, checking for documentation for exported kernel module
symbols, checking for documentation for exported library symbols, checking for
standard options for build and installable programs, checking for documentation
for built and installable programs.  Normally these checks are only run in
maintainer mode, but can be enabled and disabled with this option.

     <br><dt><code>--with k-optimize=HOW</code><dt><code>--without k-optimize</code><dd><a name="index-k_002doptimize-252"></a>Specify `<samp><span class="samp">HOW</span></samp>' optimization, <var>normal</var>, <var>size</var>, <var>speed</var> or
<var>quick</var>.  <var>size</var> compiles kernel modules <code>-Os</code>, <var>speed</var>
compiles kernel modules <code>-O3</code>, and <var>quick</var> compiles kernel modules
<code>-O0</code>.  The default is <var>normal</var>.  Use with care.

     <br><dt><code>--with cooked-manpages</code><dt><code>--without cooked-manpages</code><dd><a name="index-cooked_002dmanpages-253"></a>Some systems do not like <samp><span class="command">grefer</span></samp> references in manpages.<a rel="footnote" href="#fn-24" name="fnd-24"><sup>24</sup></a>  This option will cook
<samp><span class="command">soelim</span></samp>, <samp><span class="command">refer</span></samp>, <samp><span class="command">tbl</span></samp> and <samp><span class="command">pic</span></samp> commands from
the manpages and also strip <samp><span class="command">groff</span></samp> comments.  The default is to leave
manpages uncooked: they are actually smaller that way.

     <br><dt><code>--with public</code><dt><code>--without public</code><dd><a name="index-public-254"></a>Release public packages or private packages.  This option has no effect on the
<samp><span class="file">LiS</span></samp> package.  The default is to release public packages.

     <br><dt><code>--with k-debug</code><dt><code>--without k-debug</code><dd><a name="index-k_002ddebug-255"></a>Specifies whether kernel debugging is to be performed on the build kernel
modules.  Mutually exclusive with <code>test</code> and <code>safe</code> below.  This has
the effect of removing static and inline attributes from functions and invoking
all debugging macros in the code.  The default is to not perform kernel
debugging.

     <br><dt><code>--with k-test</code><dt><code>--without k-test</code><dd><a name="index-k_002dtest-256"></a>Specifies whether kernel testing is to be performed.  Mutually exclusive with
<code>debug</code> above and <code>safe</code> below.  This has the effect of removing
static and inline attributes from functions and invoking most debugging macros
in the code.  The default is to not perform kernel testing.

     <br><dt><code>--with k-safe</code><dt><code>--without k-safe</code><dd><a name="index-k_002dsafe-257"></a>Specifies whether kernel saftey is to be performed.  Mutually exclusive with
<code>debug</code> and <code>test</code> above.  This has the effect of invoking some more
pedantic assertion macros in the code.  The default is not to apply kernel
safety.

     <br><dt><code>--with k-inline</code><dt><code>--without k-inline</code><dd><a name="index-k_002dinline-258"></a>Specifies whether kernel <code>inline</code> functions are to be place inline.  This
has the effect of adding the <samp><span class="command">-finline-functions</span></samp> flag to <var>CFLAGS</var>
for compiling kernel modules.  Linux 2.4 kernels are normally compiled
<samp><span class="command">-O2</span></samp> which does not respect the <code>inline</code> directive.  This compiles
kernel modules with <samp><span class="command">-finline-functions</span></samp> to get closer to <samp><span class="command">-O3</span></samp>
optimization.  For better optimization controls, See <a href="#Configuring-the-Tar-Ball">Configuring the Tar Ball</a>.

     <br><dt><code>--with k-modversions</code><dt><code>--without k-modversions</code><dd><a name="index-k_002dmodversions-259"></a>Specifies whether kernel symbol versioning is to be applied to symbols exported
by package kernel modules.  The default is to version exported module symbols. 
This package does not export symbols so this option has no effect.

     <br><dt><code>--with devfs</code><dt><code>--without devfs</code><dd>Specifies whether the build is for a device filesystem daemon enabled system
with autoloading, or not.  The default is to build for devfsd autoloading when
CONFIG_DEVFS_FS is defined in the target kernel.  The <samp><span class="command">reuild</span></samp> target
uses this option to signal to the RPM spec file that the `<samp><span class="samp">dev</span></samp>' subpackage
need not be built.  This option does not appear when the package has no devices.

     <br><dt><code>--with devel</code><dt><code>--without devel</code><dd><a name="index-devel-260"></a>Specifies whether to build development environment packages such as those that
include header files, static libraries, manual pages and texinfo
documentation.  The default is to build development environment packages. 
This option can be useful when building for an embedded target where only the
runtime components are desired.

     <br><dt><code>--with tools</code><dt><code>--without tools</code><dd><a name="index-tools-261"></a>Specifies whether user space packages are to be built.  The default is to build
user space packages.  This option can be useful when rebuilding for multiple
architectures and target kernels.  The <samp><span class="command">rebuild</span></samp> automake target uses
this feature when rebuilding for all available architectures and kernels, to
rebuild user packages once per architecture instead of once per kernel.

     <br><dt><code>--with modules</code><dt><code>--without modules</code><dd><a name="index-modules-262"></a>Specifies whether kernel modules packages are to be built.  The default is to
build kernel module packages.  This option can be useful when rebuilding for
multiple architectures and target kernels.  The <samp><span class="command">rebuild</span></samp> automake
target uses this feature to rebuild for all available architectures and kernels.

   </dl>

<!-- *- texinfo -*- vim: ft=texinfo -->
<!-- ========================================================================= -->
<!-- @(#) rpm.texi,v 1.1.4.5 2005/12/30 12:21:17 brian Exp -->
<!-- ========================================================================= -->
<!-- Copyright (C) 2001-2004  OpenSS7 Corporation <www.openss7.com> -->
<!-- All Rights Reserved. -->
<!-- Permission is granted to make and distribute verbatim copies of this -->
<!-- manual provided the copyright notice and this permission notice are -->
<!-- preserved on all copies. -->
<!-- Permission is granted to copy and distribute modified versions of this -->
<!-- manual under the conditions for verbatim copying, provided that the -->
<!-- entire resulting derived work is distributed under the terms of a -->
<!-- permission notice identical to this one -->
<!-- Since the Linux kernel and libraries are constantly changing, this -->
<!-- manual page may be incorrect or out-of-date.  The author(s) assume no -->
<!-- responsibility for errors or omissions, or for damages resulting from -->
<!-- the use of the information contained herein.  The author(s) may not -->
<!-- have taken the same level of care in the production of this manual, -->
<!-- which is licensed free of charge, as they might when working -->
<!-- professionally. -->
<!-- Formatted or processed versions of this manual, if unaccompanied by -->
<!-- the source, must acknowledge the copyright and authors of this work. -->
<!--  -->
<!-- U.S. GOVERNMENT RESTRICTED RIGHTS.  If you are licensing this Software -->
<!-- on behalf of the U.S. Government ("Government"), the following -->
<!-- provisions apply to you.  If the Software is supplied by the Department -->
<!-- of Defense ("DoD"), it is classified as "Commercial Computer Software" -->
<!-- under paragraph 252.227-7014 of the DoD Supplement to the Federal -->
<!-- Acquisition Regulations ("DFARS") (or any successor regulations) and the -->
<!-- Government is acquiring only the license rights granted herein (the -->
<!-- license rights customarily provided to non-Government users).  If the -->
<!-- Software is supplied to any unit or agency of the Government other than -->
<!-- DoD, it is classified as "Restricted Computer Software" and the -->
<!-- Government's rights in the Software are defined in paragraph 52.227-19 -->
<!-- of the Federal Acquisition Regulations ("FAR") (or any successor -->
<!-- regulations) or, in the cases of NASA, in paragraph 18.52.227-86 of the -->
<!-- NASA Supplement to the FAR (or any successor regulations). -->
<!-- ========================================================================= -->
<!-- Commercial licensing and support of this software is available from -->
<!-- OpenSS7 Corporation at a fee.  See http://www.openss7.com/ -->
<!-- ========================================================================= -->
<!-- Last Modified 2005/12/30 12:21:17 by brian -->
<!-- ========================================================================= -->
<p>In addition, the following <samp><span class="command">rpm</span></samp> options, specific to the
Linux STREAMS (LiS) package are available:

     <dl>
<dt><samp><span class="command">--with broken-cpu-flags</span></samp><dd><a name="index-broken_002dcpu_002dflags-263"></a>Specify <code>int</code> instead of <code>long</code> interrupt flags.  Linux uses <code>long</code> interrupt flags
exclusively.  The default is to use <code>long</code> interrupt flags.  This option defaults to
`<samp><span class="samp">disabled</span></samp>'.

     <br><dt><samp><span class="command">--without lis-development</span></samp><dd><a name="index-lis_002ddevelopment-264"></a>This option is new to <cite>LiS-2.18.2</cite>. 
Disable reporting of source code path traces in debug logs.  Linux STREAMS (LiS) passes file name
and line number arguments to many of the exported functions.  This is exhaustive of stack resources
and requires the passing of more than three arguments on the stack in many circumnstances.  Note
that disabling code path traces breaks binary compatibility.  The default is perform source code
path traces, unless optimized for size or speed, in which case, the default is to not perform source
code path traces.  This option defaults to `<samp><span class="samp">enabled</span></samp>'.

     <br><dt><samp><span class="command">--with k-timers</span></samp><dd><a name="index-k_002dtimers-265"></a>Invoke Linux kernel cahcing on timer structures.  This increases speed and efficiency but is unsafe
on SMP architectures and for buggy drivers.  The default is to perform kernel caching on timer
structures.  This option defaults to `<samp><span class="samp">disabled</span></samp>'.

     <br><dt><samp><span class="command">--with k-cache</span></samp><dd><a name="index-k_002dcache-266"></a>Invoke Linux kernel caching on primary structures.  This incresase speed and efficiency.  The
default is to perform kernel caching on primary structures.  This option defaults to
`<samp><span class="samp">disabled</span></samp>'.

     <br><dt><samp><span class="command">--with atomic-stats</span></samp><dd><a name="index-atomic_002dstats-267"></a>Specify <code>atomic_t</code> element types for elements of the <code>module_stat</code> structure instead of
<code>int</code> element types.  The default is to use <code>int</code> elements types for the
<code>module_stat</code> structure.  This option defaults to `<samp><span class="samp">disabled</span></samp>'.

     <br><dt><samp><span class="command">--with lis-regparms=NUMBER</span></samp><dt><samp><span class="command">--without lis-regparms</span></samp><dd><a name="index-lis_002dregparms-268"></a>This option is new to <cite>LiS-2.18.2</cite>. 
Specifies the number of parameters to pass in registers to Linux STREAMS (LiS) exported functions. 
Specifying other than `<samp><span class="samp">0</span></samp>' here may break binary compatibility.  Specifying
`<samp><span class="samp">--without lis-regparms</span></samp>' will default to the number used for kernel exported functions. 
Specifying greater than `<samp><span class="samp">3</span></samp>' will cause the build to fail.  The default is to pass no arguments
in registers.  This option defaults to `<samp><span class="samp">0</span></samp>'.

     <br><dt><samp><span class="command">--without solaris-consts</span></samp><dd><a name="index-solaris_002dconsts-269"></a>Attempt to be compatible with Solaris constants.  The default is to attempt to be compatible with
Solaris constants.  This option defaults to `<samp><span class="samp">enabled</span></samp>'.

     <br><dt><samp><span class="command">--without solaris-cmn_err</span></samp><dd><a name="index-solaris_002dcmn_005ferr-270"></a>Specifies whether Solaris-style <code>cmn_err</code> is used.  The Solaris style prints a newline at the
end of each statement.  The SVR 4.2 style prints a newline at the beginning of each statement unless
<code>CE_CONT</code> is specified.  Linux kernel logs use the former, so this defaults to Solaris-style. 
This option defaults to `<samp><span class="samp">enabled</span></samp>'.

   </dl>

   <p>In general, the default values of these options are sufficient for most purposes
and no options need be provided when rebuilding the Source RPMs.

<h5 class="subsubheading">Build</h5>

<p>To build from the source RPM, See <a href="#Building-from-the-Source-RPM">Building from the Source RPM</a>.

<!--  -->
<p><a name="Configuring-the-Debian-DSC"></a>

<h4 class="subsection">6.2.4 Configuring the Debian DSC</h4>

<p><a name="index-configuring_002c-source-dscs-271"></a><a name="index-source-dscs-272"></a>
The Debian DSC can be configured by passing options in the environment variable
<var>BUILD_DEBOPTIONS</var>.  The options placed in this variable take the same form
as those passed to the <samp><span class="command">configure</span></samp> script, See <a href="#Configuring-the-Tar-Ball">Configuring the Tar Ball</a>.  For an example, See <a href="#Building-from-the-Debian-DSC">Building from the Debian DSC</a>.

<h5 class="subsubheading">Build</h5>

<p>To build from the Debian DSC, See <a href="#Building-from-the-Debian-DSC">Building from the Debian DSC</a>.

<!--  -->
<p><a name="Configuring-the-Tar-Ball"></a>

<h4 class="subsection">6.2.5 Configuring the Tar Ball</h4>

<p><a name="index-configuring_002c-tar-ball-273"></a><a name="index-tar-ball-274"></a>
All of the normal GNU <samp><span class="command">autoconf</span></samp> configuration options and environment
variables apply.  Additional options and environment variables are provided to
tailor or customize the build and are described below.

<!--  -->
<p><a name="Configure-Options"></a>

<h5 class="subsubsection">6.2.5.1 Configure Options</h5>

<p><a name="index-configure-options-275"></a>

   <p>Following are the additional <samp><span class="command">configure</span></samp> options, their meaning and use:

     <dl>
<dt><samp><span class="command">--enable-checks</span></samp><dt><samp><span class="command">--disable-checks</span></samp><dd><a name="index-checks-276"></a>Enable or disable preinstall checks.  Each packages supports a number of
preinstall checks that can be performed by invoking the `<samp><span class="samp">check</span></samp>' target with
<samp><span class="command">make</span></samp>.  These currently consist of checking each kernel module for
unresolved kernel symbols, checking for documentation for exported kernel module
symbols, checking for documentation for exported library symbols, checking for
standard options for build and installable programs, checking for documentation
for built and installable programs.  Normally these checks are only run in
maintainer mode, but can be enabled and disabled with this option.

     <br><dt><samp><span class="command">--disable-compress-manpages</span></samp><dd><a name="index-compress_002dmanpages-277"></a>Compress manpages with `<samp><span class="samp">gzip -9</span></samp>' or `<samp><span class="samp">bzip2 -9</span></samp>' or leave them
uncompressed.  The default is to compress manpages with `<samp><span class="samp">gzip -9</span></samp>'
or `<samp><span class="samp">bzip2 -9</span></samp>' if a single compressed manpage exists in the target
installation directory (<samp><span class="command">--mandir</span></samp>).  This disables automatic
compression.

     <br><dt><samp><span class="command">--disable-public</span></samp><dd><a name="index-public-278"></a>Disable public release.  Has no effect on the <samp><span class="file">LiS</span></samp> release. 
No private components exist in <samp><span class="file">LiS</span></samp> releases.

     <br><dt><samp><span class="command">--disable-initscripts</span></samp><dd><a name="index-initscripts-279"></a>Disables the installation of init scripts. 
The default is to configure and install init scripts and their associated
configuration files.

     <br><dt><samp><span class="command">--disable-devel</span></samp><dd><a name="index-devel-280"></a>Disables the installation of development environment components such as
header files, static libraries, manual pages and texinfo documentation.  The
default is to install development environment components.  This option can be
useful when configuring for an embedded target where only the runtime
components are desired.

     <br><dt><samp><span class="command">--enable-tools</span></samp><dd><a name="index-tools-281"></a>Specifies whether user space programs and libraries are to be built and
installed.  The default is to build and install user space programs and
libraries.  This option can be useful when rebuilding for multiple architectures
and target kernels, particularly under rpm.  The <samp><span class="command">rebuild</span></samp> target uses
this feature when rebuilding RPMs for all available architectures and kernels,
to rebuild user packages once per architecture instead of once per kernel.

     <br><dt><samp><span class="command">--enable-modules</span></samp><dd><a name="index-modules-282"></a>Specifies whether kernel modules are to be built and installed.  The default is
to build and install kernel modules.  This option can be useful when rebuilding
for multiple architectures and target kernels, particularly under rpm.  The
<samp><span class="command">rebuild</span></samp> automake target uses this feature to rebuild for all available
architectures and kernels.

     <br><dt><samp><span class="command">--enable-arch</span></samp><dd><a name="index-arch-283"></a>Specifies whether architectural dependent package components are to be built and
installed.  This option can be useful when rebuilding for multiple architectures
and target kernels, particularly under dpkg.  The default is to configure, build
and install architecture dependent package components.

     <br><dt><samp><span class="command">--enable-indep</span></samp><dd><a name="index-indep-284"></a>Specifies whether architecture independent package components are to be built
and installed.  This option can be useful when rebuilding for multiple
architectures and target kernels, particularly under dpkg.  The default is to
configure, build and install architecture independent package components.

     <br><dt><samp><span class="command">--enable-k-inline</span></samp><dd><a name="index-k_002dinline-285"></a>Enable kernel inline functions.  Most Linux kernels build without
<samp><span class="command">-finline-functions</span></samp>.  This option adds the <samp><span class="command">-finline-functions</span></samp>
and <samp><span class="command">-Winline</span></samp> flags to the compilation of kernel modules.  Use with
care.

     <br><dt><samp><span class="command">--enable-k-safe</span></samp><dd><a name="index-k_002dsafe-286"></a>Enable kernel module run-time safety checks.  Specifies whether kernel safety is
to be performed.  This option is mutually exclusive with
<samp><span class="command">--enable-k-test</span></samp> and <samp><span class="command">--enable-k-debug</span></samp> below.  This has the
effect of invoking some more pedantic assertion macros in the code.  The default
is not to apply kernel safety.

     <br><dt><samp><span class="command">--enable-k-test</span></samp><dd><a name="index-k_002dtest-287"></a>Enable kernel module run-teim testing.  Specifies whether kernel testing is to
be performed.  This option is mutually exclusive with <samp><span class="command">--enable-k-safe</span></samp>
above and <samp><span class="command">--enable-k-debug</span></samp> below.  This has the effect of remove
<code>static</code> and <code>inline</code> attributes from functions and invoking most
non-performance affecting debugging macros in the code.  The default is not to
perform kernel testing.

     <br><dt><samp><span class="command">--enable-k-debug</span></samp><dd><a name="index-k_002ddebug-288"></a>Enable kernel module run-time debugging.  Specifies whether kernel debugging is
to be performed.  This option is mutuallly exclusive with
<samp><span class="command">--enable-k-safe</span></samp> and <samp><span class="command">--enable-k-test</span></samp> above.  This has the
effect of removing <code>static</code> and <code>inline</code> attributes from functions and
invoking all debuggin macros in the code (including performance-affecting debug
macros).  The default is to not perform kernel debugging.

     <br><dt><samp><span class="command">--enable-devfs</span></samp><dt><samp><span class="command">--disable-devfs</span></samp><dd><a name="index-devfs-289"></a>Specifies whether the build is for a device filesystem daemon enabled system
with autoloading, or not.  The default is to build for devfsd autoloading when
CONFIG_DEVFS_FS is defined in the target kernel.  The <samp><span class="command">reuild</span></samp> target
uses this option to signal to the RPM spec file that the `<samp><span class="samp">dev</span></samp>' subpackage
need not be built.  This option does not appear when the package has no devices.

     <br><dt><samp><span class="command">--with-gpg-user=GNUPGUSER</span></samp><dd><a name="index-gpg_002duser-290"></a>Specify the <samp><span class="command">gpg</span></samp> `<samp><span class="samp">GNUPGUSER</span></samp>' for signing RPMs and tarballs.  The
default is the content of the environment variable <var>GNUPGUSER</var>.  If
unspecified, the <samp><span class="command">gpg</span></samp> program will normally use the user name of the
account invoking the <samp><span class="command">gpg</span></samp> program.  For building source RPMs, the RPM
macro `<samp><span class="samp">_gpg_name</span></samp>' will override this setting.

     <br><dt><samp><span class="command">--with-gpg-home=GNUPGHOME</span></samp><dd><a name="index-gpg_002dhome-291"></a>Specify the `<samp><span class="samp">GNUPGHOME</span></samp>' directory for signing RPMs and tarballs.  The
default is the user's <samp><span class="file">~/.gpg</span></samp> directory.  For building source RPMs, the
RPM macro `<samp><span class="samp">_gpg_path</span></samp>' will override this setting.

     <br><dt><samp><span class="command">--with-pkg-epoch=EPOCH</span></samp><dd><a name="index-pkg_002depoch-292"></a>Specifies the epoch for the package.  This is neither used for RPM nor Debian
packages, it applies to the tarball release as a whole.  The default is the
contents of the <samp><span class="file">.pkgepoch</span></samp> file in the source directory or, if that file
does not exist, zero (0).

     <br><dt><samp><span class="command">--with-pkg-release=RELEASE</span></samp><dd><a name="index-pkg_002drelease-293"></a>Specifies the release for the package.  This is neither used for RPM nor Debian
packages, it applies to the tarball release as a whole.  The default is the
contents of the <samp><span class="file">.pkgrelease</span></samp> file in the source directory or, if that file
does not exist, one (1).  This is the number after the last point in ther
package version number.

     <br><dt><samp><span class="command">--with-pkg-distdir=DIR</span></samp><dd><a name="index-pkg_002ddistdir-294"></a>Specifies the distribution directory for the package.  This is used by the
maintainer for building distributions of tarballs.  This is the directory into
which archives are copied for distribution.  The default is the top build
directory.

     <br><dt><samp><span class="command">--with-cooked-manpages</span></samp><dd><a name="index-cooked_002dmanpages-295"></a>Convert manual pages to remove macro dependencies and <samp><span class="command">grefer</span></samp>
references.  Some systems do not like <samp><span class="command">grefer</span></samp> references in
manpages.<a rel="footnote" href="#fn-25" name="fnd-25"><sup>25</sup></a>
This option will cook <samp><span class="command">soelim</span></samp>, <samp><span class="command">refer</span></samp>, <samp><span class="command">tbl</span></samp> and
<samp><span class="command">pic</span></samp> commands from the manpages and also strip <samp><span class="command">groff</span></samp>
comments.  The default is to leave manpages uncooked (they are actually smaller
that way).

     <br><dt><samp><span class="command">--with-rpm-epoch=PACKAGE_EPOCH</span></samp><dd><a name="index-rpm_002depoch-296"></a>Specify the `<samp><span class="samp">PACKAGE_EPOCH</span></samp>' for the RPM spec file.  The default is to use
the RPM epoch conatined in the file <samp><span class="file">.rpmepoch</span></samp>.

     <br><dt><samp><span class="command">--with-rpm-release=PACKAGE_RPMRELEASE</span></samp><dd><a name="index-rpm_002drelease-297"></a>Specify the `<samp><span class="samp">PACKAGE_RPMRELEASE</span></samp>' for the RPM rspec file.  The default is to
use the RPM release contained in the file <samp><span class="file">.rpmrelease</span></samp>.

     <br><dt><samp><span class="command">--with-rpm-extra=PACKAGE_RPMEXTRA</span></samp><dd><a name="index-rpm_002dextra-298"></a>Specify the `<samp><span class="samp">PACKAGE_RPMEXTRA</span></samp>' extra release information for the RPM spec
file.  The default is to use the RPM extra release information contained in the
file <samp><span class="file">.rpmextra</span></samp>.  Otherwise, this value will be determined from automatic
detection of the RPM distribution.

     <br><dt><samp><span class="command">--with-rpm-topdir=PACKAGE_RPMTOPDIR</span></samp><dd><a name="index-rpm_002dtopdir-299"></a>Specify the `<samp><span class="samp">PACKAGE_RPMTOPDIR</span></samp>' top directory for RPMs.  If specified
with a null `<samp><span class="samp">PACKAGE_RPMTOPDIR</span></samp>', the default directory for the RPM
distribution will be used.  If this option is not provided on the command line,
the top build directory will be used as the RPM top directory as well.

     <br><dt><samp><span class="command">--with-deb-epoch=EPOCH</span></samp><dd><a name="index-deb_002depoch-300"></a>Specify the `<samp><span class="samp">PACKAGE_DEBEPOCH</span></samp>' for the DEB control file.  The default is to
use the DEB epoch contained int he file <samp><span class="file">.debepoch</span></samp>.

     <br><dt><samp><span class="command">--with-deb-release=RELEASE</span></samp><dd><a name="index-deb_002drelease-301"></a>Specify the `<samp><span class="samp">PACKAGE_DEBRELEASE</span></samp>' for the DEB control file.  The default is to
use the DEB release contained in the file <samp><span class="file">.debrelease</span></samp>.

     <br><dt><samp><span class="command">--with-deb-topdir=DIR</span></samp><dd><a name="index-deb_002dtopdir-302"></a>Specify the `<samp><span class="samp">PACKAGE_DEBTOPDIR</span></samp>' top directory for DEBs.  If specified
with a null `<samp><span class="samp">PACKAGE_DEBTOPDIR</span></samp>', the default directory for the DEB
distribution will be used.  If this option is not provided on the command line,
the top build directory will be used as the DEB top directory as well.

     <br><dt><samp><span class="command">--with-k-release=PACKAGE_KRELEASE</span></samp><dd><a name="index-k_002drelease-303"></a>Specify the `<samp><span class="samp">PACKAGE_KRELEASE</span></samp>' release of the Linux kernel for which the
build is targeted.  When not cross compiling, if this option is not set, the
build will be targeted at the kernel running in the build environment (e.g.,
`<samp><span class="samp">uname -r</span></samp>').  When cross-compiling this option must be specified or the
configure script will generate an error and terminate.

     <br><dt><samp><span class="command">--with-k-linkage=PACKAGE_KLINKAGE</span></samp><dd><a name="index-k_002dlinkage-304"></a>Specify the `<samp><span class="samp">PACKAGE_KLINKAGE</span></samp>' for kernel module linkage.  This can be one
of the following:
          <ul>
<li>`<samp><span class="samp">loadable</span></samp>'
&ndash; loadable kernel modules
<li>`<samp><span class="samp">linkable</span></samp>'
&ndash; linkable kernel objects
</ul>
     The default is to build loadable kernel modules.

     <br><dt><samp><span class="command">--with-k-modules=K-MODULES-DIR</span></samp><dd><a name="index-k_002dmodules-305"></a>Specify the `<samp><span class="samp">K-MODULES-DIR</span></samp>' directory to which kernel modules will be
installed.  The default is based on the option <samp><span class="command">--with-k-release</span></samp>,
<samp><span class="command">--with-k-prefix</span></samp> and <samp><span class="command">--with-k-rootdir</span></samp>.  The default is
<samp><span class="file">DESTDIR</span></samp>/<samp><span class="file">K-MODULES-DIR</span></samp> which is typically
<samp><var>DESTDIR</var><span class="file">/lib/modules/</span><var>PACKAGE_KRELEASE</var><span class="file">/</span></samp>.  This directory is
normally located by the <samp><span class="command">configure</span></samp> script and need only be provided for
special cross-build environments or when requested by a <samp><span class="command">configure</span></samp>
script error message.

     <br><dt><samp><span class="command">--with-k-build=K-BUILD-DIR</span></samp><dd><a name="index-k_002dbuild-306"></a>Specify the `<samp><span class="samp">K-BUILD-DIR</span></samp>' base kernel build directory in which configured
kernel source resides.  The default is
<samp><var>DESTDIR</var><span class="file">/</span><var>K-MODULES-DIR</var><span class="file">/build</span></samp>.  This directory is normally
located by the <samp><span class="command">configure</span></samp> script and need only be provided for special
cross-build environments or when requested by a <samp><span class="command">configure</span></samp> script error
message.

     <br><dt><samp><span class="command">--with-k-source=K-SOURCE-DIR</span></samp><dd><a name="index-k_002dbuild-307"></a>Specify the `<samp><span class="samp">K-SOURCE-DIR</span></samp>' base kernel build directory in which configured
kernel source resides.  The default is
<samp><var>DESTDIR</var><span class="file">/</span><var>K-MODULES-DIR</var><span class="file">/source</span></samp>.  This directory is normally
located by the <samp><span class="command">configure</span></samp> script and need only be provided for special
cross-build environments or when requested by a <samp><span class="command">configure</span></samp> script error
message.

     <br><dt><samp><span class="command">--with-k-modver=K-MODVER-FILE</span></samp><dd><a name="index-k_002dsysmap-308"></a>Specify the `<samp><span class="samp">K-MODVER-FILE</span></samp>' kernel module versions file.  The default is
<samp><var>K-BUILD-DIR</var><span class="file">/Module.symvers</span></samp>.  This file is normally located by the
<samp><span class="command">configure</span></samp> script and need only be provided for special cross-build
environments or when requested by a <samp><span class="command">configure</span></samp> script error message.

     <br><dt><samp><span class="command">--with-k-sysmap=K-SYSMAP-FILE</span></samp><dd><a name="index-k_002dsysmap-309"></a>Specify the `<samp><span class="samp">K-SYSMAP-FILE</span></samp>' kernel system map file.  The default is
<samp><var>K-BUILD-DIR</var><span class="file">/System.map</span></samp>.  This file is normally located by the
<samp><span class="command">configure</span></samp> script and need only be provided for special cross-build
environments or when requested by a <samp><span class="command">configure</span></samp> script error message.

     <br><dt><samp><span class="command">--with-k-archdir=K-ARCHDIR</span></samp><dd><a name="index-k_002darchdir-310"></a>Specify the `<samp><span class="samp">K-ARCHDIR</span></samp>' kernel source architecture specific directory.  The
default is <samp><var>DESTDIR</var><span class="file">/</span><var>K-SOURCE-DIR</var><span class="file">/arch</span></samp>.  This directory is
normally located by the <samp><span class="command">configure</span></samp> script and need only be provided for
special cross-build environments or when requested by a <samp><span class="command">configure</span></samp>
script error message.

     <br><dt><samp><span class="command">--with-k-machdir=K-MACHDIR</span></samp><dd><a name="index-k_002dmachdir-311"></a>Specify the `<samp><span class="samp">K-MACHDIR</span></samp>' kernel source machine specific directory.  The
default is <samp><var>DESTDIR</var><span class="file">/</span><var>K-SOURCE-DIR</var><span class="file">/</span><var>target_cpu</var></samp>.  This
directory is normally located by the <samp><span class="command">configure</span></samp> script and need only be
provided for special cross-build environments or when requested by a
<samp><span class="command">configure</span></samp> script error message.

     <br><dt><samp><span class="command">--with-k-config=K-CONFIG</span></samp><dd><a name="index-k_002dconfig-312"></a>Specify the `<samp><span class="samp">K-CONFIG</span></samp>' kernel configuration file.  The default is
<samp><var>BOOT</var><span class="file">/config-</span><var>K-RELEASE</var></samp>.  This configuration file is normally
located by the <samp><span class="command">configure</span></samp> script and need only be provided forspecial
cross-build environments or when requested by a <samp><span class="command">configure</span></samp> script error
message.

     <br><dt><samp><span class="command">--with-k-optimize=HOW</span></samp><dt><samp><span class="command">--without-k-optimize</span></samp><dd><a name="index-k_002doptimize-313"></a>Specify `<samp><span class="samp">HOW</span></samp>' optimization, <var>normal</var>, <var>size</var>, <var>speed</var> or
<var>quick</var>.  <var>size</var> compiles kernel modules <code>-Os</code>, <var>speed</var>
compiles kernel modules <code>-O3</code>, and <var>quick</var> compiles kernel modules
<code>-O0</code>.  The default is <var>normal</var>.  Use with care.

     <br><dt><samp><span class="command">--with-strconf-master=STRCONF_CONFIG</span></samp><dd><a name="index-strconf_002dmaster-314"></a>Specify the `<samp><span class="samp">STRCONF_CONFIG</span></samp>' file name to which the configuration master
file is written.  The default is <samp><span class="file">Config.master</span></samp>.

     <br><dt><samp><span class="command">--with-base-major=STRCONF_MAJBASE</span></samp><dd><a name="index-base_002dmajor-315"></a>Start numbering for major devices at `<samp><span class="samp">STRCONF_MAJBASE</span></samp>'.  The default is
`<samp><span class="samp">230</span></samp>'.

   </dl>

<!-- *- texinfo -*- vim: ft=texinfo -->
<!-- ========================================================================= -->
<!-- @(#) configure.texi,v 1.1.4.5 2005/12/30 12:21:15 brian Exp -->
<!-- ========================================================================= -->
<!-- Copyright (C) 2001-2004  OpenSS7 Corporation <www.openss7.com> -->
<!-- All Rights Reserved. -->
<!-- Permission is granted to make and distribute verbatim copies of this -->
<!-- manual provided the copyright notice and this permission notice are -->
<!-- preserved on all copies. -->
<!-- Permission is granted to copy and distribute modified versions of this -->
<!-- manual under the conditions for verbatim copying, provided that the -->
<!-- entire resulting derived work is distributed under the terms of a -->
<!-- permission notice identical to this one -->
<!-- Since the Linux kernel and libraries are constantly changing, this -->
<!-- manual page may be incorrect or out-of-date.  The author(s) assume no -->
<!-- responsibility for errors or omissions, or for damages resulting from -->
<!-- the use of the information contained herein.  The author(s) may not -->
<!-- have taken the same level of care in the production of this manual, -->
<!-- which is licensed free of charge, as they might when working -->
<!-- professionally. -->
<!-- Formatted or processed versions of this manual, if unaccompanied by -->
<!-- the source, must acknowledge the copyright and authors of this work. -->
<!--  -->
<!-- U.S. GOVERNMENT RESTRICTED RIGHTS.  If you are licensing this Software -->
<!-- on behalf of the U.S. Government ("Government"), the following -->
<!-- provisions apply to you.  If the Software is supplied by the Department -->
<!-- of Defense ("DoD"), it is classified as "Commercial Computer Software" -->
<!-- under paragraph 252.227-7014 of the DoD Supplement to the Federal -->
<!-- Acquisition Regulations ("DFARS") (or any successor regulations) and the -->
<!-- Government is acquiring only the license rights granted herein (the -->
<!-- license rights customarily provided to non-Government users).  If the -->
<!-- Software is supplied to any unit or agency of the Government other than -->
<!-- DoD, it is classified as "Restricted Computer Software" and the -->
<!-- Government's rights in the Software are defined in paragraph 52.227-19 -->
<!-- of the Federal Acquisition Regulations ("FAR") (or any successor -->
<!-- regulations) or, in the cases of NASA, in paragraph 18.52.227-86 of the -->
<!-- NASA Supplement to the FAR (or any successor regulations). -->
<!-- ========================================================================= -->
<!-- Commercial licensing and support of this software is available from -->
<!-- OpenSS7 Corporation at a fee.  See http://www.openss7.com/ -->
<!-- ========================================================================= -->
<!-- Last Modified 2005/12/30 12:21:15 by brian -->
<!-- ========================================================================= -->
<!-- This file is include from install.texi and contains the descriptions for -->
<!-- package-specific enable/disable and with/without options -->
<p>In addition, the following <samp><span class="command">configure</span></samp> options, specific to the Linux STREAMS (LiS)
package are available:

     <dl>
<dt><samp><span class="command">--enable-user-mode</span></samp><dd><a name="index-user_002dmode-316"></a>Enable user mode build.  The option defaults to `<samp><span class="samp">disabled</span></samp>'.  Don't use this option, it hasn't
been tested.

     <br><dt><samp><span class="command">--enable-broken-cpu-flags</span></samp><dd><a name="index-broken_002dcpu_002dflags-317"></a>Specify <code>int</code> instead of <code>long</code> interrupt flags.  Linux uses <code>long</code> interrupt flags
exclusively.  The default is to use <code>long</code> interrupt flags. 
This option defaults to `<samp><span class="samp">disabled</span></samp>'.

     <br><dt><samp><span class="command">--disable-lis-development</span></samp><dd><a name="index-lis_002ddevelopment-318"></a>This option is new to <cite>LiS-2.18.2</cite>. 
Disable reporting of source code path traces in debug logs.  Linux STREAMS (LiS) passes file name
and line number arguments to many of the exported functions.  This is exhaustive of stack resources
and requires the passing of more than three arguments on the stack in many circumnstances.  Note
that disabling code path traces breaks binary compatibility.  The default is perform source code
path traces, unless optimized for size or speed, in which case, the default is to not perform source
code path traces.  This option defaults to `<samp><span class="samp">enabled</span></samp>'.

     <br><dt><samp><span class="command">--enable-k-timers</span></samp><dd><a name="index-k_002dtimers-319"></a>Invoke Linux kernel cahcing on timer structures.  This increases speed and efficiency but is unsafe
on SMP architectures and for buggy or high-speed drivers.  The default is to <strong>not</strong> perform
kernel caching on timer structures.  This option defaults to `<samp><span class="samp">disabled</span></samp>'.

     <br><dt><samp><span class="command">--enable-k-cache</span></samp><dd><a name="index-k_002dcache-320"></a>Invoke Linux kernel caching on primary structures.  This incresase speed and efficiency.  The
default is to <strong>not</strong> perform kernel caching on primary structures.  This option defaults to
`<samp><span class="samp">disabled</span></samp>'.

     <br><dt><samp><span class="command">--enable-atomic-stats</span></samp><dd><a name="index-atomic_002dstats-321"></a>Enable atomic statistics elements for STREAMS statistics.  The changes STREAMS statistics elements
from the standard <code>int</code> to <code>atomic_t</code> to permit atomic increment of statistics structures. 
This is not recommended and the default is to <strong>not</strong> use <code>atomic_t</code> for statistics
structures.  This option defaults to `<samp><span class="samp">disabled</span></samp>'.

     <br><dt><samp><span class="command">--with-lis-regparms=NUMBER</span></samp><dt><samp><span class="command">--without-lis-regparms</span></samp><dd><a name="index-lis_002dregparms-322"></a>This option is new to <cite>LiS-2.18.2</cite>. 
Specifies the number of parameters to pass in registers to Linux STREAMS (LiS) exported functions. 
Specifying other than `<samp><span class="samp">0</span></samp>' here may break binary compatibility.  Specifying
`<samp><span class="samp">--without-lis-regparms</span></samp>' will default to the number used for kernel exported functions. 
Specifying greater than `<samp><span class="samp">3</span></samp>' will cause the build to fail.  The default is to pass no arguments
in registers.  This option defaults to `<samp><span class="samp">0</span></samp>'.

     <br><dt><samp><span class="command">--without-solaris-consts</span></samp><dd><a name="index-solaris_002dconsts-323"></a>Attempt to be compatible with Solaris constants.  The default is to attempt to be compatible with
Solaris constants. 
This option defaults to `<samp><span class="samp">enabled</span></samp>'.

     <br><dt><samp><span class="command">--without-solaris-cmn_err</span></samp><dd><a name="index-solaris_002dcmn_005ferr-324"></a>Specifies whether Solaris-style <code>cmn_err</code> is used.  The Solaris style prints a newline at the
end of each statement.  The SVR 4.2 style prints a newline at the beginning of each statement unless
<code>CE_CONT</code> is specified.  Linux kernel logs use the former, so this defaults to Solaris-style. 
This option defaults to `<samp><span class="samp">enabled</span></samp>'.

   </dl>

<!--  -->
<p><a name="Environment-Variables"></a>

<h5 class="subsubsection">6.2.5.2 Environment Variables</h5>

<p><a name="index-configure-environment-variables-325"></a>
Following are additional environment variables to <samp><span class="command">configure</span></samp>, their
meaning and use:

     <dl>
<dt><var>GPG</var><a name="index-GPG-326"></a><dd>GPG signature command.  This is used for signing distributions by the
maintainer.  By default, <samp><span class="command">configure</span></samp> will search for this tool.

     <br><dt><var>GNUPGUSER</var><a name="index-GNUPGUSER-327"></a><dd>GPG user name.  This is used for signing distributions by the maintainer.

     <br><dt><var>GNUPGHOME</var><a name="index-GNUPGHOME-328"></a><dd>GPG home directory.  This is used for signing distributions by the maintainer.

     <br><dt><var>GPGPASSWD</var><a name="index-GPGPASSWD-329"></a><dd>GPG password for signing.  This is used for signing distributions by the
maintainer.  This environment variable is not maintained by the
<samp><span class="command">configure</span></samp> script and should only be used on an isolated system.

     <br><dt><var>SOELIM</var><a name="index-SOELIM-330"></a><dd>Roff source elimination command.  This is only necessary when the option
<samp><span class="command">--with-cooked-manpages</span></samp> has been specified and <samp><span class="command">configure</span></samp>
cannot find the proper <samp><span class="command">soelim</span></samp> command.  By default,
<samp><span class="command">configure</span></samp> will search for this tool.

     <br><dt><var>REFER</var><a name="index-REFER-331"></a><dd>Roff references command.  This is only necessary when the option
<samp><span class="command">--with-cooked-manpages</span></samp> has been specified and <samp><span class="command">configure</span></samp>
cannot find the proper <samp><span class="command">refer</span></samp> command.  By default, <samp><span class="command">configure</span></samp>
will search for this tool.

     <br><dt><var>TBL</var><a name="index-TBL-332"></a><dd>Roff table command.  This is only necessary when the option
<samp><span class="command">--with-cooked-manpages</span></samp> has been specified and <samp><span class="command">configure</span></samp>
cannot find the proper <samp><span class="command">tbl</span></samp> command.  By default, <samp><span class="command">configure</span></samp>
will search for this tool.

     <br><dt><var>PIC</var><a name="index-PIC-333"></a><dd>Roff picture command.  This is only necessary when the option
<samp><span class="command">--with-cooked-manpages</span></samp> has been specified and <samp><span class="command">configure</span></samp>
cannot find the proper <samp><span class="command">pic</span></samp> command.  By default, <samp><span class="command">configure</span></samp>
will search for this tool.

     <br><dt><var>GZIP</var><a name="index-GZIP-334"></a><dd>Default compression options provided to <samp><span class="command">GZIP_CMD</span></samp>.

     <br><dt><var>GZIP_CMD</var><a name="index-GZIP_005fCMD-335"></a><dd>Manpages (and kernel modules) compression commands.  This is only necessary when
the option <samp><span class="command">--without-compressed-manpages</span></samp> has <em>not</em> been specified
and <samp><span class="command">configure</span></samp> cannot find the proper <samp><span class="command">gzip</span></samp> command.  By
default, <samp><span class="command">configure</span></samp> will search for this tool.

     <br><dt><var>BZIP2</var><a name="index-BZIP2-336"></a><dd>Default compression options provided to <samp><span class="command">BZIP2_CMD</span></samp>

     <br><dt><var>BZIP2_CMD</var><a name="index-BZIP2_005fCMD-337"></a><dd>Manpages compression commands.  This is only necessary when the option
<samp><span class="command">--without-compressed-manpages</span></samp> has <em>not</em> been specified and
<samp><span class="command">configure</span></samp> cannot find the proper <samp><span class="command">bzip2</span></samp> command.  By default,
<samp><span class="command">configure</span></samp> will search for this tool.

     <br><dt><var>MAKEWHATIS</var><a name="index-MAKEWHATIS-338"></a><dd>Manpages apropros database rebuild command.  By default, <samp><span class="command">configure</span></samp>
will search for this tool.  By default, <samp><span class="command">configure</span></samp> will search for this
tool.

     <br><dt><var>CHKCONFIG</var><a name="index-CHKCONFIG-339"></a><dd>Chkconfig command.  This was used for installation of init scripts.  All
pacakges now come with <samp><span class="command">init_install</span></samp> and <samp><span class="command">init_remove</span></samp> scripts
used to install and remove init scripts on both RPM and debian systems.

     <br><dt><var>RPM</var><a name="index-RPM-340"></a><dd>Rpm command.  This is only necessary for RPM builds.  By default,
<samp><span class="command">configure</span></samp> will search for this tool.

     <br><dt><var>RPMBUILD</var><a name="index-RPMBUILD-341"></a><dd>Build RPM command.  This is only necessary for RPM builds.  By default,
<samp><span class="command">configure</span></samp> will search for this tool.  <samp><span class="command">rpm</span></samp> will be used
instead of <samp><span class="command">rpmbuild</span></samp> only if <samp><span class="command">rpmbuild</span></samp> cannot be found.

     <br><dt><var>DPKG</var><a name="index-DPKG-342"></a><dd>Dpkg comand. 
This command is used for building debian packages. 
By default, <samp><span class="command">configure</span></samp> will search for this tool.

     <br><dt><var>DPKG_SOURCE</var><a name="index-DPKG_005fSOURCE-343"></a><dd>Dpkg-source command. 
This command is used for building debian dsc packages. 
By default, <samp><span class="command">configure</span></samp> will search for this tool.

     <br><dt><var>DPKG_BUILDPACKAGE</var><a name="index-DPKG_005fBUILDPACKAGE-344"></a><dd>Dpkg-buildpackage command. 
This command is used for building debian deb packages. 
By default, <samp><span class="command">configure</span></samp> will search for this tool.

     <br><dt><var>DEB_BUILD_ARCH</var><a name="index-DEB_005fBUILD_005fARCH-345"></a><dd>Debian build architecture. 
This variable is used for building debian packages. 
The default is the autoconf build architecutre.

     <br><dt><var>DEB_BUILD_GNU_CPU</var><a name="index-DEB_005fBUILD_005fGNU_005fCPU-346"></a><dd>Debian build cpu. 
This variable is used for building debian packages. 
The default is the autoconf build cpu.

     <br><dt><var>DEB_BUILD_GNU_SYSTEM</var><a name="index-DEB_005fBUILD_005fGNU_005fSYSTEM-347"></a><dd>Debian build os. 
This variable is used for building debian packages. 
The default is the autoconf build os.

     <br><dt><var>DEB_BUILD_GNU_TYPE</var><a name="index-DEB_005fBUILD_005fGNU_005fTYPE-348"></a><dd>Debian build alias. 
This variable is used for building debian packages. 
The default is the autoconf build alias.

     <br><dt><var>DEB_HOST_ARCH</var><a name="index-DEB_005fHOST_005fARCH-349"></a><dd>Debian host architecture. 
This variable is used for building debian packages. 
The default is the autoconf host architecture.

     <br><dt><var>DEB_HOST_GNU_CPU</var><a name="index-DEB_005fHOST_005fGNU_005fCPU-350"></a><dd>Debian host cpu. 
This variable is used for building debian packages. 
The default is the autoconf host cpu.

     <br><dt><var>DEB_HOST_GNU_SYSTEM</var><a name="index-DEB_005fHOST_005fGNU_005fSYSTEM-351"></a><dd>Debian host os. 
This variable is used for building debian packages. 
The default is the autoconf host os.

     <br><dt><var>DEB_HOST_GNU_TYPE</var><a name="index-DEB_005fHOST_005fGNU_005fTYPE-352"></a><dd>Debian host alias. 
This variable is used for building debian packages. 
The default is the autoconf host alias.

     <br><dt><var>LDCONFIG</var><a name="index-LDCONFIG-353"></a><dd>Configure loader command.  Command used to configure the loader when libraries
are installed.  By default, <samp><span class="command">configure</span></samp> will search for this tool.

     <br><dt><var>DESTDIR</var><a name="index-DESTDIR-354"></a><dd>Cross build root directory.  Specifies the root directory for build and
installation.  For example, for <cite>NexusWare</cite> cross-builds, this is set to
environment variable <var>NEXUSWARE_PREFIX</var> on configuration to point to the
root of the cross-build tree for both configuration and installation.

     <br><dt><var>DEPMOD</var><a name="index-DEPMOD-355"></a><dd>Build kernel module dependencies command.  This is used during installation of
kernel modules to a running kernel to rebuild the modules dependency database. 
By default, <samp><span class="command">configure</span></samp> will search for this tool.

     <br><dt><var>MODPROBE</var><a name="index-MODPROBE-356"></a><dd>Probe kernel module dependencies command.  This is used during installation of
kernel modules to a running kernel to remove old modules.  By default,
<samp><span class="command">configure</span></samp> will search for this tool.

     <br><dt><var>LSMOD</var><a name="index-LSMOD-357"></a><dd>List kernel modules command.  This is used during installation of kernel modules
to a running kernel to detect old modules for removal.  By default,
<samp><span class="command">configure</span></samp> will search for this tool.

     <br><dt><var>LSOF</var><a name="index-LSOF-358"></a><dd>List open files command.  This is used during installation of kernel modules to
a running kernel to detect old modules for removal.  Processes owning the old
kernel modules will be killed and the module removed.  If the process restarts,
the new module will be demand loaded.  By default, <samp><span class="command">configure</span></samp> will
search for this tool.

     <br><dt><var>GENKSYMS</var><a name="index-GENKSYMS-359"></a><dd>Generate kernel symbols command.  This is used for generating module symbol
versions during build.  By default, <samp><span class="command">configure</span></samp> will search for this
tool.

     <br><dt><var>KGENKSYMS</var><a name="index-KGENKSYMS-360"></a><dd>Linux 2.6 generate kernel symbols command.  This is used for generating module
symbol version during build.  By default, <samp><span class="command">configure</span></samp> will search for
this tool.

     <br><dt><var>OBJDUMP</var><a name="index-OBJDUMP-361"></a><dd>Object dumping command.  This is used for listing information about object
files.  By default, <samp><span class="command">configure</span></samp> will search for this tool.

     <br><dt><var>NM</var><a name="index-NM-362"></a><dd>Object symbol listing command.  This is used for listing information about
object files. 
By default, <samp><span class="command">configure</span></samp> will search for this tool.

     <br><dt><var>MODPOST_CACHE</var><a name="index-MODPOST_005fCACHE-363"></a><dd>Cache file for modpost.  The version of the <samp><span class="command">modpost.sh</span></samp> script that
ships with each package can cache information to a cache file to speed multiple
builds.  This environment variable is used to specify a cache file.

     <br><dt><var>AUTOM4TE</var><a name="index-AUTOM4TE-364"></a><dd>Autom4te command. 
This is the executable used by autotest for pre- and post-installation checks. 
By default, <samp><span class="command">configure</span></samp> will search for this tool.

     <br><dt><var>AUTOTEST</var><a name="index-AUTOTEST-365"></a><dd>Autotest macro build command. 
This is the executable used by autotest for pre- and post-installation checks. 
By default, <samp><span class="command">configure</span></samp> will search for this tool. 
</dl>

<h5 class="subsubsection">6.2.5.3 Build</h5>

<p>To build from the tar ball, See <a href="#Building-from-the-Tar-Ball">Building from the Tar Ball</a>.

<!--  -->
<!--  -->
<p><a name="Building"></a>

<h3 class="section">6.3 Building</h3>

<p><a name="index-building-366"></a>

<!--  -->
<p><a name="Building-from-the-Source-RPM"></a>

<h4 class="subsection">6.3.1 Building from the Source RPM</h4>

<p><a name="index-building_002c-source-srpm-367"></a><a name="index-source-rpms-368"></a>
If you have downloaded the necessary source RPM (see <a href="#Downloading-the-Source-RPM">Downloading the Source RPM</a>), then the following instructions will rebuild the binary RPMs on your
system.  Once the binary RPMs are rebuilt, you may install them as described
above (see <a href="#Installing-the-Binary-RPM">Installing the Binary RPM</a>).

<p class="noindent">The source RPM is rebuilt to binary RPMs as follows:

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<pre class="example">     % wget http://www.openss7.org/rpms/SRPMS/LiS-2.18.4.rc2-1.src.rpm
     % rpmbuild --rebuild -vv LiS-2.18.4.rc2-1.src.rpm
</pre>
   </td></tr></table>

<p class="noindent">The rebuild process can also recognize a number of options that can be used to
tweak the resulting binaries, See <a href="#Configuring-the-Source-RPM">Configuring the Source RPM</a>.  These options
are provided on the <samp><span class="command">rpm</span></samp> command line.  For example:

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<pre class="example">     % rpmbuild --rebuild -vv --target athlon-redhat-linux \
       --define "_kversion 2.6.17-1.2139_FC5" \
       -- LiS-2.18.4.rc2-1.src.rpm
</pre>
   </td></tr></table>

<p class="noindent">will rebuild binary RPM for the `<samp><span class="samp">2.6.17-1.2139_FC5</span></samp>' kernel for the
`<samp><span class="samp">athlon</span></samp>' architecture. 
<a rel="footnote" href="#fn-26" name="fnd-26"><sup>26</sup></a>

<h5 class="subsubheading">Installation</h5>

<p>To install the resulting binary RPM, See <a href="#Installing-the-Binary-RPM">Installing the Binary RPM</a>.

<!--  -->
<p><a name="Building-from-the-Debian-DSC"></a>

<h4 class="subsection">6.3.2 Building from the Debian DSC</h4>

<p><a name="index-building_002c-source-dscs-369"></a><a name="index-source-dscs-370"></a>
If you have downloaded the necessary Debian DSC (see <a href="#Downloading-the-Debian-DSC">Downloading the Debian DSC</a>), then the following instructions will rebuild the binary DEBs on your
system.  Once the binary DEBs are rebuilt, you may install them as described
above (see <a href="#Installing-the-Debian-DEB">Installing the Debian DEB</a>).

<p class="noindent">The Debian DSC is rebuilt to binary DEBs as follows:

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<pre class="example">     % wget http://www.openss7.org/debian/LiS_2.18.4.rc2-0.dsc
     % wget http://www.openss7.org/debian/LiS_2.18.4.rc2-0.tar.gz
     % dpkg-buildpackage -v LiS_2.18.4.rc2-0.dsc
</pre>
   </td></tr></table>

<p class="noindent">The rebuild process can also recognize a number of options that can be used to
tweak the resulting binaries, See <a href="#Configuring-the-Debian-DSC">Configuring the Debian DSC</a>.  These options
are provided in the environment variable <var>BUILD_DPKGOPTIONS</var> and have the
same form as the options to <samp><span class="command">configure</span></samp>, See <a href="#Configuring-the-Tar-Ball">Configuring the Tar Ball</a>. 
For example:

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<pre class="example">     % BUILD_DEBOPTIONS='
             --with-k-release=2.6.17-1.2139_FC5
             --host=athlon-debian-linux-gnu'
       dpkg-buildpackage -v \
       LiS_2.18.4.rc2-0.dsc
</pre>
   </td></tr></table>

<p class="noindent">will rebuild binary DEB for the `<samp><span class="samp">2.6.17-1.2139_FC5</span></samp>' kernel for the
`<samp><span class="samp">athlon</span></samp>' architecture. 
<a rel="footnote" href="#fn-27" name="fnd-27"><sup>27</sup></a>

<h5 class="subsubheading">Installation</h5>

<p>To install the resulting binary DEB, See <a href="#Installing-the-Debian-DEB">Installing the Debian DEB</a>.

<!--  -->
<p><a name="Building-from-the-Tar-Ball"></a>

<h4 class="subsection">6.3.3 Building from the Tar Ball</h4>

<p><a name="index-building_002c-tar-ball-371"></a><a name="index-tar-ball-372"></a>
If you have downloaded the tar ball (see <a href="#Downloading-the-Tar-Ball">Downloading the Tar Ball</a>), then the
following instructions will rebuild the package on your system.  (Note that the
build process does not required <samp><span class="command">root</span></samp> privilege.)

<h5 class="subsubsection">6.3.3.1 Native Build</h5>

<p>Folowing is an example of a native build against the running kernel:

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<pre class="example">     % wget http://www.openss7.org/LiS-2.18.4.rc2.tar.bz2
     % tar -xjvf LiS-2.18.4.rc2.tar.bz2
     % pushd LiS-2.18.4.rc2
     % ./configure
     % make
     % popd
</pre>
   </td></tr></table>

<h5 class="subsubsection">6.3.3.2 Cross-Build</h5>

<p>Following is an example for a cross-build.  The kernel release version must
always be specified for a cross-build.<a rel="footnote" href="#fn-28" name="fnd-28"><sup>28</sup></a>  If you are
cross-building, specify the root for the build with environment variable
<var>DESTDIR</var>.  The cross-compile host must also be specified if different from
the build host.  Either the compiler and other tools must be in the usual places
where GNU <samp><span class="command">autoconf</span></samp> can find them, or they must be specified with
declarations such as `<samp><span class="samp">CC=/u5/NexusWare24/ppc-linux/gcc</span></samp>' on the
<samp><span class="command">configure</span></samp> command line.  Look in the file <samp><span class="file">configure.nexusware</span></samp>
in the release package for an example.

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<pre class="example">     % wget http://www.openss7.org/LiS-2.18.4.rc2.tar.bz2
     % tar -xjvf LiS-2.18.4.rc2.tar.bz2
     % pushd LiS-2.18.4.rc2
     % ./configure DESTDIR="/some/other/root" \
     	--with-k-release=2.4.18 --host sparc-linux
     % make
     % popd
</pre>
   </td></tr></table>

<h5 class="subsubsection">6.3.3.3 NexusWare Build</h5>

<p>Additional support is provided for cross-building for the <cite>Performance
Technologies Inc.</cite> <cite>NexusWare</cite> embedded target for the CPC-384, CPC-388 and
CPC-396 cards.  A configuration script wrapper (<samp><span class="file">configure.nexusware</span></samp>) is
provided to simplify the cross-build operation for these targets.  The following
steps describe the process:

     <ol type=1 start=1>
<li>Follow the normal <cite>NexusWare</cite> instructions for rebuilding a
<samp><span class="file">generic</span></samp> kernel and flash image as follows:  (Note that I keep my
<cite>NexusWare</cite> build in <samp><span class="file">/u5/NexusWare24</span></samp>.)

     <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
     <pre class="example">          % pushd /u5/NexusWare24
          % source SETUP.sh
          % make
          % popd
     </pre>
     </td></tr></table>

     <p>For more recent <cite>NexusWare</cite> releases, the method for rebuilding a
kernel is a little different as follows:

     <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
     <pre class="example">          % pushd /u5/NexusWare80
          % ./nexus 2.4
          % ./nexus 8260
          % ./nexus quick
          % . SETUP.sh
          % popd
     </pre>
     </td></tr></table>

     <li>Next download, unpack
(see <a href="#Downloading-the-Tar-Ball">Downloading the Tar Ball</a>) and configure (see <a href="#Configuring-the-Tar-Ball">Configuring the Tar Ball</a>) using the provided <samp><span class="file">configure.nexusware</span></samp> wrapper for
<samp><span class="command">configure</span></samp>.  This wrapper simply tells the <samp><span class="command">configure</span></samp> script
where to find the <cite>NexusWare</cite> sources and which <cite>NexusWare</cite>
cross-building tools to use for a cross-compile.<a rel="footnote" href="#fn-29" name="fnd-29"><sup>29</sup></a>

     <p>Any of the normal <samp><span class="command">configure</span></samp> script options (see <a href="#Configuring-the-Tar-Ball">Configuring the Tar Ball</a>) can be used on the same line as `<samp><span class="samp">./configure.nexusware</span></samp>'.  One of
particular interest to embedded targets is `<samp><span class="samp">--with-k-optimize=size</span></samp>' to
attempt to reduce the size of the kernel modules.

     <p>You must specify the kernel version of the kernel for which you are configuring. 
Add the &ndash;with-k-release=2.4.18 option for older <cite>NexusWare</cite> releases,
&ndash;with-k-release=2.4.25 or &ndash;with-k-release=2.6.12 for more current
<cite>NexusWare</cite> releases.

     <li>Install as normal (see <a href="#Installing-the-Tar-Ball">Installing the Tar Ball</a>), however, for embedded
targets the <samp><span class="command">install-strip</span></samp> target should be used instead of the
<samp><span class="command">install</span></samp> target.  The <samp><span class="command">install-strip</span></samp> target will strip
unnecessary symbols from kernel modules and further reduce the size in the root
file system flash image.

        </ol>

   <p>Following is what I use for configuration and installation: (My <cite>NexusWare</cite>
tree is rooted at <samp><span class="file">/u5/NexusWare</span></samp>.)

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<pre class="example">     % pushd /u5/NexusWare80
     % ./nexus 2.4
     % ./nexus 8260
     % ./nexus quick
     % . SETUP.sh
     % popd
     % wget http://www.openss7.org/LiS-2.18.4.rc2.tar.bz2
     % tar -xjvf LiS-2.18.4.rc2.tar.bz2
     % pushd LiS-2.18.4.rc2
     % ./configure.nexusware --with-k-release=2.4.25 --with-k-optimize=size
     % make
     % make DESTDIR="$NEXUSWARE_PREFIX" install-strip
     % popd
</pre>
   </td></tr></table>

   <p>Once built and installed in the <cite>NexusWare</cite> directory, you will have to
(currently) hand edit a <samp><span class="file">.spec</span></samp> file to include the components you want in
the <cite>NexusWare</cite> root file system.  If you are cross-building for
<cite>NexusWare</cite> you should already know what that means.  Objects that you
might be interested in copying to the root file system are kernel modules that
were installed in
<samp><var>$NEXUSWARE_PREFIX</var><span class="file">/lib/modules/2.4.18/lis</span></samp>,
libraries installed in <samp><var>$NEXUSWARE_PREFIX</var><span class="file">/usr/lib</span></samp> and utility
functions installed in <samp><var>$NEXUSWARE_PREFIX</var><span class="file">/usr/bin</span></samp> and
<samp><var>$NEXUSWARE_PREFIX</var><span class="file">/usr/sbin</span></samp> and test programs in
<samp><var>$NEXUSWARE_PREFIX</var><span class="file">/usr/libexec</span></samp>.  If you would prefer that these
programs be installed in <samp><var>$NEXUSWARE_PREFIX</var><span class="file">/lib</span></samp>,
<samp><var>$NEXUSWARE_PREFIX</var><span class="file">/bin</span></samp>, <samp><var>$NEXUSWARE_PREFIX</var><span class="file">/sbin</span></samp> and
<samp><var>$NEXUSWARE_PREFIX</var><span class="file">/libexec</span></samp>, (say because you want to remote mount
the <samp><span class="file">/usr</span></samp> directory after boot), then specify the `<samp><span class="samp">--exec-prefix=/</span></samp>'
option to `<samp><span class="samp">./configure.nexusware</span></samp>'.

   <p>In addition, because <cite>NexusWare</cite> does not include an
<samp><span class="file">/etc/modules.conf</span></samp> file by default, it will be necessary to add one or
edit your <samp><span class="file">rc.4</span></samp> file to <samp><span class="command">insmod</span></samp> the necessary
<samp><span class="file">LiS</span></samp> modules at boot time.

   <p>Also, <cite>NexusWare</cite> does not configure its kernels for <var>CONFIG_KMOD</var>,
so any kernel modules must be loaded by the <samp><span class="file">rc.4</span></samp> init script at boot. 
On more recent <cite>NexusWare</cite> releases, the init scripts will be installed
in <samp><var>$NEXUSWARE_PREFIX</var><span class="file">/etc/rc.d/init.d/</span></samp> but you must manually
edit your <samp><span class="file">rc.4</span></samp> script to invoke these scripts.

   <p>Once you have completed the necessary <samp><span class="file">.spec</span></samp> and <samp><span class="file">rc.4</span></samp> file entries,
you need to rebuild the `<samp><span class="samp">generic</span></samp>' kernel flash image once more for these
objects to be included in the flash file system.  It is important that this
second build of the kernel image be the same as the first.

   <p>When modifying and rebuilding a <cite>NexusWare</cite> kernel, it will be necessary to
rebuild and install <samp><span class="file">LiS</span></samp>.  Simply perform the last `<samp><span class="samp">make
install-strip</span></samp>' stage or start again with `<samp><span class="samp">./configure.nexusware</span></samp>'.  You can
place the unpacked tarball in
<samp><var>$NEXUSWARE_PREFIX</var><span class="file">/usr/src/LiS</span></samp>, and add the following to
the top-level <cite>NexusWare</cite> <samp><span class="file">Makefile</span></samp> to make the build process a
single step process instead of dual pass:

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<pre class="smallexample">     all:
     ...
             (cd kernels/generic; $(MAKE) depend)
             (cd usr/src/pcmcia-cs-3.2.1; $(MAKE) config)
             (cd kernels/generic; $(MAKE))
             (cd usr/src/pcmcia-cs-3.2.1; $(MAKE) pti)
             (cd usr/src/pti; $(MAKE))
             (cd drivers; $(MAKE))
             (cd utility; $(MAKE))
     #       uncomment for LiS build
     #       (cd usr/src/LiS; ./configure.nexusware; $(MAKE) install-strip)
             (cd build/generic; $(MAKE))
     ...
</pre>
   </td></tr></table>

   <p>Another, perhaps simpler approach, is to make the necessary edits to the
<cite>NexusWare</cite> top-level <samp><span class="file">Makefile</span></samp> and <samp><span class="file">.spec</span></samp> and <samp><span class="file">rc.4</span></samp>
files, download and unpack the tar ball into the <cite>NexusWare</cite> directory, and
build the <cite>NexusWare</cite> flash image as normal:

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<pre class="example">     % wget http://www.openss7.org/LiS-2.18.4.rc2.tar.bz2
     % pushd /u5/NexusWare24
     % source SETUP.sh
     % pushd usr/src
     % tar -xjvf ${DIRSTACK[2]}/LiS-2.18.4.rc2.tar.bz2
     % ln -sf LiS-2.18.4.rc2 LiS
     % popd
     % make
     % popd
</pre>
   </td></tr></table>

   <p>The situation is a little more complex for recent <cite>NexusWare</cite> releases.

<!--  -->
<!--  -->
<p><a name="Installing"></a>

<h3 class="section">6.4 Installing</h3>

<p><a name="index-installing-373"></a>

<!--  -->
<p><a name="Installing-the-Binary-RPM"></a>

<h4 class="subsection">6.4.1 Installing the Binary RPM</h4>

<p><a name="index-installing_002c-binary-rpms-374"></a><a name="index-binary-rpms-375"></a>
If you have downloaded the necessary binary RPMs (see <a href="#Downloading-the-Binary-RPM">Downloading the Binary RPM</a>), or have rebuilt binary RPMs using the source RPM (see <a href="#Building-from-the-Source-RPM">Building from the Source RPM</a>), then the following instructions will install the RPMs on your
system. For additional information on <samp><span class="command">rpm</span></samp>, see <a href="*manpages*.html#rpm_00288_0029">rpm(8)</a>.

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<pre class="example">     % pushd RPMS/i686
     % rpm -ihv LiS-*-2.18.4.rc2-1.FC5.i686.rpm
</pre>
   </td></tr></table>

<p class="noindent">You must have the correct binary RPMs downloaded or built for this to be
successful.

   <p>Some of the packages are relocatable and can have final installation directories
altered with the `<samp><span class="samp">--relocate</span></samp>' option to <samp><span class="command">rpm</span></samp>, see <a href="rpm(8).html#rpm">rpm(8)</a> The Manual Pages.  For example, the following
will relocate the documentation and info directories:

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<pre class="example">     % pushd RPMS/i686
     % rpm -ihv \
             --relocate '/usr/share/doc=/usr/local/share/doc' \
             --relocate '/usr/share/info=/usr/local/share/info' \
             -- LiS-doc-2.18.4.rc2-1.FC5.i686.rpm
</pre>
   </td></tr></table>

<p class="noindent">The previous example will install the <samp><span class="file">LiS-doc</span></samp> package by will
relocate the documentation an info directory contents to the <samp><span class="file">/usr/local</span></samp>
version.

<!--  -->
<p><a name="Installing-the-Debian-DEB"></a>

<h4 class="subsection">6.4.2 Installing the Debian DEB</h4>

<p><a name="index-installing_002c-binary-debs-376"></a><a name="index-binary-debs-377"></a>
If you have downloaded the necessary Debian DEBs (see <a href="#Downloading-the-Debian-DEB">Downloading the Debian DEB</a>), or have rebuild binary DEBs using the Debian DSC (see <a href="#Building-from-the-Debian-DSC">Building from the Debian DSC</a>), then the following instructions will install the DEBs on your
system.  For additional information on <samp><span class="command">dpkg</span></samp>, see <a href="*manpages*.html#dpkg_00288_0029">dpkg(8)</a>.

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<pre class="example">     % pushd debian
     % dpkg -iv LiS-*_2.18.4.rc2-0_*.deb
</pre>
   </td></tr></table>

<p class="noindent">You must have the correct <samp><span class="file">.deb</span></samp> files downloaded or build for this to be
successful.

<!--  -->
<p><a name="Installing-the-Tar-Ball"></a>

<h4 class="subsection">6.4.3 Installing the Tar Ball</h4>

<p><a name="index-installing_002c-tar-ball-378"></a><a name="index-tar-ball-379"></a>
After the build process (see <a href="#Building-from-the-Tar-Ball">Building from the Tar Ball</a>), installation only
requires execution of one of two <samp><span class="command">make</span></samp> targets:

     <dl>
<dt>`<samp><span class="samp">make install</span></samp>'<dd>The `<samp><span class="samp">install</span></samp>' <samp><span class="command">make</span></samp> target will install all the components of the
package.  Root privilege is required to successfully invoke this target.

     <br><dt>`<samp><span class="samp">make install-strip</span></samp>'<dd>The `<samp><span class="samp">install-strip</span></samp>' <samp><span class="command">make</span></samp> target will install all the components
of the package, but will strip unnecessary information out of the objects and
compress manual pages.  Root privilege is required to successfully invoke this
target. 
</dl>

<!--  -->
<!--  -->
<p><a name="Removing"></a>

<h3 class="section">6.5 Removing</h3>

<p><a name="index-removing-380"></a>

<!--  -->
<p><a name="Removing-the-Binary-RPM"></a>

<h4 class="subsection">6.5.1 Removing the Binary RPM</h4>

<p><a name="index-removing_002c-binary-rpms-381"></a><a name="index-binary-rpms-382"></a>
To remove an installed version of the binary RPMs (whether obtained from the
OpenSS7 binary RPM releases, or whether created by the source RPM), execute the
following command:

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<pre class="example">     % rpm -evv `rpm -qa | grep '^LiS-'`
</pre>
   </td></tr></table>

   <p>For more information on <samp><span class="command">rpm</span></samp>, see <a href="*manpages*.html#rpm_00288_0029">rpm(8)</a>.

<!--  -->
<p><a name="Removing-the-Debian-DEB"></a>

<h4 class="subsection">6.5.2 Removing the Debian DEB</h4>

<p><a name="index-removing_002c-binary-debs-383"></a><a name="index-binary-debs-384"></a>
To remove and installed version of the debian DEB (whether obtained from the
OpenSS7 binary DEB releases, or whether created by the Debian DSC), execute the
following command:

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<pre class="example">     % dpkg -ev `dpkg -l | grep '^LiS-'`
</pre>
   </td></tr></table>

   <p>For more information on <samp><span class="command">dpkg</span></samp>, see <a href="*manpages*.html#dpkg_00288_0029">dpkg(8)</a>.

<!--  -->
<p><a name="Removing-the-Source-RPM"></a>

<h4 class="subsection">6.5.3 Removing the Source RPM</h4>

<p><a name="index-removing_002c-source-srpm-385"></a><a name="index-source-rpms-386"></a>
To remove all the installed binary RPM build from the source RPM, see
<a href="#Removing-the-Binary-RPM">Removing the Binary RPM</a>.  Then simply remove the binary RPM package
files and source RPM file.  A command such as:

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<pre class="example">     % find / -name 'LiS-*.rpm' -type f -print0 | xargs --null rm -f
</pre>
   </td></tr></table>

<p class="noindent">should remove all <samp><span class="file">LiS</span></samp> RPMs from your system.

<!--  -->
<p><a name="Removing-the-Debian-DSC"></a>

<h4 class="subsection">6.5.4 Removing the Debian DSC</h4>

<p><a name="index-removing_002c-source-dscs-387"></a><a name="index-source-dscs-388"></a>
To remove all the installed binary DEB build from the Debian DSC, see
<a href="#Removing-the-Debian-DEB">Removing the Debian DEB</a>.  Then simply remove the binary DEB package
files and Debian DSC file.  A command such as:

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<pre class="example">     % find / \( -name 'LiS-*.deb' \
              -o -name 'LiS-*.dsc' \
              -o -name 'LiS-*.tar.* \
              \) -type f -print0 | xargs --null rm -f
</pre>
   </td></tr></table>

<p class="noindent">should remove all <samp><span class="file">LiS</span></samp> DEBs, DSCs and TARs from your
system.

<!--  -->
<p><a name="Removing-the-Tar-Ball"></a>

<h4 class="subsection">6.5.5 Removing the Tar Ball</h4>

<p><a name="index-removing_002c-tar-ball-389"></a><a name="index-tar-ball-390"></a>
To remove a version installed from tar ball, change to the build directory where
the package was built and use the `<samp><span class="samp">uninstall</span></samp>' <samp><span class="command">make</span></samp> target as
follows:

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<pre class="example">     % cd /usr/src/LiS
     % make uninstall
     % cd ..
     % rm -fr LiS-2.18.4.rc2
     % rm -f LiS-2.18.4.rc2.tar.gz
     % rm -f LiS-2.18.4.rc2.tar.bz2
</pre>
   </td></tr></table>

   <p>If you have inadvertently removed the build directory and, therefore, no longer
have a configured directory from which to execute `<samp><span class="samp">make uninstall</span></samp>', then
perform all of the steps for configuration and installation (see <a href="#Installing-the-Tar-Ball">Installing the Tar Ball</a>) except the final installation and then perform the steps above.

<!--  -->
<!--  -->
<p><a name="Loading"></a>

<h3 class="section">6.6 Loading</h3>

<p><a name="index-loading-391"></a>

<h4 class="subsection">6.6.1 Normal Module Loading</h4>

<p>When <samp><span class="file">LiS</span></samp> installs, modules and drivers are normally
configured for demand loading.  The `<samp><span class="samp">install</span></samp>' and `<samp><span class="samp">install-strip</span></samp>'
<samp><span class="command">make</span></samp>
<a name="index-all-392"></a><a name="index-install-393"></a><a name="index-install_002dstrip-394"></a>targets will make the necessary changes to the <samp><span class="file">/etc/modules.conf</span></samp> file and
place the modules in an appropriate place in
<samp><span class="file">/lib/modules/2.6.17-1.2139_FC5/lis</span></samp>. 
The `<samp><span class="samp">make install</span></samp>' process should have copied the kernel module files
<samp><span class="file">streams-*.o</span></samp> to the directory
<samp><span class="file">/lib/modules/2.6.17-1.2139_FC5/lis</span></samp>. 
This means that to load any of these modules, you can simply execute, for
example, `<samp><span class="samp">modprobe stream-</span><var>somedriver</var></samp>'.<a rel="footnote" href="#fn-30" name="fnd-30"><sup>30</sup></a>

<h5 class="subsubsection">6.6.1.1 Linux STREAMS Module Loading</h5>

<p>The <samp><span class="file">LiS</span></samp> demand load system supports both the old kerneld and
the new kmod mechanisms for demand loading kernel modules.

   <p>The convention for <samp><span class="file">LiS</span></samp> kernel loadable object files is:
     <ul>
<li>Their name start with "streams-". 
<li>They are placed in <samp><span class="file">/lib/modules/2.6.17-1.2139_FC5/streams/</span></samp>, where `<samp><span class="samp">2.6.17-1.2139_FC5</span></samp>' is an example kernel version. 
<a name="index-g_t_002flib_002f_0040_002dmodules_002f_0040_002d_0040value_007b_005fkversion_007d_002f_0040_002dstreams_002f_0040_002d-395"></a></ul>

   <p>If your kernel has been built using the <samp><span class="file">kerneld</span></samp> daemon, then
<samp><span class="file">LiS</span></samp> kernel modules will automatically load as soon as
the STREAMS module is pushed or the driver is opened.  The `<samp><span class="samp">make install</span></samp>'
process makes the necessary changes to the
<samp><span class="file">/etc/modules.conf</span></samp> file.  After the install, you will see
lines like the following added to your <samp><span class="file">/etc/modules.conf</span></samp>
file:

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<pre class="example">     prune modules.lis
     if -f /lib/modules/`uname -r`/modules.lis
     include /lib/modules/`uname -r`/modules.lis
     endif
</pre>
   </td></tr></table>

<p class="noindent">which will provide for demand loading of the modules if they have been built and
installed for the running kernel.  The <samp><span class="file">/lib/modules/<samp>`uname
-r`</samp>/modules.lis</span></samp> file looks like this:

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<pre class="smallexample">     alias char-major-245  streams-<var>some_driver</var>
     alias char-major-246  streams-<var>other_driver</var>
</pre>
   </td></tr></table>

   <p>Note that STREAMS modules are not listed in this file, but will be loaded by
name using <samp><span class="file">kerneld</span></samp> if available.

<h5 class="subsubsection">6.6.1.2 Linux Fast-STREAMS Module Loading</h5>

<p><cite>Linux Fast-STREAMS</cite> has a wider range of kernel module loading mechanisms
than is provided by <cite>LiS</cite>.  For mechanisms used for kernel module loading
under <cite>Linux Fast-STREAMS</cite>, See <a href="STREAMS.html#Top">About This Manual</a>.

<h4 class="subsection">6.6.2 NexusWare Module Loading</h4>

<p><a name="index-NexusWare-396"></a><a name="index-loading-kernel-modules-397"></a>
Under exceptional circumstances, such as a <cite>NexusWare</cite> build, it is
necessary to hand-edit a <samp><span class="file">.spec</span></samp> and <samp><span class="file">rc.4</span></samp> file to load the modules
at boot time.<a rel="footnote" href="#fn-31" name="fnd-31"><sup>31</sup></a>

<p><a name="Maintenance"></a>

<h3 class="section">6.7 Maintenance</h3>

<p><a name="Makefile-Targets"></a>

<h4 class="subsection">6.7.1 Makefile Targets</h4>

<p>Automake has many targets, not all of which are obvious to the casual user.  In addition,
<cite>OpenSS7</cite> automake files have additional rules added to make maintaining and releasing a
package somewhat easier.  This list of targets provides some help with what targets can be invoked,
what they do, and what they hope to acheive.  The available targets are as follows:

<p><a name="User-Targets"></a>

<h5 class="subsubsection">6.7.1.1 User Targets</h5>

<p>The following are normal targets intended to be invoked by installers of the package.  They are
concerned with compiling, checking the compile, installing, checking the installation, and
uninstalling the package.

     <dl>
<dt>`<samp><span class="samp">[all]</span></samp>'<dd><a name="index-all-398"></a>This is also the default target.  It compiles the package.  This is performed after configuring the
source with `<samp><span class="samp">configure</span></samp>'.  A makefile stub is provided so that if the package has not had
autoreconf run (such as when checked out from CVS, the package will attempt to run `<samp><span class="samp">autoreconf
-fiv</span></samp>'.

     <p>All <cite>OpenSS7 Project</cite> packages are configured without maintainer mode and without dependency
tracking by default.  This speed compilation of the package for one-time builds.  This also means
that if you are developing using the source package (edit-compile-test-cycle), changes made to
source files will not cause the automatic rebuilding due to dependencies.  There are two ways to
enable dependency tracking: specify `<samp><span class="samp">--enable-maintainer-mode</span></samp>' to <samp><span class="command">configure</span></samp>; or,
specify `<samp><span class="samp">--enable-dependency-tracking</span></samp>' to <samp><span class="command">configure</span></samp>.  I use the former during my
edit-compile-test cycle.

     <p>This is a standard <cite>GNU</cite> <samp><span class="command">automake</span></samp> makefile target. 
This target does not require root privilege.

     <br><dt>`<samp><span class="samp">check</span></samp>'<dd><a name="index-check-399"></a>All <cite>OpenSS7 Project</cite> packages provide check scripts for the check target.  This step is
performed after compiling the package and will run all of the check programs against the compiled
binaries.  Which checks are performed depends on whether `<samp><span class="samp">--enable-maintainer-mode</span></samp>' was
specified to configure.  If in maintainer mode, checks that assist with the release of the package
will be run (such as checking that all manual pages load properly and that they have required
sections.)  We recommend running the check stage before installing, because it catches problems that
might keep the installed package from functioning properly.

     <p>Another way to enable the greater set of checks, without invoking maintainer mode, is to specify
`<samp><span class="samp">--enable-checks</span></samp>' to <samp><span class="command">configure</span></samp>.

     <p>This is a standard <cite>GNU</cite> <samp><span class="command">automake</span></samp> makefile target, although the functions performed
are customized for the <cite>OpenSS7 Project</cite>. 
This target does not require root privilege.

     <br><dt>`<samp><span class="samp">install</span></samp>'<dt>`<samp><span class="samp">install-strip</span></samp>'<dd><a name="index-install-400"></a><a name="index-install_002dstrip-401"></a>The `<samp><span class="samp">install</span></samp>' target installs the package.  This target also performs some actions similar to
the pre- and post-install scripts used by packaging tools such as <samp><span class="command">rpm</span></samp> or <samp><span class="command">dpkg</span></samp>. 
The `<samp><span class="samp">install-strip</span></samp>' target strips unnecessary symbols from executables and kernel modules
before installing.

     <p>This is a standard <cite>GNU</cite> <samp><span class="command">automake</span></samp> makefile target. 
This target requires root privilege.

     <br><dt>`<samp><span class="samp">installcheck</span></samp>'<dd><a name="index-installcheck-402"></a>All <cite>OpenSS7 Project</cite> packages provide test scripts for the `<samp><span class="samp">installcheck</span></samp>' target.  Test
scripts are created and run using autotest (part of the autoconf package).  Which test suites are
run and how extensive they are depends on whether `<samp><span class="samp">--enable-maintainer-mode</span></samp>' was specified to
<samp><span class="command">configure</span></samp>.  When in maintainer mode, all test suites will be run.  When not in maintainer
mode, only a few post-install checks will be performed, but the test suites themselves will be
installed in
<samp><span class="file">/usr/libexec/LiS</span></samp><a rel="footnote" href="#fn-32" name="fnd-32"><sup>32</sup></a> for later use.

     <p>This is a standard <cite>GNU</cite> <samp><span class="command">automake</span></samp> makefile target. 
This target might require root privilege.  Tests requiring root privilege will be skipped when run
as a regular user.  Tests requiring regular account privileges will be skipped when run as root.

     <br><dt>`<samp><span class="samp">retest</span></samp>'<dd><a name="index-retest-403"></a>To complement the `<samp><span class="samp">installcheck</span></samp>' target above, all <cite>OpenSS7 Project</cite> packages provide the
`<samp><span class="samp">retest</span></samp>' target as a means to rerun failed conformance testsuite test cases.  The retest target
is provided because some test cases in the testsuites have delicate timing considerations that allow
them to fail sporadically.  Invoking this target will retest the failed cases until no cases that
are not expected failures remain.

     <p>This is an <cite>OpenSS7 Project</cite> specific makefile target. 
As with `<samp><span class="samp">installcheck</span></samp>', this target might require root privilege.  Tests requiring root
privilege will be skpped when run as a regular user.  Tests requiring regular account privileges
will be skipped when run as root.

     <br><dt>`<samp><span class="samp">uninstall</span></samp>'<dd><a name="index-uninstall-404"></a>This target will reverse the steps taken to install the package.  This target also performs pre- and
post- erase scripts used by packaging tools such as <cite>rpm</cite> or <cite>dpkg</cite>.  You need to have a
configured build directory from which to execute this target, however, you do not need to have
compiled any of the files in that build directory.<a rel="footnote" href="#fn-33" name="fnd-33"><sup>33</sup></a>

     <p>This is a standard <cite>GNU</cite> <samp><span class="command">automake</span></samp> makefile target. 
This target requires root privilege.

     <br><dt>`<samp><span class="samp">remove</span></samp>'<dd><a name="index-remove-405"></a>This target is like `<samp><span class="samp">uninstall</span></samp>' with the exception that it uninstalls in the reverse order that
installation was performed.<a rel="footnote" href="#fn-34" name="fnd-34"><sup>34</sup></a>

     <p>This is an <cite>OpenSS7 Project</cite> specific makefile target. 
</dl>

<p><a name="Maintainer-Targets"></a>

<h5 class="subsubsection">6.7.1.2 Maintainer Targets</h5>

<p>The following targets are targets intended for use by maintainers of the package, or those
responsible for rerelease and packaging of a derivative work of the package.  Some of these targets
are only effective when maintainer mode has been invoked (`<samp><span class="samp">--enable-maintainer-mode</span></samp>' specified
to <samp><span class="command">configure</span></samp>.)

     <dl>
<dt>`<samp><span class="samp">dist</span></samp>'<dd><a name="index-dist-406"></a>Creates a distribution package (tarball) in the top level build directory.  <cite>OpenSS7 Project</cite>
packages distribute two archives: a `<samp><span class="samp">gzip tar</span></samp>' archive and a `<samp><span class="samp">bzip tar</span></samp>' archive.  These
archives will have the name <samp><span class="file">LiS-2.18.4.rc2.tar.gz</span></samp> and
<samp><span class="file">LiS-2.18.4.rc2.tar.bz2</span></samp>.

     <p>This is a standard <cite>GNU</cite> <samp><span class="command">automake</span></samp> makefile target. 
This target does not require root privilege.

     <br><dt>`<samp><span class="samp">distcheck</span></samp>'<dd><a name="index-distcheck-407"></a>This target is intended for use when releasing the package.  It creates the <samp><span class="command">tar</span></samp> archives
above and then unpacks the tarball in a source directory, configures in a separate build directory,
compiles the package, installs the package in a separate install directory, tests the install
package to ensure that some components work, and, finally, uses the unpacked source tree to build
another tarball.  If you have added or removed files from the package, this is a good way to ensure
that everything is still stable for release.

     <p>This is a standard <cite>GNU</cite> <samp><span class="command">automake</span></samp> makefile target. 
This target does not require root privilege. 
</dl>

<p><a name="Clean-Targets"></a>

<h5 class="subsubsection">6.7.1.3 Clean Targets</h5>

     <dl>
<dt>`<samp><span class="samp">mostlyclean</span></samp>'<dd><a name="index-mostlyclean-408"></a>Cleans out most of the files from the compile stage.  This target is helpful if you have not enabled
dependency tracking and need to recompile with changes.

     <p>This is a standard <cite>GNU</cite> <samp><span class="command">automake</span></samp> makefile target. 
This target does not require root privilege.

     <br><dt>`<samp><span class="samp">clean</span></samp>'<dd><a name="index-clean-409"></a>Cleans all the files from the build directory generated during the `<samp><span class="samp">make [all]</span></samp>' phase.  It does
not, however, remove files from the directory left there from the <samp><span class="command">configure</span></samp> run.  Use the
`<samp><span class="samp">distclean</span></samp>' target to remove those too.

     <p>This is a standard <cite>GNU</cite> <samp><span class="command">automake</span></samp> makefile target. 
This target might require root privilege if the `<samp><span class="samp">installcheck</span></samp>' target or the
<samp><span class="command">testsuite</span></samp> was invoked with root privilege (leaving files belonging to root).

     <br><dt>`<samp><span class="samp">distclean</span></samp>'<dd><a name="index-distclean-410"></a>This target cleans out the directories left behind by `<samp><span class="samp">distcheck</span></samp>' and removes all the
<samp><span class="command">configure</span></samp> and generated files from the build directory.  This will effectively remove all
the files in the build directory, with the except of files that belong to you or some other process.

     <p>This is a standard <cite>GNU</cite> <samp><span class="command">automake</span></samp> makefile target. 
This target might require root privilege if the `<samp><span class="samp">installcheck</span></samp>' target or the
<samp><span class="command">testsuite</span></samp> was invoked with root privilege (leaving files belonging to root).

     <br><dt>`<samp><span class="samp">maintainer-clean</span></samp>'<dd><a name="index-maintainer_002dclean-411"></a>This target not only removes files from the build directory, it removes generated files from the
source directory as well.  Care should be taken when invoking this target, because it removes files
generated by the maintainer and distributed with the archive that might require special tools to
regenerate.  These special tools might only be available to the maintainer (but they aren't).  It
also means that you probably need a full blown Linux system to rebuild the package.

     <p>This is a standard <cite>GNU</cite> <samp><span class="command">automake</span></samp> makefile target. 
This target might require root privilege if the `<samp><span class="samp">installcheck</span></samp>' target or the
<samp><span class="command">testsuite</span></samp> was invoked with root privilege (leaving files belonging to root).

     <br><dt>`<samp><span class="samp">check-clean</span></samp>'<dd><a name="index-check_002dclean-412"></a>This target removes log files left behind by the `<samp><span class="samp">check</span></samp>' target.  By default, the check scripts
append to log files in the top level build directory.  This target can be used to clean out those
log files before the next run.

     <p>This is an <cite>OpenSS7 Project</cite> specific makefile target. 
This target does not require root privilege. 
</dl>

<p><a name="Release-Targets"></a>

<h5 class="subsubsection">6.7.1.4 Release Targets</h5>

<p>The following are targets used to generate complete releases into the package distribution
directory.  These are good for unattended and NFS builds, which is what I use them for.  Also, when
building from atop multiple packages, these targets also recurse down through each package.

     <dl>
<dt>`<samp><span class="samp">release</span></samp>'<dd><a name="index-release-413"></a>Build all of the things necessary to generate a release.  On an <samp><span class="command">rpm</span></samp> system this is the
distribution archives, the source rpm, and the architecture dependent and architecture independent
binary rpms.  All items are placed in the package distribution directory that can be specified with
the `<samp><span class="samp">--with-pkg-distdir=DIR</span></samp>' option to <samp><span class="command">configure</span></samp>.

     <p>This is an <cite>OpenSS7 Project</cite> specific makefile target. 
This target does not require root privilege.

     <br><dt>`<samp><span class="samp">forced-release</span></samp>'<dd><a name="index-forced_002drelease-414"></a>The `<samp><span class="samp">release</span></samp>' target will not regenerate any files that already exist in the package
distribution directory.  This forced target will.

     <p>This is an <cite>OpenSS7 Project</cite> specific makefile target. 
This target does not require root privilege.

     <br><dt>`<samp><span class="samp">release-sign</span></samp>'<dd><a name="index-release_002dsign-415"></a>You will be prompted for a password, unless to specify it to make with the <var>GNUPGPASS</var> variable. 
For unattended or non-interactive builds with signing, you can do that as: `<samp><span class="samp">make
GNUPGPASS=mypasswd release-sign</span></samp>'

     <p>This is an <cite>OpenSS7 Project</cite> specific makefile target. 
This target does not require root privilege.

     <br><dt>`<samp><span class="samp">forced-release-sign</span></samp>'<dd><a name="index-forced_002drelease_002dsign-416"></a>The `<samp><span class="samp">release-sign</span></samp>' target will not regenerate any files that already exist in the package
distribution directory.  This forced target will.

     <p>This is an <cite>OpenSS7 Project</cite> specific makefile target. 
This target does not require root privilege.

     <br><dt>`<samp><span class="samp">release-clean</span></samp>'<dd><a name="index-release_002dclean-417"></a>This target will remove all distribution files for the current package from the package distribution
directory.

     <p>This is an <cite>OpenSS7 Project</cite> specific makefile target. 
This target does not require root privilege. 
</dl>

<p><a name="Logging-Targets"></a>

<h5 class="subsubsection">6.7.1.5 Logging Targets</h5>

<p>For convenience, to log the output of a number of targets to a file, log targets are defined.  The
log file itself is used as the target to make, but make invokes the target minus a <samp><span class="file">.log</span></samp>
suffix.  So, for example, to log the results of target `<samp><span class="samp">foo</span></samp>', invoke the target `<samp><span class="samp">foo.log</span></samp>'. 
The only target that this does not apply to is `<samp><span class="samp">compile.log</span></samp>'.  When you invoke the target
`<samp><span class="samp">compile.log</span></samp>' a simple <samp><span class="command">make</span></samp> is invoked and logged to the file <samp><span class="file">compile.log</span></samp>. 
The `<samp><span class="samp">foo.log</span></samp>' rule applies to all other targets.  This does not work for all targets, just a
selected few.<a rel="footnote" href="#fn-35" name="fnd-35"><sup>35</sup></a> Following are the logging targets:

<h5 class="subsubheading">Common Logging Targets</h5>

<p>Common logging targets correspond to normal user <samp><span class="command">automake</span></samp> makefile targets as follows:

     <dl>
<dt>`<samp><span class="samp">compile.log</span></samp>'<dd><a name="index-compile_002elog-418"></a>This is an <cite>OpenSS7 Project</cite> specific makefile target,
but it invokes the standard <cite>GNU</cite> <samp><span class="command">automake</span></samp> makefile target
`<samp><span class="samp">[all]</span></samp>'.

     <br><dt>`<samp><span class="samp">check.log</span></samp>'<dd><a name="index-check_002elog-419"></a>This is an <cite>OpenSS7 Project</cite> specific makefile target,
but it invokes the standard <cite>GNU</cite> <samp><span class="command">automake</span></samp> makefile target
`<samp><span class="samp">check</span></samp>'.

     <br><dt>`<samp><span class="samp">install.log</span></samp>'<dd><a name="index-install_002elog-420"></a>This is an <cite>OpenSS7 Project</cite> specific makefile target,
but it invokes the standard <cite>GNU</cite> <samp><span class="command">automake</span></samp> makefile target
`<samp><span class="samp">install</span></samp>'.

     <br><dt>`<samp><span class="samp">installcheck.log</span></samp>'<dd><a name="index-installcheck_002elog-421"></a>This is an <cite>OpenSS7 Project</cite> specific makefile target,
but it invokes the standard <cite>GNU</cite> <samp><span class="command">automake</span></samp> makefile target
`<samp><span class="samp">installcheck</span></samp>'.

     <br><dt>`<samp><span class="samp">uninstall.log</span></samp>'<dd><a name="index-uninstall_002elog-422"></a>This is an <cite>OpenSS7 Project</cite> specific makefile target,
but it invokes the standard <cite>GNU</cite> <samp><span class="command">automake</span></samp> makefile target
`<samp><span class="samp">uninstall</span></samp>'.

     <br><dt>`<samp><span class="samp">remove.log</span></samp>'<dd><a name="index-remove_002elog-423"></a>This is an <cite>OpenSS7 Project</cite> specific makefile target,
that invokes the <cite>OpenSS7 Project</cite>
`<samp><span class="samp">remove</span></samp>'
target. 
</dl>

<h5 class="subsubheading">Maintainer Logging Targets</h5>

<p>Maintainer logging targets correspond to maintainer mode <samp><span class="command">automake</span></samp> makefile targets as
follows:

     <dl>
<dt>`<samp><span class="samp">dist.log</span></samp>'<dd><a name="index-dist_002elog-424"></a>This is an <cite>OpenSS7 Project</cite> specific makefile target,
but it invokes the standard <cite>GNU</cite> <samp><span class="command">automake</span></samp> makefile target
`<samp><span class="samp">dist</span></samp>'.

     <br><dt>`<samp><span class="samp">distcheck.log</span></samp>'<dd><a name="index-distcheck_002elog-425"></a>This is an <cite>OpenSS7 Project</cite> specific makefile target,
but it invokes the standard <cite>GNU</cite> <samp><span class="command">automake</span></samp> makefile target
`<samp><span class="samp">distcheck</span></samp>'.

     <br><dt>`<samp><span class="samp">srpm.log</span></samp>'<dd><a name="index-srpm_002elog-426"></a>This is an <cite>OpenSS7 Project</cite> specific makefile target,
that invokes the <cite>OpenSS7 Project</cite>
`<samp><span class="samp">remove</span></samp>'
target.

     <br><dt>`<samp><span class="samp">rebuild.log</span></samp>'<dd><a name="index-rebuild_002elog-427"></a>This is an <cite>OpenSS7 Project</cite> specific makefile target,
that invokes the <cite>OpenSS7 Project</cite>
`<samp><span class="samp">remove</span></samp>'
target.

     <br><dt>`<samp><span class="samp">resign.log</span></samp>'<dd><a name="index-resign_002elog-428"></a>This is an <cite>OpenSS7 Project</cite> specific makefile target,
that invokes the <cite>OpenSS7 Project</cite>
`<samp><span class="samp">remove</span></samp>'
target.

     <br><dt>`<samp><span class="samp">release.log</span></samp>'<dd><a name="index-release_002elog-429"></a>This is an <cite>OpenSS7 Project</cite> specific makefile target,
that invokes the <cite>OpenSS7 Project</cite>
`<samp><span class="samp">remove</span></samp>'
target.

     <br><dt>`<samp><span class="samp">release-sign.log</span></samp>'<dd><a name="index-release_002dsign_002elog-430"></a>This is an <cite>OpenSS7 Project</cite> specific makefile target,
that invokes the <cite>OpenSS7 Project</cite>
`<samp><span class="samp">remove</span></samp>'
target. 
</dl>

   <p>If you want to add one, simply add it to <var>LOGGING_TARGETS</var> in <samp><span class="file">Makefile.am</span></samp>.

<p><a name="Problem-Report-Targets"></a>

<h5 class="subsubsection">6.7.1.6 Problem Report Targets</h5>

<p>To ease problem report generation, all logging targets will automatically generate a problem report
suitable for mailing in the file <samp><i>target</i><span class="file">.pr</span></samp> for target `<samp><i>target</i><span class="samp">.log</span></samp>'.  This
problem report file is in the form of an email and can be sent using the included <samp><span class="command">send-pr</span></samp>
script or by invoking the `<samp><span class="samp">send-pr</span></samp>' makefile target.

   <p>There are two additional problem report targets:

     <dl>
<dt>`<samp><span class="samp">pr</span></samp>'<dd><a name="index-pr-431"></a>The `<samp><span class="samp">pr</span></samp>' target is for independently generating a problem report outside of the build or
installation process.  The target will automatically generate a problem report skeleton suitable for
editting and mailing in the file <samp><span class="file">problem.pr</span></samp>.  This problem report file is in the form of an
email and can be editted and sent directly, or sent using the included <samp><span class="command">send-pr</span></samp> script or
by invoking the `<samp><span class="samp">send-pr</span></samp>' target.

     <p>This is an <cite>OpenSS7 Project</cite> specific makefile target. 
This target does not require root privilege.

     <br><dt>`<samp><span class="samp">send-pr</span></samp>'<dd><a name="index-send_002dpr-432"></a>The `<samp><span class="samp">send-pr</span></samp>' target is for finalizing and mailing a problem report generated either inside or
outside the build and installation process.  The target will automatically finalize and mail the
<samp><span class="file">problem.pr</span></samp> problem report if it has changed since the last time that `<samp><span class="samp">send-pr</span></samp>' was
invoked.

     <p>This is an <cite>OpenSS7 Project</cite> specific makefile target. 
This target does not require root privilege (unless the problem report file was generated as root). 
</dl>

<p><a name="Release-Archive-Targets"></a>

<h5 class="subsubsection">6.7.1.7 Release Archive Targets</h5>

<p>The following targets are used to generate and clean distribution archive and signature files. 
Whereas the `<samp><span class="samp">dist</span></samp>' target affects archives in the top build directory, the
`<samp><span class="samp">release-archive</span></samp>' targets affects archives in the package distribution directory (either the
top build directory or that specified with `<samp><span class="samp">--with-pkg-distdir=DIR</span></samp>' to <samp><span class="command">configure</span></samp>).

   <p>You can change the directory to which packages are distributed by using the
`<samp><span class="samp">--with-pkg-distdir=DIR</span></samp>' option to <samp><span class="command">configure</span></samp>.  The default directory is the top build
directory.

     <dl>
<dt>`<samp><span class="samp">release-archives</span></samp>'<dd><a name="index-release_002darchives-433"></a>This target creates the distribution archive files if they have not already been created.  This not
only runs the `<samp><span class="samp">dist</span></samp>' target, but also copies the files to the distribution directory, which, by
default is the top build directory.

     <p>The files generated are named:

     <p><samp><span class="file">LiS-2.18.4.rc2.tar.gz</span></samp>
and
<samp><span class="file">LiS-2.18.4.rc2.tar.bz2</span></samp>

     <p>You can change this distribution directory with the `<samp><span class="samp">--with-pkg-distdir</span></samp>' option to
<samp><span class="command">configure</span></samp>.  See `<samp><span class="samp">./configure --help</span></samp>' for more details on options.

     <p>This is an <cite>OpenSS7 Project</cite> specific makefile target. 
This target does not require root privilege.

     <br><dt>`<samp><span class="samp">release-sign-archives</span></samp>'<dd><a name="index-release_002dsign_002darchives-434"></a>This target is like `<samp><span class="samp">release-archives</span></samp>', except that it also signs the archives using a
<cite>GPG</cite> detached signature.  You will be prompted for a password unless you pass the
<var>GNUPGPASS</var> variable to make.  For automated or unattended builds, pass the <var>GNUPGPASS</var>
variable like so:

     <p>`<samp><span class="samp">make GNUPGPASS=mypasswd release-sign-archives</span></samp>'

     <p>Signature files will be named:

     <p><samp><span class="file">LiS-2.18.4.rc2.tar.gz.asc</span></samp>
and
<samp><span class="file">LiS-2.18.4.rc2.tar.bz2.asc</span></samp>

     <p>These files will be moved to the package distribution directory with the plaintext archives.

     <p>This is an <cite>OpenSS7 Project</cite> specific makefile target. 
This target does not require root privilege.

     <br><dt>`<samp><span class="samp">release-clean-archives</span></samp>'<dd><a name="index-release_002dclean_002darchives-435"></a>This target will clean the release archives and signature files from the package distribution
directory.

     <p>This is an <cite>OpenSS7 Project</cite> specific makefile target. 
This target does not require root privilege. 
</dl>

<p><a name="RPM-Build-Targets"></a>

<h5 class="subsubsection">6.7.1.8 RPM Build Targets</h5>

<p>On <samp><span class="command">rpm</span></samp> systems, or systems sporting rpm packaging tools, the following targets are used to
generate <samp><span class="command">rpm</span></samp> release packages.  The epoch and release number can be controlled by the
contents of the <samp><span class="file">.rpmepoch</span></samp> and <samp><span class="file">.rpmrelease</span></samp> files, or with the
`<samp><span class="samp">--with-rpm-epoch=EPOCH</span></samp>' and `<samp><span class="samp">--with-rpm-release=RELEASE</span></samp>' options to <samp><span class="command">configure</span></samp>. 
See `<samp><span class="samp">configure --help</span></samp>' for more information on options.  We always use release number `<samp><span class="samp">1</span></samp>'. 
You can use release numbers above `<samp><span class="samp">1</span></samp>'.

     <dl>
<dt>`<samp><span class="samp">srpm</span></samp>'<dd><a name="index-srpm-436"></a>This target generates the source rpm for the package (without signing the source rpm).  The source
rpm will be named: <samp><span class="file">LiS-2.18.4.rc2-1.srpm</span></samp>.

     <p>This is an <cite>OpenSS7 Project</cite> specific makefile target. 
This target does not require root privilege.

     <br><dt>`<samp><span class="samp">rpms</span></samp>'<dd><a name="index-rpms-437"></a>This target is responsible for generating all of the package binary rpms for the architecture.  The
binary rpms will be named:

     <p><samp><span class="file">LiS-*-2.18.4.rc2-1.*.rpm</span></samp>

     <p>where the stars indicate the subpackage and the architecture.  Both the architecture specific
subpackages (binary objects) and the architecture independent (<samp><span class="file">.noarch</span></samp>) subpackages will be
built unless the the former was disabled with the option `<samp><span class="samp">--disable-arch</span></samp>', or the later with
the option `<samp><span class="samp">--disable-indep</span></samp>', passed to <samp><span class="command">configure</span></samp>.

     <p>This is an <cite>OpenSS7 Project</cite> specific makefile target. 
This target does not require root privilege.

     <br><dt>`<samp><span class="samp">sign</span></samp>'<dt>`<samp><span class="samp">srpm-sign</span></samp>'<dd><a name="index-sign-438"></a><a name="index-srpm_002dsign-439"></a>These two targets are the same.  When invoked, they will add a signature to the source rpm file,
provided that the file does not already have a signature.  You will be prompted for a password if a
signature is required.  Automated or unattended builds can be acheived by using the <samp><span class="command">emake</span></samp>
expect script, included in
<samp><span class="file">${srcdir}/scripts/emake</span></samp>.

     <p>This is an <cite>OpenSS7 Project</cite> specific makefile target. 
This target does not require root privilege.

     <br><dt>`<samp><span class="samp">rebuild</span></samp>'<dd><a name="index-rebuild-440"></a>This target accepts searches out a list of kernel names from the <samp><span class="file">${DESTDIR}/lib/modules</span></samp>
directory and builds rpms for those kernels and for each of a set of architectures given in the
<var>AM_RPMTARGETS</var> variable to make.  This is convenience target for building a group of rpms on a
given build machine.

     <p>This is an <cite>OpenSS7 Project</cite> specific makefile target. 
This target does not require root privilege.

     <br><dt>`<samp><span class="samp">resign</span></samp>'<dd><a name="index-resign-441"></a>This target will search out and sign, with a <cite>GPG</cite> signature, the source rpm, and all of the
binary rpms for this package that can be found in the package distribution directory.  This target
will prompt for a <cite>GPG</cite> password.  Automated or unattended builds can be acheived with the
<samp><span class="command">emake</span></samp> expect script loccated here:
<samp><span class="file">${srcdir}/scripts/emake</span></samp>.

     <p>This is an <cite>OpenSS7 Project</cite> specific makefile target. 
This target does not require root privilege. 
</dl>

<p><a name="Debian-Build-Targets"></a>

<h5 class="subsubsection">6.7.1.9 Debian Build Targets</h5>

<p>On debian systems, or systems sporting debian packaging tools, the following targets are used to
generate debian release packages.  The release number can be controlled by the contents of the
<samp><span class="file">.debrelease</span></samp> file, or with the `<samp><span class="samp">--with-debrelease=RELEASENUMBER</span></samp>' option to
<samp><span class="command">configure</span></samp>.  See `<samp><span class="samp">configure --help</span></samp>' for more information on options.

     <dl>
<dt>`<samp><span class="samp">dsc</span></samp>'<dd><a name="index-dsc-442"></a>This target will build the debian source change package (<samp><span class="file">.dsc</span></samp> file).  We use release number
`<samp><span class="samp">0</span></samp>' so that the entire tarball is included in the <samp><span class="file">dsc</span></samp> file.  You can use release number
`<samp><span class="samp">1</span></samp>' for the same purposes.  Release numbers above `<samp><span class="samp">1</span></samp>' will not include the entire tarball. 
The <samp><span class="file">.dsc</span></samp> file will be named: <samp><span class="file">LiS_2.18.4.rc2-0.dsc</span></samp>.

     <p>This is an <cite>OpenSS7 Project</cite> specific makefile target. 
This target does not require root privilege.

     <br><dt>`<samp><span class="samp">sigs</span></samp>'<dd><a name="index-sigs-443"></a>This target signs the <samp><span class="file">.deb</span></samp> files.  You will be prompted for a password, unless to specify it
to make with the <var>GNUPGPASS</var> variable.

     <p>This is an <cite>OpenSS7 Project</cite> specific makefile target. 
This target does not require root privilege.

     <br><dt>`<samp><span class="samp">debs</span></samp>'<dd><a name="index-debs-444"></a>This target will build the debian binary package (<samp><span class="file">.deb</span></samp> file) from the <samp><span class="file">.dsc</span></samp> created
above.  (This target will also create the <samp><span class="file">.dsc</span></samp> if it has not been created already.)  The
subpackage <samp><span class="file">.deb</span></samp> files will be named: <samp><span class="file">LiS-*_2.18.4.rc2-0_*.deb</span></samp>, where
the stars indicate the subpackage and the architecture.

     <p>This is an <cite>OpenSS7 Project</cite> specific makefile target. 
This target does not require root privilege.

     <br><dt>`<samp><span class="samp">csig</span></samp>'<dd><a name="index-csig-445"></a>This target signs the <samp><span class="file">.dsc</span></samp> file.  You will be prompted for a password, unless to specify it
to make with the <var>GNUPGPASS</var> variable.

     <p>This is an <cite>OpenSS7 Project</cite> specific makefile target. 
This target does not require root privilege. 
</dl>

<!--  -->
<!--  -->
<p><a name="Troubleshooting"></a>

<h2 class="chapter">7 Troubleshooting</h2>

<p><a name="index-troubleshooting-446"></a>

<!-- *- texinfo -*- vim: ft=texinfo -->
<!-- ========================================================================= -->
<!-- @(#) testsuite.texi,v 0.9.2.9 2006/07/03 05:45:53 brian Exp -->
<!-- ========================================================================= -->
<!-- Copyright (c) 2001-2006  OpenSS7 Corporation <http://www.openss7.com/> -->
<!-- Copyright (c) 1997-2000  Brian F. G. Bidulock <bidulock@openss7.org> -->
<!-- All Rights Reserved. -->
<!-- Permission is granted to make and distribute verbatim copies of this -->
<!-- manual provided the copyright notice and this permission notice are -->
<!-- preserved on all copies. -->
<!-- Permission is granted to copy and distribute modified versions of this -->
<!-- manual under the conditions for verbatim copying, provided that the -->
<!-- entire resulting derived work is distributed under the terms of a -->
<!-- permission notice identical to this one -->
<!-- Since the Linux kernel and libraries are constantly changing, this -->
<!-- manual page may be incorrect or out-of-date.  The author(s) assume no -->
<!-- responsibility for errors or omissions, or for damages resulting from -->
<!-- the use of the information contained herein.  The author(s) may not -->
<!-- have taken the same level of care in the production of this manual, -->
<!-- which is licensed free of charge, as they might when working -->
<!-- professionally. -->
<!-- Formatted or processed versions of this manual, if unaccompanied by -->
<!-- the source, must acknowledge the copyright and authors of this work. -->
<!--  -->
<!-- U.S. GOVERNMENT RESTRICTED RIGHTS.  If you are licensing this Software -->
<!-- on behalf of the U.S. Government ("Government"), the following -->
<!-- provisions apply to you.  If the Software is supplied by the Department -->
<!-- of Defense ("DoD"), it is classified as "Commercial Computer Software" -->
<!-- under paragraph 252.227-7014 of the DoD Supplement to the Federal -->
<!-- Acquisition Regulations ("DFARS") (or any successor regulations) and the -->
<!-- Government is acquiring only the license rights granted herein (the -->
<!-- license rights customarily provided to non-Government users).  If the -->
<!-- Software is supplied to any unit or agency of the Government other than -->
<!-- DoD, it is classified as "Restricted Computer Software" and the -->
<!-- Government's rights in the Software are defined in paragraph 52.227-19 -->
<!-- of the Federal Acquisition Regulations ("FAR") (or any successor -->
<!-- regulations) or, in the cases of NASA, in paragraph 18.52.227-86 of the -->
<!-- NASA Supplement to the FAR (or any successor regulations). -->
<!-- ========================================================================= -->
<!-- Commercial licensing and support of this software is available from -->
<!-- OpenSS7 Corporation at a fee.  See http://www.openss7.com/ -->
<!-- ========================================================================= -->
<!-- Last Modified 2006/07/03 05:45:53 by brian -->
<!-- ========================================================================= -->
<!--  -->
<!--  -->
<p><a name="Test-Suites"></a>

<h3 class="section">7.1 Test Suites</h3>

<p><a name="index-test-suites-447"></a>

<!--  -->
<!--  -->
<p><a name="Pre-installation-Checks"></a>
<a name="Pre_002dinstallation-Checks"></a>

<h4 class="subsection">7.1.1 Pre-installation Checks</h4>

<p><a name="index-pre_002dinstallation-checks-448"></a>
Most <cite>OpenSS7</cite> packages, including the <cite>Linux STREAMS (LiS)</cite> package, ship with
pre-installation checks integral to the build system.  Pre-installation checks include check scripts
that are shipped in the <samp><span class="file">scripts</span></samp> subdirectory as well as specialized <samp><span class="command">make</span></samp> targets
that perform the checks.

   <p>When building and installing the package from <dfn>RPM</dfn> or <dfn>DEB</dfn> source packages
(see <a href="#Building-from-the-Source-RPM">Building from the Source RPM</a>; and <a href="#Building-from-the-Debian-DSC">Building from the Debian DSC</a>), a fundamental set of
post-compile, pre-installation checks are performed prior to building binary packages.  This is
performed automagically and does not require any special actions on the part of the user creating
binary packages from source packages.

   <p>When building and installing the package from <dfn>tarball</dfn> (see <a href="#Building-from-the-Tar-Ball">Building from the Tar Ball</a>; and
<a href="#Installing-the-Tar-Ball">Installing the Tar Ball</a>), however, pre-installation checks are only performed if specifically
invoked by the builder of the package.  Pre-installation checks are invoked after building the
package and before installing the package.  Pre-installation checks are performed by invoking the
`<samp><span class="samp">check</span></samp>' or `<samp><span class="samp">check.log</span></samp>' target to <samp><span class="command">make</span></samp> when building the package, as shown
in <a href="#testsuite_003aex0">testsuite:ex0</a>.

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<div class="float">
<a name="testsuite_003aex0"></a>
<pre class="example">     % wget http://www.openss7.org/LiS-2.18.4.rc2.tar.bz2
     % tar -xjvf LiS-2.18.4.rc2.tar.bz2
     % pushd LiS-2.18.4.rc2
     % ./configure
     % make
     % make check  # &lt;------- invoke pre-installation checks
     % popd
</pre>
   <p><strong class="float-caption">Example 7.1: <em>Invoking Pre-Installation Checks</em></strong></p></div>
</td></tr></table>

   <p>Pre-installation checks fall into two categories: <dfn>System Checks</dfn> and <dfn>Maintenance Checks</dfn>.

<h5 class="subsubsection">7.1.1.1 Pre-Installation System Checks</h5>

<p><dfn>System Checks</dfn> are post-compilation checks that can be performed before installing the package
that check to ensure that the compiled objects function and will be successfully installed.  When
the <samp><span class="option">--enable-maintainer-mode</span></samp> option has not been passed to <samp><span class="command">configure</span></samp>, only
<dfn>System Checks</dfn> will be performed.

   <p>For example, the steps shown in <a href="#testsuite_003aex1">testsuite:ex1</a> will perform <dfn>System</dfn> checks.

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<div class="float">
<a name="testsuite_003aex1"></a>
<pre class="example">     % wget http://www.openss7.org/LiS-2.18.4.rc2.tar.bz2
     % tar -xjvf LiS-2.18.4.rc2.tar.bz2
     % pushd LiS-2.18.4.rc2
     % ./configure
     % make
     % make check  # &lt;------ invokes System pre-installation checks
     % popd
</pre>
   <p><strong class="float-caption">Example 7.2: <em>Invoking System Checks</em></strong></p></div>
</td></tr></table>

<h5 class="subsubsection">7.1.1.2 Pre-Installation Maintenance Checks</h5>

<p><dfn>Maintenance Checks</dfn> include all <dfn>System Checks</dfn>, but also checks to ensure that the kernel
modules, applications programs, header files, development tools, test programs, documentation,
and manual pages conform to <dfn>OpenSS7</dfn> standards.  When the <samp><span class="option">--enable-maintainer-mode</span></samp>
option has been passed to <samp><span class="command">configure</span></samp>, <dfn>Maintenance Checks</dfn> will be performed.

   <p>For example, the steps shown in <a href="#testsuite_003aex2">testsuite:ex2</a> will perform <dfn>Maintenance</dfn> checks.

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<div class="float">
<a name="testsuite_003aex2"></a>
<pre class="example">     % wget http://www.openss7.org/LiS-2.18.4.rc2.tar.bz2
     % tar -xjvf LiS-2.18.4.rc2.tar.bz2
     % pushd LiS-2.18.4.rc2
     % ./configure --enable-maintainer-mode
     % make
     % make check  # &lt;------ invokes Maintenance pre-installation checks
     % popd
</pre>
   <p><strong class="float-caption">Example 7.3: <em>Invoking Maintenace Checks</em></strong></p></div>
</td></tr></table>

<h5 class="subsubsection">7.1.1.3 Specific Pre-Installation Checks</h5>

<p>A number of check scripts are provided in the <samp><span class="file">scripts</span></samp> subdirectory of the distribution that
perform both <dfn>System</dfn> and <dfn>Maintenance</dfn> checks.  These are as follows:

     <dl>
<dt><samp><span class="command">check_commands</span></samp><dd>
This check performs both <dfn>System</dfn> and <dfn>Maintainance</dfn> checks.

     <p>When performing <dfn>System</dfn> tests, the following tests are performed:

     <p>Unless cross-compiling, or unless a program is included in <code>AM_INSTALLCHECK_STD_OPTIONS_EXEMPT</code>
every program in <code>bin_PROGRAMS</code>, <code>sbin_PROGRAMS</code>, and <code>libexec_PROGRAMS</code> is tested to
ensure that the <samp><span class="option">--help</span></samp>, <samp><span class="option">--version</span></samp>, and <samp><span class="option">--copying</span></samp> options are accepted. 
When cross-compiling is is not possible to execute cross-compiled binaries, and these checks are
skpped in that case.

     <p>Script executables, on the other hand, can be executed on the build host, so, unless listed in
<code>AM_INSTALLCHECK_STD_OPTIONS_EXEMPT</code>, every program in <code>dist_bit_SCRIPTS</code>,
<code>dist_sbin_SCRIPTS</code>, and <code>pkglibexec_SCRIPTS</code> are tested to ensure that the
<samp><span class="option">--help</span></samp>, <samp><span class="option">--version</span></samp>, and <samp><span class="option">--copying</span></samp> options are accepted.

     <p>When performing <dfn>Maintenance</dfn> tests, <samp><span class="command">check_commands</span></samp> also checks to ensure that a
manual page exists in section 1 for every executable binary or script that will be installed from
<code>bin_PROGRAMS</code> and <code>dist_bin_SCRIPTS</code>.  It also checks to ensure that a manual page exists
in section 8 for every executable binary or script that wil be installed from <code>sbin_PROGRAMS</code>,
<code>dist_sbin_SCRIPTS</code>, <code>libexec_PROGRAMS</code>, and <code>pkglibexec_SCRIPTS</code>.

     <br><dt><samp><span class="command">check_decls</span></samp><dd>
This check only performs <dfn>Maintenance</dfn> checks.

     <p>It collects the results from the <code>check_libs</code>, <code>check_modules</code> and <code>check_headers</code>
check scripts and tests to ensure every declaration of a function prototype or external variable
contained in installed header files has a corresponding exported symbol from either a to be
installed shared object library or a to be installed kernel module.  Declarations are exempted from
this requirement if their identifiers have been explicitly added to the <code>EXPOSED_SYMBOL</code>
variable.  If <code>WARN_EXCESS</code> is set to `<samp><span class="samp">yes</span></samp>', then the check script will only warn when
excess declarations exist (without a corresponding exported symbol); otherwise, the check script
will generate an error and the check will fail.

     <br><dt><samp><span class="command">check_headers</span></samp><dd>
This check only performs <dfn>Maintenance</dfn> checks.

     <p>When performing <dfn>Maintenance</dfn> tests, it identifies all of the declarations included in to be
installed header files.  It then checks to ensure that a manual page exists in sections 2, 3, 7 or
9, as appropriate, for the type of declaration.  It also checks to see if a manual page source file
exists in the source directory for a declaration that has not been included in the distribution. 
Function or prototype declarations that do not have a manual page in sections 2, 3, or 9 will cause
the check to fail.  Other declarations (variable, externvar, macro, enumerate, enum, struct, union,
typedef, member, etc.) will only warn if a manual page does not exist, but will not fail the check.

     <br><dt><samp><span class="command">check_libs</span></samp><dd>
This check only performs <dfn>Maintenance</dfn> checks.

     <p>When performing <dfn>Maintenance</dfn> tests, it checks that each exported symbol in each to be installed
shared object library has a manual page in section 3.  It also checks that each exported symbol has
a function, prototype or externvar declaration in the to be installed header files.  A missing
declaration or manual page will cause this check to fail.

     <br><dt><samp><span class="command">check_mans</span></samp><dd>
This check only performs <dfn>Maintenance</dfn> checks.

     <p>When performing <dfn>Maintenance</dfn> tests, it checks that to be install manual pages can be formatted
for display without any errors or warnings from the build host <samp><span class="command">man</span></samp> program.  It also
checks that required headings exist for manual pages according to the section in which the manual
page will be installed.  It warns if recommended headings are not included in the manual pages. 
Because some <dfn>RPM</dfn> distributions have manual pages that might conflict with the package manual
pages, this check script also checks for conflicts with installed manual pages on the build host. 
This check script also checks to ensure that all to be installed manual pages are used in some
fashion, that is, they have a declaration, or exported symbol, or are the name of a kernel module or
STREAMS module or driver, possibly capitalized.

     <p>Note that checking for conflicts with the build host should probably be included in the <dfn>System</dfn>
checks (because <dfn>System</dfn> checks are performed before the source <dfn>RPM</dfn> <code>%install</code>
scriptlet).

     <br><dt><samp><span class="command">check_modules</span></samp><dd>
This check performs both <dfn>System</dfn> and <dfn>Maintenance</dfn> checks.

     <p>When performing <dfn>System</dfn> tests, it checks each to be installed kernel module to ensure that all
undefined symbols can be resolved to either the kernel or another module.  It also checks whether an
exported or externally declared symbol conflicts with an exported or externally declared symbol
present in the kernel or another module.<a rel="footnote" href="#fn-36" name="fnd-36"><sup>36</sup></a>

     <p>When performing <dfn>Maintenance</dfn> tests, this check script tests that each to be installed kernel
module has a manual page in section 9 and that each exported symbol that does not begin with an
underscore, and that belongs to an exported function or exported variable, has a manual page in
section 9.  It also checks to ensure that each exported symbol that does not begin with an
underscore, and that blongs to an exported function or exported variable, has a function, prototype
or externvar declaration in the to be installed header files.

     <br><dt><samp><span class="command">check_streams</span></samp><dd>
This check performs only <dfn>Maintenance</dfn> checks.

     <p>When performing <dfn>Maintenance</dfn> tests, it checks that for each configured <dfn>STREAMS</dfn> module or
driver, or device node, that a manual page exists in section 4 or section 7 as appropriate.

   </dl>

   <p>The output of the pre-installation tests are fairly self explanatory.  Each check script saves some
output to <samp><em>name</em><span class="file">.log</span></samp>, where <em>name</em> is the name of the check script as listed above. 
A summary of the results of the test are display to standard output and can also be captured to the
<samp><span class="file">check.log</span></samp> file if the `<samp><span class="samp">check.log</span></samp>' target is used instead of the `<samp><span class="samp">check</span></samp>'
target to <samp><span class="command">make</span></samp>.

   <p>Because the check scripts proliferate <samp><em>name</em><span class="file">.log</span></samp> files throughout the build directory, a
`<samp><span class="samp">make check-clean</span></samp>' <samp><span class="command">make</span></samp> target has be provided to clean them out.  `<samp><span class="samp">make
check-clean</span></samp>' should be run before each successive run of `<samp><span class="samp">make check</span></samp>'.

<!--  -->
<!--  -->
<p><a name="Post-installation-Checks"></a>
<a name="Post_002dinstallation-Checks"></a>

<h4 class="subsection">7.1.2 Post-installation Checks</h4>

<p><a name="index-post_002dinstallation-checks-449"></a>

   <p>Most OpenSS7 packages ship with a combatibility and conformance test suite built using the
`<samp><span class="samp">autotest</span></samp>' capabilities of `<samp><span class="samp">autoconf 2.59</span></samp>'.  These test suites act as a wrapper for the
compatibility and conformance test programs that are shipped with the package.

   <p>Unlike the pre-installation checks, the post-installation checks are always run complete.  The only
check that post-installation test scripts perform is to test whether they have been invoked with
root privileges or not.  When invoked as root, or as a plain user, some tests might be skipped that
require root privileges, or that require plain user privileges, to complete successfully.

<!--  -->
<!--  -->
<p><a name="Running-Test-Suites"></a>

<h5 class="subsubsection">7.1.2.1 Running Test Suites</h5>

<p><a name="index-test-suites_002c-running-450"></a>
There are several ways of invoking the conformance test suites:

     <ol type=1 start=1>

     <li>The test suites can be run after installation of the package by invoking the `<samp><span class="samp">make
installcheck</span></samp>' or `<samp><span class="samp">make installcheck.log</span></samp>' target.  Some packages require that root privileges be
acquired before invoking the package.

     <li>The test suites can be run from the distribution subdirectory after installation of the
package by invoking the <samp><span class="command">testsuite</span></samp> shell script directly.

     <li>The test suites can be run standalone from the <samp><span class="file">libexec</span></samp> (<samp><span class="file">/usr/libexec</span></samp>)
installation directory by invoking the <samp><span class="command">testsuite</span></samp> shell script directly.

        </ol>

   <p>Typical steps for invoking the testsuites directly from <samp><span class="command">make</span></samp> are shown in
<a href="#testsuite_003aex3">testsuite:ex3</a>.

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<div class="float">
<a name="testsuite_003aex3"></a>
<pre class="example">     % wget http://www.openss7.org/LiS-2.18.4.rc2.tar.bz2
     % tar -xjvf LiS-2.18.4.rc2.tar.bz2
     % pushd LiS-2.18.4.rc2
     % ./configure
     % make
     % make check  # &lt;------ invokes System pre-installation checks
     % make install
     % sudo make installcheck # &lt;------- invokes post-installation tests
     % popd
</pre>
   <p><strong class="float-caption">Example 7.4: <em>Invoking System Checks</em></strong></p></div>
</td></tr></table>

   <p>When performing post-installation checks for the purposes of generating a problem report, the checks
should always be performed from the build directory, either with `<samp><span class="samp">make installcheck</span></samp>' or by
invoking <samp><span class="command">testsuite</span></samp> directly from the <samp><span class="file">tests</span></samp> subdirectory of the build directory. 
This ensures that all of the information known to <samp><span class="command">configure</span></samp> and pertinent to the
configuration of the system for which a test case failed, will be collected in the resulting
<samp><span class="file">testsuite.log</span></samp> file depositied upon test suite failure in the <samp><span class="file">tests</span></samp> directory.  This
<samp><span class="file">testsuite.log</span></samp> file can then be attached as part of the problem report and provides rich
details to maintainers of the package.  See also See <a href="#Problem-Reports">Problem Reports</a>, below.

   <p>Typical steps for invoking and installed <samp><span class="command">testsuite</span></samp> standalone are shown in
<a href="#testsuite_003aex4">testsuite:ex4</a>.

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<div class="float">
<a name="testsuite_003aex4"></a>
<pre class="example">     % [sudo] /usr/libexec/LiS/testsuite
</pre>
   <p><strong class="float-caption">Example 7.5: <em>Invoking <samp></em><span class="command">testsuite</span><em></samp> Directly</em></strong></p></div>
</td></tr></table>

   <p>When invoked directly, <samp><span class="command">testsuite</span></samp> will generate a <samp><span class="file">testsuite.log</span></samp> file in the current
directory, and a <samp><span class="file">testsuite.dir</span></samp> directory of failed tests cases and debugging scripts.  For
generating a problem report for failed test cases, see <a href="#Stand-Alone-Problem-Reports">Stand Alone Problem Reports</a>.

<!--  -->
<!--  -->
<p><a name="Problem-Reports"></a>

<h3 class="section">7.2 Problem Reports</h3>

<p><a name="index-problem-reports-451"></a><a name="index-bugs_002c-reporting-452"></a><a name="index-reporting-bugs-453"></a>

<p><a name="Problem-Report-Guidelines"></a>

<h4 class="subsection">7.2.1 Problem Report Guidelines</h4>

<p>Problem reports in the following categories should include a log file as indicated in the table
below:

     <dl>
<dt>`<samp><span class="samp">./configure</span></samp>'<dd>A problem with the configuration process occurs that causes the `<samp><span class="samp">./configure</span></samp>' command to fail. 
The problem report must include the <samp><span class="file">config.log</span></samp> file that was generated by
<samp><span class="command">configure</span></samp>.

     <br><dt>`<samp><span class="samp">make compile.log</span></samp>'<dd>A problem with the build process occurs that causes the `<samp><span class="samp">make</span></samp>' command to fail.  Perform
`<samp><span class="samp">make clean</span></samp>' and then `<samp><span class="samp">make compile.log</span></samp>' and attach the <samp><span class="file">config.log</span></samp> and
<samp><span class="file">compile.log</span></samp> files to the problem report.

     <br><dt>`<samp><span class="samp">make check.log</span></samp>'<dd>A problem occurs with the `<samp><span class="samp">make check</span></samp>' target that causes it to fail.  Perform `<samp><span class="samp">make
check-clean check.log</span></samp>' and attach the <samp><span class="file">config.log</span></samp>, <samp><span class="file">compile.log</span></samp> and <samp><span class="file">check.log</span></samp>
files to the problem report.

     <br><dt>`<samp><span class="samp">sudo make install.log</span></samp>'<dd>A problem occurs with `<samp><span class="samp">sudo make install</span></samp>' that causes it to fail.  Perform `<samp><span class="samp">sudo make
uninstall</span></samp>' and `<samp><span class="samp">sudo make install.log</span></samp>' and attach the <samp><span class="file">config.log</span></samp>, <samp><span class="file">compile.log</span></samp>,
<samp><span class="file">check.log</span></samp>, and <samp><span class="file">install.log</span></samp> files to the problem report.

     <br><dt>`<samp><span class="samp">[sudo] make installcheck.log</span></samp>'<dd>A problem occurs with the `<samp><span class="samp">make installcheck</span></samp>' target that causes the test suite to fail. 
Attach the resulting <samp><span class="file">tests/testsuite.log</span></samp> and <samp><span class="file">installcheck.log</span></samp> file to the problem
report.  There is no need to attach the other files as they are included in
<samp><span class="file">tests/testsuite.log</span></samp>.

     <br><dt>`<samp><span class="samp">[sudo] make uninstall.log</span></samp>'<dd>A problem occurs with the `<samp><span class="samp">make uninstall</span></samp>' target that causes the test suite to fail.  Perform
`<samp><span class="samp">sudo make uninstall.log</span></samp>' and attach the <samp><span class="file">config.log</span></samp>, <samp><span class="file">compile.log</span></samp>,
<samp><span class="file">check.log</span></samp>, <samp><span class="file">install.log</span></samp>, <samp><span class="file">installcheck.log</span></samp>, <samp><span class="file">tests/testsuite.log</span></samp> and
<samp><span class="file">uninstall.log</span></samp> file to the problem report.

     <br><dt>`<samp><span class="samp">[sudo] make remove.log</span></samp>'<dd>A problem occurs with the `<samp><span class="samp">make remove</span></samp>' target that causes the test suite to fail.  Perform
`<samp><span class="samp">sudo make remove.log</span></samp>' and attach the <samp><span class="file">config.log</span></samp>, <samp><span class="file">compile.log</span></samp>, <samp><span class="file">check.log</span></samp>,
<samp><span class="file">install.log</span></samp>, <samp><span class="file">installcheck.log</span></samp>, <samp><span class="file">tests/testsuite.log</span></samp> and <samp><span class="file">remove.log</span></samp> file
to the problem report.

   </dl>

   <p>For other problems that occur during the use of the <cite>Linux STREAMS (LiS)</cite> package, please
write a test case for the test suite that recreates the problem if one does not yet exist and
provide a test program patch with the problem report.  Also include whatever log files are generated
by the kernel (<code>cmn_err(9)</code>) or by the <samp><span class="command">strerr(8)</span></samp> or <samp><span class="command">strace(1)</span></samp> facilities
(<code>strlog(9)</code>).

<!--  -->
<p><a name="Generating-Problem-Reports"></a>

<h4 class="subsection">7.2.2 Generating Problem Reports</h4>

<p><a name="index-generating-problem-reports-454"></a><a name="index-bug-reports_002c-generating-455"></a><a name="index-generating-bug-reports-456"></a>
<cite>The OpenSS7 Project</cite> uses the <cite>GNU GNATS</cite> system for problem reporting.  Although the
`<samp><span class="samp">send-pr</span></samp>' tool from the <cite>GNU GNATS</cite> package can be used for bug reporting to the project's
<cite>GNATS</cite> database using electronic mail, it is not always convenient to download and install the
<cite>GNATS</cite> system to gain access to the `<samp><span class="samp">send-pr</span></samp>' tool.

   <p>Therefore, the <cite>Linux STREAMS (LiS)</cite> package provides the `<samp><span class="samp">send-pr</span></samp>' shell script that
can be used for problem reporting.  The `<samp><span class="samp">send-pr</span></samp>' shell script can invoked directly and is a
workalike for the <cite>GNU</cite> `<samp><span class="samp">send-pr</span></samp>' tool.

   <p>The `<samp><span class="samp">send-pr</span></samp>' tool takes the same flags and can be used in the same fashion, however, whereas
`<samp><span class="samp">send-pr</span></samp>' is an interactive tool<a rel="footnote" href="#fn-37" name="fnd-37"><sup>37</sup></a>, `<samp><span class="samp">send-pr</span></samp>' is also able to perform batch
processing.  Whereas `<samp><span class="samp">send-pr</span></samp>' takes its field information from local databases or from using
the `<samp><span class="samp">query-pr</span></samp>' C-language program to query a remote database, the `<samp><span class="samp">send-pr</span></samp>' tool has the
field database internal to the tool.

   <p>Problem reports can be generate using <samp><span class="command">make</span></samp>, See <a href="#Problem-Report-Targets">Problem Report Targets</a>.  An example of
how simple it is to generate a problem report is illustrated in <a href="#autopr_003aex0">autopr:ex0</a>. 
<a name="index-pr-457"></a>
<p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<div class="float">
<a name="autopr_003aex0"></a>
<pre class="example">     % make pr
     SEND-PR:
     SEND-PR: send-pr:  send-pr was invoked to generate an external report.  An
     SEND-PR: automated problem report has been created in the file named
     SEND-PR: 'problem.pr' in the current directory.  This problem report can
     SEND-PR: be sent to bugs@openss7.org by calling this script as
     SEND-PR: '/home/brian/os7/scripts/send-pr --file="problem.pr"'.
     SEND-PR:
     SEND-PR: It is possible to edit some of the fields before sending on the
     SEND-PR: problem report.  Please remember that there is NO WARRANTY.  See
     SEND-PR: the file 'COPYING' in the top level directory.
     SEND-PR:
     SEND-PR: Please do not send confidential information to the bug report
     SEND-PR: address.  Inspect the file 'problem.pr' for confidential
     SEND-PR: information before mailing.
     SEND-PR:
     % vim problem.pr  # &lt;--- follow instructions at head of file
     % make send-pr
</pre>
   <p><strong class="float-caption">Example 7.6: <em>Invoking Problem Report Generation</em></strong></p></div>
</td></tr></table>

   <p>Using the `<samp><span class="samp">make pr</span></samp>' target to generate a problem report has the advantages that it will
assemble any available <samp><span class="file">*.log</span></samp> files in the build directory and attach them to the problem
report.

<!--  -->
<p><a name="Automatic-Problem-Reports"></a>

<h4 class="subsection">7.2.3 Automatic Problem Reports</h4>

<p><a name="index-generating-problem-reports-automatically-458"></a><a name="index-bug-reports_002c-automatic-generation-459"></a><a name="index-generating-bug-reports-automatically-460"></a>
The <cite>Linux STREAMS (LiS)</cite> package also provides a feature for automatic problem report
generation that meets the problem report submission guidelines detailed in the preceding sections.

   <p>Whenever a logging makefile target (see <a href="#Logging-Targets">Logging Targets</a>) is invoked, if the primary target
fails, the <samp><span class="command">send-pr</span></samp> shell script is invoked to automatically generate a problem report
file suitable for the corresponding target (as described above under see <a href="#Problem-Report-Guidelines">Problem Report Guidelines</a>).  An example is shown in <a href="#autopr_003aex2">autopr:ex2</a>.

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<div class="float">
<a name="autopr_003aex2"></a>
<pre class="example">     % make compile.log
     ...
     ...
     make[5]: *** [libXNSdrvs_a-ip.o] Error 1
     make[5]: Leaving directory `/u6/buildel4/strxns'
     make[4]: *** [all-recursive] Error 1
     make[4]: Leaving directory `/u6/buildel4/strxns'
     make[3]: *** [all] Error 2
     make[3]: Leaving directory `/u6/buildel4/strxns'
     make[2]: *** [all-recursive] Error 1
     make[2]: Leaving directory `/u6/buildel4'
     make[1]: *** [all] Error 2
     make[1]: Leaving directory `/u6/buildel4'
     SEND-PR:
     SEND-PR: send-pr:  Make target compile.log failed in the compile stage.  An
     SEND-PR: automated problem report has been created in the file named
     SEND-PR: 'problem.pr' in the current directory.  This problem report can
     SEND-PR: be sent to bugs@openss7.org by calling 'make send-pr'.
     SEND-PR:
     SEND-PR: It is possible to edit some of the fields before sending on the
     SEND-PR: problem report.  Please remember that there is NO WARRANTY.  See
     SEND-PR: the file 'COPYING' in the top level directory.
     SEND-PR:
     SEND-PR: Please do not send confidential information to the bug report
     SEND-PR: address.  Inspect the file 'problem.pr' for confidential
     SEND-PR: information before mailing.
     SEND-PR:
     % vim problem.pr  # &lt;--- follow instructions at head of file
     % make send-pr
</pre>
   <p><strong class="float-caption">Example 7.7: <em>Problem Report from Failed Logging Target</em></strong></p></div>
</td></tr></table>

<!--  -->
<p><a name="Stand-Alone-Problem-Reports"></a>

<h4 class="subsection">7.2.4 Stand Alone Problem Reports</h4>

<p><a name="index-generating-problem-reports-stand-alone-461"></a><a name="index-bug-reports_002c-stand-along-generation-462"></a><a name="index-generating-bug-reports-463"></a>
The <cite>Linux STREAMS (LiS)</cite> package installs the <samp><span class="command">send-pr</span></samp> script and its configuration
file <samp><span class="file">send-pr.config</span></samp> in <samp><span class="file">${libexecdir}/LiS</span></samp> along with the validation
<samp><span class="command">testsuite</span></samp>, see See <a href="#Test-Suites">Test Suites</a>.  As with the <samp><span class="command">testsuite</span></samp>, this allows the
<samp><span class="command">send-pr</span></samp> script to be used for problem report generation on an installed system that does
not have a build directory.

   <p>An example of invoking the package <samp><span class="command">testsuite</span></samp> and then generating a problem report for
failed cases is shown in <a href="#autopr_003aex2">Example 7.7</a>.

   <p><table class="cartouche" summary="cartouche" border="1"><tr><td>
<div class="float">
<a name="autopr_003aex2"></a>
<pre class="example">     % [sudo] /usr/libexec/LiS/testsuite
     % # test cases failed...
     % /usr/libexec/LiS/send-pr
     SEND-PR:
     SEND-PR: send-pr:  send-pr was invoked to generate an external report.  An
     SEND-PR: automated problem report has been created in the file named
     SEND-PR: 'problem.pr' in the current directory.  This problem report can
     SEND-PR: be sent to bugs@openss7.org by calling this script as
     SEND-PR: '/usr/libexec/LiS/send-pr --file problem.pr'.
     SEND-PR:
     SEND-PR: It is possible to edit some of the fields before sending on the
     SEND-PR: problem report.  Please remember that there is NO WARRANTY.  See
     SEND-PR: the file 'COPYING' in the top level directory.
     SEND-PR:
     SEND-PR: Please do not send confidential information to the bug report
     SEND-PR: address.  Inspect the file 'problem.pr' for confidential
     SEND-PR: information before mailing.
     SEND-PR:
     % vim problem.pr  # &lt;--- follow instructions at head of file
     % /usr/libexec/LiS/send-pr --file problem.pr
</pre>
   <p><strong class="float-caption">Example 7.8: <em>Invoking <samp></em><span class="command">send-pr</span><em></samp> Directly</em></strong></p></div>
</td></tr></table>

   <p>The advantage of the approach shown in the example is that the <samp><span class="command">send-pr</span></samp> script is capable
of collecting the <samp><span class="file">testsuite.log</span></samp> file and the failed test cases and debugging scripts from the
<samp><span class="file">testsuite.dir</span></samp> directory and including them in the problem report, as well as all package
pertinent information from the installed <samp><span class="file">send-pr.config</span></samp>.

<!--  -->
<!--  -->
<p><a name="Known-Problems"></a>

<h3 class="section">7.3 Known Problems</h3>

<p><a name="index-known-problems-464"></a><a name="index-problems_002c-known-465"></a>
<cite>The OpenSS7 Project</cite> does not ship software with known bugs.  All bugs are unknown.

   <p>Verified behaviour is that behaviour that has been verified by conformance test suites that are
shipped with the <cite>Linux STREAMS (LiS)</cite> package.

   <p>Unverified behaviour may contain unknown bugs.

   <p>Please remember that there is <strong>NO WARRANTY</strong>.

   <p>See also <a href="#Bugs">Bugs</a>.

<!--  -->
<!--  -->
<p><a name="Copying"></a>

<h2 class="unnumbered">Copying</h2>

<!-- @setfilename gpl.info -->
<p><a name="GNU-General-Public-License"></a>

<h3 class="section">GNU General Public License</h3>

<p><a name="index-license_002c-GPL-466"></a><a name="index-license_002c-GNU-General-Public-License-467"></a>
   <pre class="sp">


</pre>
<div align="center">GNU GENERAL PUBLIC LICENSE</div>
<div align="center">Version 2, June 1991</div>

<pre class="display">     Copyright &copy; 1989, 1991 Free Software Foundation, Inc.
     675 Mass Ave, Cambridge, MA 02139, USA
     
     Everyone is permitted to copy and distribute verbatim copies
     of this license document, but changing it is not allowed.
</pre>
   <h4 class="subsection">Preamble</h4>

<p>The licenses for most software are designed to take away your
freedom to share and change it.  By contrast, the GNU General Public
License is intended to guarantee your freedom to share and change free
software&mdash;to make sure the software is free for all its users.  This
General Public License applies to most of the Free Software
Foundation's software and to any other program whose authors commit to
using it.  (Some other Free Software Foundation software is covered by
the GNU Library General Public License instead.)  You can apply it to
your programs, too.

   <p>When we speak of free software, we are referring to freedom, not
price.  Our General Public Licenses are designed to make sure that you
have the freedom to distribute copies of free software (and charge for
this service if you wish), that you receive source code or can get it
if you want it, that you can change the software or use pieces of it
in new free programs; and that you know you can do these things.

   <p>To protect your rights, we need to make restrictions that forbid
anyone to deny you these rights or to ask you to surrender the rights. 
These restrictions translate to certain responsibilities for you if you
distribute copies of the software, or if you modify it.

   <p>For example, if you distribute copies of such a program, whether
gratis or for a fee, you must give the recipients all the rights that
you have.  You must make sure that they, too, receive or can get the
source code.  And you must show them these terms so they know their
rights.

   <p>We protect your rights with two steps: (1) copyright the software, and
(2) offer you this license which gives you legal permission to copy,
distribute and/or modify the software.

   <p>Also, for each author's protection and ours, we want to make certain
that everyone understands that there is no warranty for this free
software.  If the software is modified by someone else and passed on, we
want its recipients to know that what they have is not the original, so
that any problems introduced by others will not reflect on the original
authors' reputations.

   <p>Finally, any free program is threatened constantly by software
patents.  We wish to avoid the danger that redistributors of a free
program will individually obtain patent licenses, in effect making the
program proprietary.  To prevent this, we have made it clear that any
patent must be licensed for everyone's free use or not licensed at all.

   <p>The precise terms and conditions for copying, distribution and
modification follow.

<div align="center">TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION</div>
     <ol type=1 start=1>
<li>This License applies to any program or other work which contains
a notice placed by the copyright holder saying it may be distributed
under the terms of this General Public License.  The &ldquo;Program&rdquo;, below,
refers to any such program or work, and a &ldquo;work based on the Program&rdquo;
means either the Program or any derivative work under copyright law:
that is to say, a work containing the Program or a portion of it,
either verbatim or with modifications and/or translated into another
language.  (Hereinafter, translation is included without limitation in
the term &ldquo;modification&rdquo;.)  Each licensee is addressed as &ldquo;you&rdquo;.

     <p>Activities other than copying, distribution and modification are not
covered by this License; they are outside its scope.  The act of
running the Program is not restricted, and the output from the Program
is covered only if its contents constitute a work based on the
Program (independent of having been made by running the Program). 
Whether that is true depends on what the Program does.

     <li>You may copy and distribute verbatim copies of the Program's
source code as you receive it, in any medium, provided that you
conspicuously and appropriately publish on each copy an appropriate
copyright notice and disclaimer of warranty; keep intact all the
notices that refer to this License and to the absence of any warranty;
and give any other recipients of the Program a copy of this License
along with the Program.

     <p>You may charge a fee for the physical act of transferring a copy, and
you may at your option offer warranty protection in exchange for a fee.

     <li>You may modify your copy or copies of the Program or any portion
of it, thus forming a work based on the Program, and copy and
distribute such modifications or work under the terms of Section 1
above, provided that you also meet all of these conditions:

          <ol type=a start=1>
<li>You must cause the modified files to carry prominent notices
stating that you changed the files and the date of any change.

          <li>You must cause any work that you distribute or publish, that in
whole or in part contains or is derived from the Program or any
part thereof, to be licensed as a whole at no charge to all third
parties under the terms of this License.

          <li>If the modified program normally reads commands interactively
when run, you must cause it, when started running for such
interactive use in the most ordinary way, to print or display an
announcement including an appropriate copyright notice and a
notice that there is no warranty (or else, saying that you provide
a warranty) and that users may redistribute the program under
these conditions, and telling the user how to view a copy of this
License.  (Exception: if the Program itself is interactive but
does not normally print such an announcement, your work based on
the Program is not required to print an announcement.)
          </ol>

     <p>These requirements apply to the modified work as a whole.  If
identifiable sections of that work are not derived from the Program,
and can be reasonably considered independent and separate works in
themselves, then this License, and its terms, do not apply to those
sections when you distribute them as separate works.  But when you
distribute the same sections as part of a whole which is a work based
on the Program, the distribution of the whole must be on the terms of
this License, whose permissions for other licensees extend to the
entire whole, and thus to each and every part regardless of who wrote it.

     <p>Thus, it is not the intent of this section to claim rights or contest
your rights to work written entirely by you; rather, the intent is to
exercise the right to control the distribution of derivative or
collective works based on the Program.

     <p>In addition, mere aggregation of another work not based on the Program
with the Program (or with a work based on the Program) on a volume of
a storage or distribution medium does not bring the other work under
the scope of this License.

     <li>You may copy and distribute the Program (or a work based on it,
under Section 2) in object code or executable form under the terms of
Sections 1 and 2 above provided that you also do one of the following:

          <ol type=a start=1>
<li>Accompany it with the complete corresponding machine-readable
source code, which must be distributed under the terms of Sections
1 and 2 above on a medium customarily used for software interchange; or,

          <li>Accompany it with a written offer, valid for at least three
years, to give any third party, for a charge no more than your
cost of physically performing source distribution, a complete
machine-readable copy of the corresponding source code, to be
distributed under the terms of Sections 1 and 2 above on a medium
customarily used for software interchange; or,

          <li>Accompany it with the information you received as to the offer
to distribute corresponding source code.  (This alternative is
allowed only for noncommercial distribution and only if you
received the program in object code or executable form with such
an offer, in accord with Subsection b above.)
          </ol>

     <p>The source code for a work means the preferred form of the work for
making modifications to it.  For an executable work, complete source
code means all the source code for all modules it contains, plus any
associated interface definition files, plus the scripts used to
control compilation and installation of the executable.  However, as a
special exception, the source code distributed need not include
anything that is normally distributed (in either source or binary
form) with the major components (compiler, kernel, and so on) of the
operating system on which the executable runs, unless that component
itself accompanies the executable.

     <p>If distribution of executable or object code is made by offering
access to copy from a designated place, then offering equivalent
access to copy the source code from the same place counts as
distribution of the source code, even though third parties are not
compelled to copy the source along with the object code.

     <li>You may not copy, modify, sublicense, or distribute the Program
except as expressly provided under this License.  Any attempt
otherwise to copy, modify, sublicense or distribute the Program is
void, and will automatically terminate your rights under this License. 
However, parties who have received copies, or rights, from you under
this License will not have their licenses terminated so long as such
parties remain in full compliance.

     <li>You are not required to accept this License, since you have not
signed it.  However, nothing else grants you permission to modify or
distribute the Program or its derivative works.  These actions are
prohibited by law if you do not accept this License.  Therefore, by
modifying or distributing the Program (or any work based on the
Program), you indicate your acceptance of this License to do so, and
all its terms and conditions for copying, distributing or modifying
the Program or works based on it.

     <li>Each time you redistribute the Program (or any work based on the
Program), the recipient automatically receives a license from the
original licensor to copy, distribute or modify the Program subject to
these terms and conditions.  You may not impose any further
restrictions on the recipients' exercise of the rights granted herein. 
You are not responsible for enforcing compliance by third parties to
this License.

     <li>If, as a consequence of a court judgment or allegation of patent
infringement or for any other reason (not limited to patent issues),
conditions are imposed on you (whether by court order, agreement or
otherwise) that contradict the conditions of this License, they do not
excuse you from the conditions of this License.  If you cannot
distribute so as to satisfy simultaneously your obligations under this
License and any other pertinent obligations, then as a consequence you
may not distribute the Program at all.  For example, if a patent
license would not permit royalty-free redistribution of the Program by
all those who receive copies directly or indirectly through you, then
the only way you could satisfy both it and this License would be to
refrain entirely from distribution of the Program.

     <p>If any portion of this section is held invalid or unenforceable under
any particular circumstance, the balance of the section is intended to
apply and the section as a whole is intended to apply in other
circumstances.

     <p>It is not the purpose of this section to induce you to infringe any
patents or other property right claims or to contest validity of any
such claims; this section has the sole purpose of protecting the
integrity of the free software distribution system, which is
implemented by public license practices.  Many people have made
generous contributions to the wide range of software distributed
through that system in reliance on consistent application of that
system; it is up to the author/donor to decide if he or she is willing
to distribute software through any other system and a licensee cannot
impose that choice.

     <p>This section is intended to make thoroughly clear what is believed to
be a consequence of the rest of this License.

     <li>If the distribution and/or use of the Program is restricted in
certain countries either by patents or by copyrighted interfaces, the
original copyright holder who places the Program under this License
may add an explicit geographical distribution limitation excluding
those countries, so that distribution is permitted only in or among
countries not thus excluded.  In such case, this License incorporates
the limitation as if written in the body of this License.

     <li>The Free Software Foundation may publish revised and/or new versions
of the General Public License from time to time.  Such new versions will
be similar in spirit to the present version, but may differ in detail to
address new problems or concerns.

     <p>Each version is given a distinguishing version number.  If the Program
specifies a version number of this License which applies to it and &ldquo;any
later version&rdquo;, you have the option of following the terms and conditions
either of that version or of any later version published by the Free
Software Foundation.  If the Program does not specify a version number of
this License, you may choose any version ever published by the Free Software
Foundation.

     <li>If you wish to incorporate parts of the Program into other free
programs whose distribution conditions are different, write to the author
to ask for permission.  For software which is copyrighted by the Free
Software Foundation, write to the Free Software Foundation; we sometimes
make exceptions for this.  Our decision will be guided by the two goals
of preserving the free status of all derivatives of our free software and
of promoting the sharing and reuse of software generally.

     <div align="center"><b>NO WARRANTY</b></div>

     <li><b>BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY
FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN
OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES
PROVIDE THE PROGRAM &ldquo;AS IS&rdquo; WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED
OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS
TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE
PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,
REPAIR OR CORRECTION.</b>

     <li><b>IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING
WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR
REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,
INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING
OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED
TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY
YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER
PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.</b>
        </ol>

<div align="center"><b>END OF TERMS AND CONDITIONS</b></div>

<h4 class="subsection">How to Apply These Terms to Your New Programs</h4>

<p>If you develop a new program, and you want it to be of the greatest
possible use to the public, the best way to achieve this is to make it
free software which everyone can redistribute and change under these terms.

   <p>To do so, attach the following notices to the program.  It is safest
to attach them to the start of each source file to most effectively
convey the exclusion of warranty; and each file should have at least
the &ldquo;copyright&rdquo; line and a pointer to where the full notice is found.

<pre class="smallexample">     <var>one line to give the program's name and an idea of what it does.</var>
     Copyright (C) 19<var>yy</var>  <var>name of author</var>
     
     This program is free software; you can redistribute it and/or
     modify it under the terms of the GNU General Public License
     as published by the Free Software Foundation; either version 2
     of the License, or (at your option) any later version.
     
     This program is distributed in the hope that it will be useful,
     but WITHOUT ANY WARRANTY; without even the implied warranty of
     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     GNU General Public License for more details.
     
     You should have received a copy of the GNU General Public License
     along with this program; if not, write to the Free Software
     Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
</pre>
   <p>Also add information on how to contact you by electronic and paper mail.

   <p>If the program is interactive, make it output a short notice like this
when it starts in an interactive mode:

<pre class="smallexample">     Gnomovision version 69, Copyright (C) 19<var>yy</var> <var>name of author</var>
     Gnomovision comes with ABSOLUTELY NO WARRANTY; for details
     type `show w'.  This is free software, and you are welcome
     to redistribute it under certain conditions; type `show c'
     for details.
</pre>
   <p>The hypothetical commands `<samp><span class="samp">show w</span></samp>' and `<samp><span class="samp">show c</span></samp>' should show
the appropriate parts of the General Public License.  Of course, the
commands you use may be called something other than `<samp><span class="samp">show w</span></samp>' and
`<samp><span class="samp">show c</span></samp>'; they could even be mouse-clicks or menu items&mdash;whatever
suits your program.

   <p>You should also get your employer (if you work as a programmer) or your
school, if any, to sign a &ldquo;copyright disclaimer&rdquo; for the program, if
necessary.  Here is a sample; alter the names:

<pre class="smallexample">     Yoyodyne, Inc., hereby disclaims all copyright
     interest in the program `Gnomovision'
     (which makes passes at compilers) written
     by James Hacker.
     
     <var>signature of Ty Coon</var>, 1 April 1989
     Ty Coon, President of Vice
</pre>
   <p>This General Public License does not permit incorporating your program into
proprietary programs.  If your program is a subroutine library, you may
consider it more useful to permit linking proprietary applications with the
library.  If this is what you want to do, use the GNU Library General
Public License instead of this License.

<!-- @setfilename lesser.info -->
<p><a name="GNU-Lesser-General-Public-License"></a>

<h3 class="section">GNU Lesser General Public License</h3>

<p><a name="index-license_002c-Lesser-General-Public-License-468"></a><a name="index-license_002c-LGPL-469"></a>
   <pre class="sp">


</pre>
<div align="center">GNU LESSER GENERAL PUBLIC LICENSE</div>
<div align="center">Version 2.1, February 1999</div>

<pre class="display">     Copyright &copy; 1991, 1999 Free Software Foundation, Inc.
     59 Temple Place &ndash; Suite 330, Boston, MA 02111-1307, USA
     
     Everyone is permitted to copy and distribute verbatim copies
     of this license document, but changing it is not allowed.
     
     [This is the first released version of the Lesser GPL.  It also counts
     as the successor of the GNU Library Public License, version 2, hence the
     version number 2.1.]
</pre>
   <h4 class="subsection">Preamble</h4>

<p>The licenses for most software are designed to take away your
freedom to share and change it.  By contrast, the GNU General Public
Licenses are intended to guarantee your freedom to share and change
free software&mdash;to make sure the software is free for all its users.

   <p>This license, the Lesser General Public License, applies to some
specially designated software&mdash;typically libraries&mdash;of the Free
Software Foundation and other authors who decide to use it.  You can use
it too, but we suggest you first think carefully about whether this
license or the ordinary General Public License is the better strategy to
use in any particular case, based on the explanations below.

   <p>When we speak of free software, we are referring to freedom of use,
not price.  Our General Public Licenses are designed to make sure that
you have the freedom to distribute copies of free software (and charge
for this service if you wish); that you receive source code or can get
it if you want it; that you can change the software and use pieces of it
in new free programs; and that you are informed that you can do these
things.

   <p>To protect your rights, we need to make restrictions that forbid
distributors to deny you these rights or to ask you to surrender these
rights.  These restrictions translate to certain responsibilities for
you if you distribute copies of the library or if you modify it.

   <p>For example, if you distribute copies of the library, whether gratis
or for a fee, you must give the recipients all the rights that we gave
you.  You must make sure that they, too, receive or can get the source
code.  If you link other code with the library, you must provide
complete object files to the recipients, so that they can relink them
with the library after making changes to the library and recompiling
it.  And you must show them these terms so they know their rights.

   <p>We protect your rights with a two-step method: (1) we copyright the
library, and (2) we offer you this license, which gives you legal
permission to copy, distribute and/or modify the library.

   <p>To protect each distributor, we want to make it very clear that
there is no warranty for the free library.  Also, if the library is
modified by someone else and passed on, the recipients should know
that what they have is not the original version, so that the original
author's reputation will not be affected by problems that might be
introduced by others.

   <p>Finally, software patents pose a constant threat to the existence of
any free program.  We wish to make sure that a company cannot
effectively restrict the users of a free program by obtaining a
restrictive license from a patent holder.  Therefore, we insist that
any patent license obtained for a version of the library must be
consistent with the full freedom of use specified in this license.

   <p>Most GNU software, including some libraries, is covered by the
ordinary GNU General Public License.  This license, the GNU Lesser
General Public License, applies to certain designated libraries, and
is quite different from the ordinary General Public License.  We use
this license for certain libraries in order to permit linking those
libraries into non-free programs.

   <p>When a program is linked with a library, whether statically or using
a shared library, the combination of the two is legally speaking a
combined work, a derivative of the original library.  The ordinary
General Public License therefore permits such linking only if the
entire combination fits its criteria of freedom.  The Lesser General
Public License permits more lax criteria for linking other code with
the library.

   <p>We call this license the <dfn>Lesser</dfn> General Public License because it
does <em>Less</em> to protect the user's freedom than the ordinary General
Public License.  It also provides other free software developers Less
of an advantage over competing non-free programs.  These disadvantages
are the reason we use the ordinary General Public License for many
libraries.  However, the Lesser license provides advantages in certain
special circumstances.

   <p>For example, on rare occasions, there may be a special need to
encourage the widest possible use of a certain library, so that it becomes
a de-facto standard.  To achieve this, non-free programs must be
allowed to use the library.  A more frequent case is that a free
library does the same job as widely used non-free libraries.  In this
case, there is little to gain by limiting the free library to free
software only, so we use the Lesser General Public License.

   <p>In other cases, permission to use a particular library in non-free
programs enables a greater number of people to use a large body of
free software.  For example, permission to use the GNU C Library in
non-free programs enables many more people to use the whole GNU
operating system, as well as its variant, the GNU/Linux operating
system.

   <p>Although the Lesser General Public License is Less protective of the
users' freedom, it does ensure that the user of a program that is
linked with the Library has the freedom and the wherewithal to run
that program using a modified version of the Library.

   <p>The precise terms and conditions for copying, distribution and
modification follow.  Pay close attention to the difference between a
&ldquo;work based on the library&rdquo; and a &ldquo;work that uses the library&rdquo;.  The
former contains code derived from the library, whereas the latter must
be combined with the library in order to run.

<div align="center">TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION</div>
     <ol type=1 start=0>
<li>This License Agreement applies to any software library or other program
which contains a notice placed by the copyright holder or other
authorized party saying it may be distributed under the terms of this
Lesser General Public License (also called &ldquo;this License&rdquo;).  Each
licensee is addressed as &ldquo;you&rdquo;.

     <p>A &ldquo;library&rdquo; means a collection of software functions and/or data
prepared so as to be conveniently linked with application programs
(which use some of those functions and data) to form executables.

     <p>The &ldquo;Library&rdquo;, below, refers to any such software library or work
which has been distributed under these terms.  A &ldquo;work based on the
Library&rdquo; means either the Library or any derivative work under
copyright law: that is to say, a work containing the Library or a
portion of it, either verbatim or with modifications and/or translated
straightforwardly into another language.  (Hereinafter, translation is
included without limitation in the term &ldquo;modification&rdquo;.)

     <p>&ldquo;Source code&rdquo; for a work means the preferred form of the work for
making modifications to it.  For a library, complete source code means
all the source code for all modules it contains, plus any associated
interface definition files, plus the scripts used to control compilation
and installation of the library.

     <p>Activities other than copying, distribution and modification are not
covered by this License; they are outside its scope.  The act of
running a program using the Library is not restricted, and output from
such a program is covered only if its contents constitute a work based
on the Library (independent of the use of the Library in a tool for
writing it).  Whether that is true depends on what the Library does
and what the program that uses the Library does.

     <li>You may copy and distribute verbatim copies of the Library's
complete source code as you receive it, in any medium, provided that
you conspicuously and appropriately publish on each copy an
appropriate copyright notice and disclaimer of warranty; keep intact
all the notices that refer to this License and to the absence of any
warranty; and distribute a copy of this License along with the
Library.

     <p>You may charge a fee for the physical act of transferring a copy,
and you may at your option offer warranty protection in exchange for a
fee.

     <li>You may modify your copy or copies of the Library or any portion
of it, thus forming a work based on the Library, and copy and
distribute such modifications or work under the terms of Section 1
above, provided that you also meet all of these conditions:

          <ol type=a start=1>
<li>The modified work must itself be a software library.

          <li>You must cause the files modified to carry prominent notices
stating that you changed the files and the date of any change.

          <li>You must cause the whole of the work to be licensed at no
charge to all third parties under the terms of this License.

          <li>If a facility in the modified Library refers to a function or a
table of data to be supplied by an application program that uses
the facility, other than as an argument passed when the facility
is invoked, then you must make a good faith effort to ensure that,
in the event an application does not supply such function or
table, the facility still operates, and performs whatever part of
its purpose remains meaningful.

          <p>(For example, a function in a library to compute square roots has
a purpose that is entirely well-defined independent of the
application.  Therefore, Subsection 2d requires that any
application-supplied function or table used by this function must
be optional: if the application does not supply it, the square
root function must still compute square roots.)
          </ol>

     <p>These requirements apply to the modified work as a whole.  If
identifiable sections of that work are not derived from the Library,
and can be reasonably considered independent and separate works in
themselves, then this License, and its terms, do not apply to those
sections when you distribute them as separate works.  But when you
distribute the same sections as part of a whole which is a work based
on the Library, the distribution of the whole must be on the terms of
this License, whose permissions for other licensees extend to the
entire whole, and thus to each and every part regardless of who wrote
it.

     <p>Thus, it is not the intent of this section to claim rights or contest
your rights to work written entirely by you; rather, the intent is to
exercise the right to control the distribution of derivative or
collective works based on the Library.

     <p>In addition, mere aggregation of another work not based on the Library
with the Library (or with a work based on the Library) on a volume of
a storage or distribution medium does not bring the other work under
the scope of this License.

     <li>You may opt to apply the terms of the ordinary GNU General Public
License instead of this License to a given copy of the Library.  To do
this, you must alter all the notices that refer to this License, so
that they refer to the ordinary GNU General Public License, version 2,
instead of to this License.  (If a newer version than version 2 of the
ordinary GNU General Public License has appeared, then you can specify
that version instead if you wish.)  Do not make any other change in
these notices.

     <p>Once this change is made in a given copy, it is irreversible for
that copy, so the ordinary GNU General Public License applies to all
subsequent copies and derivative works made from that copy.

     <p>This option is useful when you wish to copy part of the code of
the Library into a program that is not a library.

     <li>You may copy and distribute the Library (or a portion or
derivative of it, under Section 2) in object code or executable form
under the terms of Sections 1 and 2 above provided that you accompany
it with the complete corresponding machine-readable source code, which
must be distributed under the terms of Sections 1 and 2 above on a
medium customarily used for software interchange.

     <p>If distribution of object code is made by offering access to copy
from a designated place, then offering equivalent access to copy the
source code from the same place satisfies the requirement to
distribute the source code, even though third parties are not
compelled to copy the source along with the object code.

     <li>A program that contains no derivative of any portion of the
Library, but is designed to work with the Library by being compiled or
linked with it, is called a &ldquo;work that uses the Library&rdquo;.  Such a
work, in isolation, is not a derivative work of the Library, and
therefore falls outside the scope of this License.

     <p>However, linking a &ldquo;work that uses the Library&rdquo; with the Library
creates an executable that is a derivative of the Library (because it
contains portions of the Library), rather than a &ldquo;work that uses the
library&rdquo;.  The executable is therefore covered by this License. 
Section 6 states terms for distribution of such executables.

     <p>When a &ldquo;work that uses the Library&rdquo; uses material from a header file
that is part of the Library, the object code for the work may be a
derivative work of the Library even though the source code is not. 
Whether this is true is especially significant if the work can be
linked without the Library, or if the work is itself a library.  The
threshold for this to be true is not precisely defined by law.

     <p>If such an object file uses only numerical parameters, data
structure layouts and accessors, and small macros and small inline
functions (ten lines or less in length), then the use of the object
file is unrestricted, regardless of whether it is legally a derivative
work.  (Executables containing this object code plus portions of the
Library will still fall under Section 6.)

     <p>Otherwise, if the work is a derivative of the Library, you may
distribute the object code for the work under the terms of Section 6. 
Any executables containing that work also fall under Section 6,
whether or not they are linked directly with the Library itself.

     <li>As an exception to the Sections above, you may also combine or
link a &ldquo;work that uses the Library&rdquo; with the Library to produce a
work containing portions of the Library, and distribute that work
under terms of your choice, provided that the terms permit
modification of the work for the customer's own use and reverse
engineering for debugging such modifications.

     <p>You must give prominent notice with each copy of the work that the
Library is used in it and that the Library and its use are covered by
this License.  You must supply a copy of this License.  If the work
during execution displays copyright notices, you must include the
copyright notice for the Library among them, as well as a reference
directing the user to the copy of this License.  Also, you must do one
of these things:

          <ol type=a start=1>
<li>Accompany the work with the complete corresponding
machine-readable source code for the Library including whatever
changes were used in the work (which must be distributed under
Sections 1 and 2 above); and, if the work is an executable linked
with the Library, with the complete machine-readable &ldquo;work that
uses the Library&rdquo;, as object code and/or source code, so that the
user can modify the Library and then relink to produce a modified
executable containing the modified Library.  (It is understood
that the user who changes the contents of definitions files in the
Library will not necessarily be able to recompile the application
to use the modified definitions.)

          <li>Use a suitable shared library mechanism for linking with the Library.  A
suitable mechanism is one that (1) uses at run time a copy of the
library already present on the user's computer system, rather than
copying library functions into the executable, and (2) will operate
properly with a modified version of the library, if the user installs
one, as long as the modified version is interface-compatible with the
version that the work was made with.

          <li>Accompany the work with a written offer, valid for at
least three years, to give the same user the materials
specified in Subsection 6a, above, for a charge no more
than the cost of performing this distribution.

          <li>If distribution of the work is made by offering access to copy
from a designated place, offer equivalent access to copy the above
specified materials from the same place.

          <li>Verify that the user has already received a copy of these
materials or that you have already sent this user a copy.
          </ol>

     <p>For an executable, the required form of the &ldquo;work that uses the
Library&rdquo; must include any data and utility programs needed for
reproducing the executable from it.  However, as a special exception,
the materials to be distributed need not include anything that is
normally distributed (in either source or binary form) with the major
components (compiler, kernel, and so on) of the operating system on
which the executable runs, unless that component itself accompanies the
executable.

     <p>It may happen that this requirement contradicts the license
restrictions of other proprietary libraries that do not normally
accompany the operating system.  Such a contradiction means you cannot
use both them and the Library together in an executable that you
distribute.

     <li>You may place library facilities that are a work based on the
Library side-by-side in a single library together with other library
facilities not covered by this License, and distribute such a combined
library, provided that the separate distribution of the work based on
the Library and of the other library facilities is otherwise
permitted, and provided that you do these two things:

          <ol type=a start=1>
<li>Accompany the combined library with a copy of the same work
based on the Library, uncombined with any other library
facilities.  This must be distributed under the terms of the
Sections above.

          <li>Give prominent notice with the combined library of the fact
that part of it is a work based on the Library, and explaining
where to find the accompanying uncombined form of the same work.
          </ol>

     <li>You may not copy, modify, sublicense, link with, or distribute
the Library except as expressly provided under this License.  Any
attempt otherwise to copy, modify, sublicense, link with, or
distribute the Library is void, and will automatically terminate your
rights under this License.  However, parties who have received copies,
or rights, from you under this License will not have their licenses
terminated so long as such parties remain in full compliance.

     <li>You are not required to accept this License, since you have not
signed it.  However, nothing else grants you permission to modify or
distribute the Library or its derivative works.  These actions are
prohibited by law if you do not accept this License.  Therefore, by
modifying or distributing the Library (or any work based on the
Library), you indicate your acceptance of this License to do so, and
all its terms and conditions for copying, distributing or modifying
the Library or works based on it.

     <li>Each time you redistribute the Library (or any work based on the
Library), the recipient automatically receives a license from the
original licensor to copy, distribute, link with or modify the Library
subject to these terms and conditions.  You may not impose any further
restrictions on the recipients' exercise of the rights granted herein. 
You are not responsible for enforcing compliance by third parties with
this License.

     <li>If, as a consequence of a court judgment or allegation of patent
infringement or for any other reason (not limited to patent issues),
conditions are imposed on you (whether by court order, agreement or
otherwise) that contradict the conditions of this License, they do not
excuse you from the conditions of this License.  If you cannot
distribute so as to satisfy simultaneously your obligations under this
License and any other pertinent obligations, then as a consequence you
may not distribute the Library at all.  For example, if a patent
license would not permit royalty-free redistribution of the Library by
all those who receive copies directly or indirectly through you, then
the only way you could satisfy both it and this License would be to
refrain entirely from distribution of the Library.

     <p>If any portion of this section is held invalid or unenforceable under any
particular circumstance, the balance of the section is intended to apply,
and the section as a whole is intended to apply in other circumstances.

     <p>It is not the purpose of this section to induce you to infringe any
patents or other property right claims or to contest validity of any
such claims; this section has the sole purpose of protecting the
integrity of the free software distribution system which is
implemented by public license practices.  Many people have made
generous contributions to the wide range of software distributed
through that system in reliance on consistent application of that
system; it is up to the author/donor to decide if he or she is willing
to distribute software through any other system and a licensee cannot
impose that choice.

     <p>This section is intended to make thoroughly clear what is believed to
be a consequence of the rest of this License.

     <li>If the distribution and/or use of the Library is restricted in
certain countries either by patents or by copyrighted interfaces, the
original copyright holder who places the Library under this License may add
an explicit geographical distribution limitation excluding those countries,
so that distribution is permitted only in or among countries not thus
excluded.  In such case, this License incorporates the limitation as if
written in the body of this License.

     <li>The Free Software Foundation may publish revised and/or new
versions of the Lesser General Public License from time to time. 
Such new versions will be similar in spirit to the present version,
but may differ in detail to address new problems or concerns.

     <p>Each version is given a distinguishing version number.  If the Library
specifies a version number of this License which applies to it and
&ldquo;any later version&rdquo;, you have the option of following the terms and
conditions either of that version or of any later version published by
the Free Software Foundation.  If the Library does not specify a
license version number, you may choose any version ever published by
the Free Software Foundation.

     <li>If you wish to incorporate parts of the Library into other free
programs whose distribution conditions are incompatible with these,
write to the author to ask for permission.  For software which is
copyrighted by the Free Software Foundation, write to the Free
Software Foundation; we sometimes make exceptions for this.  Our
decision will be guided by the two goals of preserving the free status
of all derivatives of our free software and of promoting the sharing
and reuse of software generally.

     <div align="center"><b>NO WARRANTY</b></div>

     <li><b>BECAUSE THE LIBRARY IS LICENSED FREE OF CHARGE, THERE IS NO
WARRANTY FOR THE LIBRARY, TO THE EXTENT PERMITTED BY APPLICABLE LAW. 
EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR
OTHER PARTIES PROVIDE THE LIBRARY &ldquo;AS IS&rdquo; WITHOUT WARRANTY OF ANY
KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
PURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE
LIBRARY IS WITH YOU.  SHOULD THE LIBRARY PROVE DEFECTIVE, YOU ASSUME
THE COST OF ALL NECESSARY SERVICING, REPAIR OR CORRECTION.</b>

     <li><b>IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN
WRITING WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY
AND/OR REDISTRIBUTE THE LIBRARY AS PERMITTED ABOVE, BE LIABLE TO YOU
FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR
CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE OR INABILITY TO USE THE
LIBRARY (INCLUDING BUT NOT LIMITED TO LOSS OF DATA OR DATA BEING
RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD PARTIES OR A
FAILURE OF THE LIBRARY TO OPERATE WITH ANY OTHER SOFTWARE), EVEN IF
SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH
DAMAGES.</b>
        </ol>

<div align="center"><b>END OF TERMS AND CONDITIONS</b></div>

<h4 class="subsection">How to Apply These Terms to Your New Libraries</h4>

<p>If you develop a new library, and you want it to be of the greatest
possible use to the public, we recommend making it free software that
everyone can redistribute and change.  You can do so by permitting
redistribution under these terms (or, alternatively, under the terms of the
ordinary General Public License).

   <p>To apply these terms, attach the following notices to the library.  It is
safest to attach them to the start of each source file to most effectively
convey the exclusion of warranty; and each file should have at least the
&ldquo;copyright&rdquo; line and a pointer to where the full notice is found.

<pre class="smallexample">     <var>one line to give the library's name and an idea of what it does.</var>
     Copyright (C) <var>year</var>  <var>name of author</var>
     
     This library is free software; you can redistribute it and/or modify it
     under the terms of the GNU Lesser General Public License as published by
     the Free Software Foundation; either version 2.1 of the License, or (at
     your option) any later version.
     
     This library is distributed in the hope that it will be useful, but
     WITHOUT ANY WARRANTY; without even the implied warranty of
     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
     Lesser General Public License for more details.
     
     You should have received a copy of the GNU Lesser General Public
     License along with this library; if not, write to the Free Software
     Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307,
     USA.
</pre>
   <p>Also add information on how to contact you by electronic and paper mail.

   <p>You should also get your employer (if you work as a programmer) or your
school, if any, to sign a &ldquo;copyright disclaimer&rdquo; for the library, if
necessary.  Here is a sample; alter the names:

<pre class="smallexample">     Yoyodyne, Inc., hereby disclaims all copyright interest in the library
     `Frob' (a library for tweaking knobs) written by James Random Hacker.
     
     <var>signature of Ty Coon</var>, 1 April 1990
     Ty Coon, President of Vice
</pre>
   <p>That's all there is to it!

<!--  -->
<!--  -->
<p><a name="Documentation-License"></a>

<h2 class="unnumbered">Documentation License</h2>

<!-- @setfilename fdl.info -->
<p><a name="GNU-Free-Documentation-License"></a>

<h3 class="section">GNU Free Documentation License</h3>

<p><a name="index-license_002c-FDL-470"></a><a name="index-license_002c-GNU-Free-Documentation-License-471"></a>
   <pre class="sp">


</pre>
<div align="center">GNU FREE DOCUMENTATION LICENSE</div>
<div align="center">Version 1.1, March 2000</div>

<pre class="display">     Copyright &copy; 2000 Free Software Foundation, Inc.
     59 Temple Place, Suite 330, Boston, MA  02111-1307, USA
     
     Everyone is permitted to copy and distribute verbatim copies
     of this license document, but changing it is not allowed.
</pre>
   <h4 class="subsection">Preamble</h4>

<p>The purpose of this License is to make a manual, textbook, or other
written document <dfn>free</dfn> in the sense of freedom: to assure everyone
the effective freedom to copy and redistribute it, with or without
modifying it, either commercially or noncommercially.  Secondarily,
this License preserves for the author and publisher a way to get
credit for their work, while not being considered responsible for
modifications made by others.

   <p>This License is a kind of &ldquo;copyleft&rdquo;, which means that derivative
works of the document must themselves be free in the same sense.  It
complements the GNU General Public License, which is a copyleft
license designed for free software.

   <p>We have designed this License in order to use it for manuals for free
software, because free software needs free documentation: a free
program should come with manuals providing the same freedoms that the
software does.  But this License is not limited to software manuals;
it can be used for any textual work, regardless of subject matter or
whether it is published as a printed book.  We recommend this License
principally for works whose purpose is instruction or reference.

<div align="center">TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION</div>
     <ol type=1 start=1>
<li>APPLICABILITY AND DEFINITIONS

     <p>This License applies to any manual or other work that contains a
notice placed by the copyright holder saying it can be distributed
under the terms of this License.  The &ldquo;Document&rdquo;, below, refers to any
such manual or work.  Any member of the public is a licensee, and is
addressed as &ldquo;you&rdquo;.

     <p>A &ldquo;Modified Version&rdquo; of the Document means any work containing the
Document or a portion of it, either copied verbatim, or with
modifications and/or translated into another language.

     <p>A &ldquo;Secondary Section&rdquo; is a named appendix or a front-matter section of
the Document that deals exclusively with the relationship of the
publishers or authors of the Document to the Document's overall subject
(or to related matters) and contains nothing that could fall directly
within that overall subject.  (For example, if the Document is in part a
textbook of mathematics, a Secondary Section may not explain any
mathematics.)  The relationship could be a matter of historical
connection with the subject or with related matters, or of legal,
commercial, philosophical, ethical or political position regarding
them.

     <p>The &ldquo;Invariant Sections&rdquo; are certain Secondary Sections whose titles
are designated, as being those of Invariant Sections, in the notice
that says that the Document is released under this License.

     <p>The &ldquo;Cover Texts&rdquo; are certain short passages of text that are listed,
as Front-Cover Texts or Back-Cover Texts, in the notice that says that
the Document is released under this License.

     <p>A &ldquo;Transparent&rdquo; copy of the Document means a machine-readable copy,
represented in a format whose specification is available to the
general public, whose contents can be viewed and edited directly and
straightforwardly with generic text editors or (for images composed of
pixels) generic paint programs or (for drawings) some widely available
drawing editor, and that is suitable for input to text formatters or
for automatic translation to a variety of formats suitable for input
to text formatters.  A copy made in an otherwise Transparent file
format whose markup has been designed to thwart or discourage
subsequent modification by readers is not Transparent.  A copy that is
not &ldquo;Transparent&rdquo; is called &ldquo;Opaque&rdquo;.

     <p>Examples of suitable formats for Transparent copies include plain
<span class="sc">ascii</span> without markup, Texinfo input format, LaTeX input format,
<acronym>SGML</acronym> or <acronym>XML</acronym> using a publicly available
<acronym>DTD</acronym>, and standard-conforming simple <acronym>HTML</acronym> designed
for human modification.  Opaque formats include PostScript,
<acronym>PDF</acronym>, proprietary formats that can be read and edited only by
proprietary word processors, <acronym>SGML</acronym> or <acronym>XML</acronym> for which
the <acronym>DTD</acronym> and/or processing tools are not generally available,
and the machine-generated <acronym>HTML</acronym> produced by some word
processors for output purposes only.

     <p>The &ldquo;Title Page&rdquo; means, for a printed book, the title page itself,
plus such following pages as are needed to hold, legibly, the material
this License requires to appear in the title page.  For works in
formats which do not have any title page as such, &ldquo;Title Page&rdquo; means
the text near the most prominent appearance of the work's title,
preceding the beginning of the body of the text.

     <li>VERBATIM COPYING

     <p>You may copy and distribute the Document in any medium, either
commercially or noncommercially, provided that this License, the
copyright notices, and the license notice saying this License applies
to the Document are reproduced in all copies, and that you add no other
conditions whatsoever to those of this License.  You may not use
technical measures to obstruct or control the reading or further
copying of the copies you make or distribute.  However, you may accept
compensation in exchange for copies.  If you distribute a large enough
number of copies you must also follow the conditions in section 3.

     <p>You may also lend copies, under the same conditions stated above, and
you may publicly display copies.

     <li>COPYING IN QUANTITY

     <p>If you publish printed copies of the Document numbering more than 100,
and the Document's license notice requires Cover Texts, you must enclose
the copies in covers that carry, clearly and legibly, all these Cover
Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on
the back cover.  Both covers must also clearly and legibly identify
you as the publisher of these copies.  The front cover must present
the full title with all words of the title equally prominent and
visible.  You may add other material on the covers in addition. 
Copying with changes limited to the covers, as long as they preserve
the title of the Document and satisfy these conditions, can be treated
as verbatim copying in other respects.

     <p>If the required texts for either cover are too voluminous to fit
legibly, you should put the first ones listed (as many as fit
reasonably) on the actual cover, and continue the rest onto adjacent
pages.

     <p>If you publish or distribute Opaque copies of the Document numbering
more than 100, you must either include a machine-readable Transparent
copy along with each Opaque copy, or state in or with each Opaque copy
a publicly-accessible computer-network location containing a complete
Transparent copy of the Document, free of added material, which the
general network-using public has access to download anonymously at no
charge using public-standard network protocols.  If you use the latter
option, you must take reasonably prudent steps, when you begin
distribution of Opaque copies in quantity, to ensure that this
Transparent copy will remain thus accessible at the stated location
until at least one year after the last time you distribute an Opaque
copy (directly or through your agents or retailers) of that edition to
the public.

     <p>It is requested, but not required, that you contact the authors of the
Document well before redistributing any large number of copies, to give
them a chance to provide you with an updated version of the Document.

     <li>MODIFICATIONS

     <p>You may copy and distribute a Modified Version of the Document under
the conditions of sections 2 and 3 above, provided that you release
the Modified Version under precisely this License, with the Modified
Version filling the role of the Document, thus licensing distribution
and modification of the Modified Version to whoever possesses a copy
of it.  In addition, you must do these things in the Modified Version:

          <ol type=A start=1>
<li>Use in the Title Page (and on the covers, if any) a title distinct
from that of the Document, and from those of previous versions
(which should, if there were any, be listed in the History section
of the Document).  You may use the same title as a previous version
if the original publisher of that version gives permission.

          <li>List on the Title Page, as authors, one or more persons or entities
responsible for authorship of the modifications in the Modified
Version, together with at least five of the principal authors of the
Document (all of its principal authors, if it has less than five).

          <li>State on the Title page the name of the publisher of the
Modified Version, as the publisher.

          <li>Preserve all the copyright notices of the Document.

          <li>Add an appropriate copyright notice for your modifications
adjacent to the other copyright notices.

          <li>Include, immediately after the copyright notices, a license notice
giving the public permission to use the Modified Version under the
terms of this License, in the form shown in the Addendum below.

          <li>Preserve in that license notice the full lists of Invariant Sections
and required Cover Texts given in the Document's license notice.

          <li>Include an unaltered copy of this License.

          <li>Preserve the section entitled &ldquo;History&rdquo;, and its title, and add to
it an item stating at least the title, year, new authors, and
publisher of the Modified Version as given on the Title Page.  If
there is no section entitled &ldquo;History&rdquo; in the Document, create one
stating the title, year, authors, and publisher of the Document as
given on its Title Page, then add an item describing the Modified
Version as stated in the previous sentence.

          <li>Preserve the network location, if any, given in the Document for
public access to a Transparent copy of the Document, and likewise
the network locations given in the Document for previous versions
it was based on.  These may be placed in the &ldquo;History&rdquo; section. 
You may omit a network location for a work that was published at
least four years before the Document itself, or if the original
publisher of the version it refers to gives permission.

          <li>In any section entitled &ldquo;Acknowledgments&rdquo; or &ldquo;Dedications&rdquo;,
preserve the section's title, and preserve in the section all the
substance and tone of each of the contributor acknowledgments
and/or dedications given therein.

          <li>Preserve all the Invariant Sections of the Document,
unaltered in their text and in their titles.  Section numbers
or the equivalent are not considered part of the section titles.

          <li>Delete any section entitled &ldquo;Endorsements&rdquo;.  Such a section
may not be included in the Modified Version.

          <li>Do not retitle any existing section as &ldquo;Endorsements&rdquo;
or to conflict in title with any Invariant Section.
          </ol>

     <p>If the Modified Version includes new front-matter sections or
appendices that qualify as Secondary Sections and contain no material
copied from the Document, you may at your option designate some or all
of these sections as invariant.  To do this, add their titles to the
list of Invariant Sections in the Modified Version's license notice. 
These titles must be distinct from any other section titles.

     <p>You may add a section entitled &ldquo;Endorsements&rdquo;, provided it contains
nothing but endorsements of your Modified Version by various
parties&mdash;for example, statements of peer review or that the text has
been approved by an organization as the authoritative definition of a
standard.

     <p>You may add a passage of up to five words as a Front-Cover Text, and a
passage of up to 25 words as a Back-Cover Text, to the end of the list
of Cover Texts in the Modified Version.  Only one passage of
Front-Cover Text and one of Back-Cover Text may be added by (or
through arrangements made by) any one entity.  If the Document already
includes a cover text for the same cover, previously added by you or
by arrangement made by the same entity you are acting on behalf of,
you may not add another; but you may replace the old one, on explicit
permission from the previous publisher that added the old one.

     <p>The author(s) and publisher(s) of the Document do not by this License
give permission to use their names for publicity for or to assert or
imply endorsement of any Modified Version.

     <li>COMBINING DOCUMENTS

     <p>You may combine the Document with other documents released under this
License, under the terms defined in section 4 above for modified
versions, provided that you include in the combination all of the
Invariant Sections of all of the original documents, unmodified, and
list them all as Invariant Sections of your combined work in its
license notice.

     <p>The combined work need only contain one copy of this License, and
multiple identical Invariant Sections may be replaced with a single
copy.  If there are multiple Invariant Sections with the same name but
different contents, make the title of each such section unique by
adding at the end of it, in parentheses, the name of the original
author or publisher of that section if known, or else a unique number. 
Make the same adjustment to the section titles in the list of
Invariant Sections in the license notice of the combined work.

     <p>In the combination, you must combine any sections entitled &ldquo;History&rdquo;
in the various original documents, forming one section entitled
&ldquo;History&rdquo;; likewise combine any sections entitled &ldquo;Acknowledgments&rdquo;,
and any sections entitled &ldquo;Dedications&rdquo;.  You must delete all sections
entitled &ldquo;Endorsements.&rdquo;

     <li>COLLECTIONS OF DOCUMENTS

     <p>You may make a collection consisting of the Document and other documents
released under this License, and replace the individual copies of this
License in the various documents with a single copy that is included in
the collection, provided that you follow the rules of this License for
verbatim copying of each of the documents in all other respects.

     <p>You may extract a single document from such a collection, and distribute
it individually under this License, provided you insert a copy of this
License into the extracted document, and follow this License in all
other respects regarding verbatim copying of that document.

     <li>AGGREGATION WITH INDEPENDENT WORKS

     <p>A compilation of the Document or its derivatives with other separate
and independent documents or works, in or on a volume of a storage or
distribution medium, does not as a whole count as a Modified Version
of the Document, provided no compilation copyright is claimed for the
compilation.  Such a compilation is called an &ldquo;aggregate&rdquo;, and this
License does not apply to the other self-contained works thus compiled
with the Document, on account of their being thus compiled, if they
are not themselves derivative works of the Document.

     <p>If the Cover Text requirement of section 3 is applicable to these
copies of the Document, then if the Document is less than one quarter
of the entire aggregate, the Document's Cover Texts may be placed on
covers that surround only the Document within the aggregate. 
Otherwise they must appear on covers around the whole aggregate.

     <li>TRANSLATION

     <p>Translation is considered a kind of modification, so you may
distribute translations of the Document under the terms of section 4. 
Replacing Invariant Sections with translations requires special
permission from their copyright holders, but you may include
translations of some or all Invariant Sections in addition to the
original versions of these Invariant Sections.  You may include a
translation of this License provided that you also include the
original English version of this License.  In case of a disagreement
between the translation and the original English version of this
License, the original English version will prevail.

     <li>TERMINATION

     <p>You may not copy, modify, sublicense, or distribute the Document except
as expressly provided for under this License.  Any other attempt to
copy, modify, sublicense or distribute the Document is void, and will
automatically terminate your rights under this License.  However,
parties who have received copies, or rights, from you under this
License will not have their licenses terminated so long as such
parties remain in full compliance.

     <li>FUTURE REVISIONS OF THIS LICENSE

     <p>The Free Software Foundation may publish new, revised versions
of the GNU Free Documentation License from time to time.  Such new
versions will be similar in spirit to the present version, but may
differ in detail to address new problems or concerns.  See
<a href="http://www.gnu.org/copyleft/">http://www.gnu.org/copyleft/</a>.

     <p>Each version of the License is given a distinguishing version number. 
If the Document specifies that a particular numbered version of this
License &ldquo;or any later version&rdquo; applies to it, you have the option of
following the terms and conditions either of that specified version or
of any later version that has been published (not as a draft) by the
Free Software Foundation.  If the Document does not specify a version
number of this License, you may choose any version ever published (not
as a draft) by the Free Software Foundation.
        </ol>

<div align="center"><b>END OF TERMS AND CONDITIONS</b></div>

<h4 class="subsection">How to use this License for your documents</h4>

<p>To use this License in a document you have written, include a copy of
the License in the document and put the following copyright and
license notices just after the title page:

<pre class="smallexample">       Copyright (C)  <var>year</var>  <var>your name</var>.
       Permission is granted to copy, distribute and/or modify this document
       under the terms of the GNU Free Documentation License, Version 1.1
       or any later version published by the Free Software Foundation;
       with the Invariant Sections being <var>list their titles</var>, with the
       Front-Cover Texts being <var>list</var>, and with the Back-Cover Texts being <var>list</var>.
       A copy of the license is included in the section entitled ``GNU
       Free Documentation License''.
</pre>
   <p>If you have no Invariant Sections, write &ldquo;with no Invariant Sections&rdquo;
instead of saying which ones are invariant.  If you have no
Front-Cover Texts, write &ldquo;no Front-Cover Texts&rdquo; instead of
&ldquo;Front-Cover Texts being <var>list</var>&rdquo;; likewise for Back-Cover Texts.

   <p>If your document contains nontrivial examples of program code, we
recommend releasing these examples in parallel under your choice of
free software license, such as the GNU General Public License,
to permit their use in free software.

<!-- Local Variables: -->
<!-- ispell-local-pdict: "ispell-dict" -->
<!-- End: -->
<!--  -->
<!--  -->
<p><a name="Indices"></a>

<h2 class="unnumbered">Indices</h2>

<!--  -->
<p><a name="Concept-Index"></a>

<h3 class="section">Index of Concepts</h3>

<ul class="index-cp" compact>
<li><a href="#index-Architectures-180">Architectures</a>: <a href="#Linux-Architectures">Linux Architectures</a></li>
<li><a href="#index-binary-debs-384">binary debs</a>: <a href="#Removing-the-Debian-DEB">Removing the Debian DEB</a></li>
<li><a href="#index-binary-debs-377">binary debs</a>: <a href="#Installing-the-Debian-DEB">Installing the Debian DEB</a></li>
<li><a href="#index-binary-debs-246">binary debs</a>: <a href="#Configuring-the-Debian-DEB">Configuring the Debian DEB</a></li>
<li><a href="#index-binary-debs-225">binary debs</a>: <a href="#Downloading-the-Debian-DEB">Downloading the Debian DEB</a></li>
<li><a href="#index-binary-rpms-382">binary rpms</a>: <a href="#Removing-the-Binary-RPM">Removing the Binary RPM</a></li>
<li><a href="#index-binary-rpms-375">binary rpms</a>: <a href="#Installing-the-Binary-RPM">Installing the Binary RPM</a></li>
<li><a href="#index-binary-rpms-236">binary rpms</a>: <a href="#Configuring-the-Binary-RPM">Configuring the Binary RPM</a></li>
<li><a href="#index-binary-rpms-223">binary rpms</a>: <a href="#Downloading-the-Binary-RPM">Downloading the Binary RPM</a></li>
<li><a href="#index-bug-reports_002c-automatic-generation-459">bug reports, automatic generation</a>: <a href="#Automatic-Problem-Reports">Automatic Problem Reports</a></li>
<li><a href="#index-bug-reports_002c-generating-455">bug reports, generating</a>: <a href="#Generating-Problem-Reports">Generating Problem Reports</a></li>
<li><a href="#index-bug-reports_002c-stand-along-generation-462">bug reports, stand along generation</a>: <a href="#Stand-Alone-Problem-Reports">Stand Alone Problem Reports</a></li>
<li><a href="#index-bugs-215">bugs</a>: <a href="#Bugs">Bugs</a></li>
<li><a href="#index-bugs_002c-known-217">bugs, known</a>: <a href="#Known-Defects">Known Defects</a></li>
<li><a href="#index-bugs_002c-reporting-452">bugs, reporting</a>: <a href="#Problem-Reports">Problem Reports</a></li>
<li><a href="#index-building-366">building</a>: <a href="#Building">Building</a></li>
<li><a href="#index-building_002c-source-dscs-369">building, source dscs</a>: <a href="#Building-from-the-Debian-DSC">Building from the Debian DSC</a></li>
<li><a href="#index-building_002c-source-srpm-367">building, source srpm</a>: <a href="#Building-from-the-Source-RPM">Building from the Source RPM</a></li>
<li><a href="#index-building_002c-tar-ball-371">building, tar ball</a>: <a href="#Building-from-the-Tar-Ball">Building from the Tar Ball</a></li>
<li><a href="#index-checkout_002c-cvs-232">checkout, cvs</a>: <a href="#Downloading-from-CVS">Downloading from CVS</a></li>
<li><a href="#index-compatibility-177">compatibility</a>: <a href="#Compatibility">Compatibility</a></li>
<li><a href="#index-compatibility-173">compatibility</a>: <a href="#STREAMS-Compatibility">STREAMS Compatibility</a></li>
<li><a href="#index-configuration-234">configuration</a>: <a href="#Configuration">Configuration</a></li>
<li><a href="#index-configure-environment-variables-325">configure environment variables</a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-configure-options-275">configure options</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-configuring_002c-binary-debs-245">configuring, binary debs</a>: <a href="#Configuring-the-Debian-DEB">Configuring the Debian DEB</a></li>
<li><a href="#index-configuring_002c-binary-rpms-235">configuring, binary rpms</a>: <a href="#Configuring-the-Binary-RPM">Configuring the Binary RPM</a></li>
<li><a href="#index-configuring_002c-source-dscs-271">configuring, source dscs</a>: <a href="#Configuring-the-Debian-DSC">Configuring the Debian DSC</a></li>
<li><a href="#index-configuring_002c-source-srpm-247">configuring, source srpm</a>: <a href="#Configuring-the-Source-RPM">Configuring the Source RPM</a></li>
<li><a href="#index-configuring_002c-tar-ball-273">configuring, tar ball</a>: <a href="#Configuring-the-Tar-Ball">Configuring the Tar Ball</a></li>
<li><a href="#index-conformance-172">conformance</a>: <a href="#Conformance">Conformance</a></li>
<li><a href="#index-contributors-3">contributors</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-conventions-25">conventions</a>: <a href="#Conventions">Conventions</a></li>
<li><a href="#index-credits-1">credits</a>: <a href="#Acknowledgements">Acknowledgements</a></li>
<li><a href="#index-cvs-233">cvs</a>: <a href="#Downloading-from-CVS">Downloading from CVS</a></li>
<li><a href="#index-definitions-26">definitions</a>: <a href="#Conventions">Conventions</a></li>
<li><a href="#index-developing-121">developing</a>: <a href="#Development">Development</a></li>
<li><a href="#index-downloading-221">downloading</a>: <a href="#Downloading">Downloading</a></li>
<li><a href="#index-downloading_002c-binary-rpms-222">downloading, binary rpms</a>: <a href="#Downloading-the-Binary-RPM">Downloading the Binary RPM</a></li>
<li><a href="#index-downloading_002c-debian-debs-224">downloading, debian debs</a>: <a href="#Downloading-the-Debian-DEB">Downloading the Debian DEB</a></li>
<li><a href="#index-downloading_002c-debian-dscs-228">downloading, debian dscs</a>: <a href="#Downloading-the-Debian-DSC">Downloading the Debian DSC</a></li>
<li><a href="#index-downloading_002c-source-srpm-226">downloading, source srpm</a>: <a href="#Downloading-the-Source-RPM">Downloading the Source RPM</a></li>
<li><a href="#index-downloading_002c-tar-ball-230">downloading, tar ball</a>: <a href="#Downloading-the-Tar-Ball">Downloading the Tar Ball</a></li>
<li><a href="#index-drivers-39">drivers</a>: <a href="#Drivers">Drivers</a></li>
<li><a href="#index-generating-bug-reports-463">generating bug reports</a>: <a href="#Stand-Alone-Problem-Reports">Stand Alone Problem Reports</a></li>
<li><a href="#index-generating-bug-reports-456">generating bug reports</a>: <a href="#Generating-Problem-Reports">Generating Problem Reports</a></li>
<li><a href="#index-generating-bug-reports-automatically-460">generating bug reports automatically</a>: <a href="#Automatic-Problem-Reports">Automatic Problem Reports</a></li>
<li><a href="#index-generating-problem-reports-454">generating problem reports</a>: <a href="#Generating-Problem-Reports">Generating Problem Reports</a></li>
<li><a href="#index-generating-problem-reports-automatically-458">generating problem reports automatically</a>: <a href="#Automatic-Problem-Reports">Automatic Problem Reports</a></li>
<li><a href="#index-generating-problem-reports-stand-alone-461">generating problem reports stand alone</a>: <a href="#Stand-Alone-Problem-Reports">Stand Alone Problem Reports</a></li>
<li><a href="#index-GNU_002fLinux-Distributions-178">GNU/Linux Distributions</a>: <a href="#GNU_002fLinux-Distributions">GNU/Linux Distributions</a></li>
<li><a href="#index-headers-29">headers</a>: <a href="#Files">Files</a></li>
<li><a href="#index-history-219">history</a>: <a href="#History">History</a></li>
<li><a href="#index-installation-220">installation</a>: <a href="#Installation">Installation</a></li>
<li><a href="#index-installing-373">installing</a>: <a href="#Installing">Installing</a></li>
<li><a href="#index-installing_002c-binary-debs-376">installing, binary debs</a>: <a href="#Installing-the-Debian-DEB">Installing the Debian DEB</a></li>
<li><a href="#index-installing_002c-binary-rpms-374">installing, binary rpms</a>: <a href="#Installing-the-Binary-RPM">Installing the Binary RPM</a></li>
<li><a href="#index-installing_002c-tar-ball-378">installing, tar ball</a>: <a href="#Installing-the-Tar-Ball">Installing the Tar Ball</a></li>
<li><a href="#index-introduction-20">introduction</a>: <a href="#Introduction">Introduction</a></li>
<li><a href="#index-Kernel-179">Kernel</a>: <a href="#Linux-Kernel">Linux Kernel</a></li>
<li><a href="#index-known-bugs-216">known bugs</a>: <a href="#Known-Defects">Known Defects</a></li>
<li><a href="#index-known-problems-464">known problems</a>: <a href="#Known-Problems">Known Problems</a></li>
<li><a href="#index-libraries-86">libraries</a>: <a href="#Libraries">Libraries</a></li>
<li><a href="#index-license_002c-FDL-470">license, FDL</a>: <a href="#GNU-Free-Documentation-License">GNU Free Documentation License</a></li>
<li><a href="#index-license_002c-GNU-Free-Documentation-License-471">license, GNU Free Documentation License</a>: <a href="#GNU-Free-Documentation-License">GNU Free Documentation License</a></li>
<li><a href="#index-license_002c-GNU-General-Public-License-467">license, GNU General Public License</a>: <a href="#GNU-General-Public-License">GNU General Public License</a></li>
<li><a href="#index-license_002c-GPL-466">license, GPL</a>: <a href="#GNU-General-Public-License">GNU General Public License</a></li>
<li><a href="#index-license_002c-Lesser-General-Public-License-468">license, Lesser General Public License</a>: <a href="#GNU-Lesser-General-Public-License">GNU Lesser General Public License</a></li>
<li><a href="#index-license_002c-LGPL-469">license, LGPL</a>: <a href="#GNU-Lesser-General-Public-License">GNU Lesser General Public License</a></li>
<li><a href="#index-licensing-22">licensing</a>: <a href="#Notice">Notice</a></li>
<li><a href="#index-Linux-Fast_002dSTREAMS-184">Linux Fast-STREAMS</a>: <a href="#Linux-Fast_002dSTREAMS">Linux Fast-STREAMS</a></li>
<li><a href="#index-Linux-STREAMS-183">Linux STREAMS</a>: <a href="#Linux-STREAMS">Linux STREAMS</a></li>
<li><a href="#index-g_t_0040value_007bPACKAGE_007d_0040_002d_002dcore_0040_002d_002d_0040value_007b_005fkversion_007d_0040_002d_002d_0040value_007bVERSION_007d_0040_002d_002d_0040value_007bPACKAGE_005fRPMRELEASE_007d_0040value_007bPACKAGE_005fRPMEXTRA_007d_0040_002d_002ei686_0040_002d_002erpm-237">LiS-core-2.6.17-1.2139_FC5-2.18.4.rc2-1.FC5.i686.rpm</a>: <a href="#Configuring-the-Binary-RPM">Configuring the Binary RPM</a></li>
<li><a href="#index-g_t_0040value_007bPACKAGE_007d_0040_002d_002ddev_0040_002d_002d_0040value_007bVERSION_007d_0040_002d_002d_0040value_007bPACKAGE_005fRPMRELEASE_007d_0040value_007bPACKAGE_005fRPMEXTRA_007d_0040_002d_002ei686_0040_002d_002erpm-239">LiS-dev-2.18.4.rc2-1.FC5.i686.rpm</a>: <a href="#Configuring-the-Binary-RPM">Configuring the Binary RPM</a></li>
<li><a href="#index-g_t_0040value_007bPACKAGE_007d_0040_002d_002ddevel_0040_002d_002d_0040value_007bVERSION_007d_0040_002d_002d_0040value_007bPACKAGE_005fRPMRELEASE_007d_0040value_007bPACKAGE_005fRPMEXTRA_007d_0040_002d_002ei686_0040_002d_002erpm-240">LiS-devel-2.18.4.rc2-1.FC5.i686.rpm</a>: <a href="#Configuring-the-Binary-RPM">Configuring the Binary RPM</a></li>
<li><a href="#index-g_t_0040value_007bPACKAGE_007d_0040_002d_002ddoc_0040_002d_002d_0040value_007bVERSION_007d_0040_002d_002d_0040value_007bPACKAGE_005fRPMRELEASE_007d_0040value_007bPACKAGE_005fRPMEXTRA_007d_0040_002d_002ei686_0040_002d_002erpm-241">LiS-doc-2.18.4.rc2-1.FC5.i686.rpm</a>: <a href="#Configuring-the-Binary-RPM">Configuring the Binary RPM</a></li>
<li><a href="#index-g_t_0040value_007bPACKAGE_007d_0040_002d_002dinfo_0040_002d_002d_0040value_007b_005fkversion_007d_0040_002d_002d_0040value_007bVERSION_007d_0040_002d_002d_0040value_007bPACKAGE_005fRPMRELEASE_007d_0040value_007bPACKAGE_005fRPMEXTRA_007d_0040_002d_002ei686_0040_002d_002erpm-238">LiS-info-2.6.17-1.2139_FC5-2.18.4.rc2-1.FC5.i686.rpm</a>: <a href="#Configuring-the-Binary-RPM">Configuring the Binary RPM</a></li>
<li><a href="#index-g_t_0040value_007bPACKAGE_007d_0040_002d_002dlib_0040_002d_002d_0040value_007bVERSION_007d_0040_002d_002d_0040value_007bPACKAGE_005fRPMRELEASE_007d_0040value_007bPACKAGE_005fRPMEXTRA_007d_0040_002d_002ei686_0040_002d_002erpm-242">LiS-lib-2.18.4.rc2-1.FC5.i686.rpm</a>: <a href="#Configuring-the-Binary-RPM">Configuring the Binary RPM</a></li>
<li><a href="#index-g_t_0040value_007bPACKAGE_007d_0040_002d_002dsource_0040_002d_002d_0040value_007bVERSION_007d_0040_002d_002d_0040value_007bPACKAGE_005fRPMRELEASE_007d_0040value_007bPACKAGE_005fRPMEXTRA_007d_0040_002d_002ei686_0040_002d_002erpm-243">LiS-source-2.18.4.rc2-1.FC5.i686.rpm</a>: <a href="#Configuring-the-Binary-RPM">Configuring the Binary RPM</a></li>
<li><a href="#index-g_t_0040value_007bPACKAGE_007d_0040_002d_002dutil_0040_002d_002d_0040value_007bVERSION_007d_0040_002d_002d_0040value_007bPACKAGE_005fRPMRELEASE_007d_0040value_007bPACKAGE_005fRPMEXTRA_007d_0040_002d_002ei686_0040_002d_002erpm-244">LiS-util-2.18.4.rc2-1.FC5.i686.rpm</a>: <a href="#Configuring-the-Binary-RPM">Configuring the Binary RPM</a></li>
<li><a href="#index-loading-391">loading</a>: <a href="#Loading">Loading</a></li>
<li><a href="#index-loading-kernel-modules-397">loading kernel modules</a>: <a href="#Loading">Loading</a></li>
<li><a href="#index-maturity-214">maturity</a>: <a href="#Maturity">Maturity</a></li>
<li><a href="#index-modules-75">modules</a>: <a href="#Modules">Modules</a></li>
<li><a href="#index-NexusWare-396">NexusWare</a>: <a href="#Loading">Loading</a></li>
<li><a href="#index-notice-21">notice</a>: <a href="#Notice">Notice</a></li>
<li><a href="#index-objective-27">objective</a>: <a href="#Objective">Objective</a></li>
<li><a href="#index-organization-24">organization</a>: <a href="#Organization">Organization</a></li>
<li><a href="#index-overview-23">overview</a>: <a href="#Overview">Overview</a></li>
<li><a href="#index-porting-174">porting</a>: <a href="#Porting">Porting</a></li>
<li><a href="#index-post_002dinstallation-checks-449">post-installation checks</a>: <a href="#Post_002dinstallation-Checks">Post-installation Checks</a></li>
<li><a href="#index-pre_002dinstallation-checks-448">pre-installation checks</a>: <a href="#Pre_002dinstallation-Checks">Pre-installation Checks</a></li>
<li><a href="#index-prerequisites-176">prerequisites</a>: <a href="#Prerequisites">Prerequisites</a></li>
<li><a href="#index-problem-reports-451">problem reports</a>: <a href="#Problem-Reports">Problem Reports</a></li>
<li><a href="#index-problems_002c-known-465">problems, known</a>: <a href="#Known-Problems">Known Problems</a></li>
<li><a href="#index-reference-28">reference</a>: <a href="#Reference">Reference</a></li>
<li><a href="#index-release-LiS_002d2_002e16_002e16_002d1-213">release LiS-2.16.16-1</a>: <a href="#Release-LiS_002d2_002e16_002e16_002d1">Release LiS-2.16.16-1</a></li>
<li><a href="#index-release-LiS_002d2_002e16_002e18_002d1-212">release LiS-2.16.18-1</a>: <a href="#Release-LiS_002d2_002e16_002e18_002d1">Release LiS-2.16.18-1</a></li>
<li><a href="#index-release-LiS_002d2_002e16_002e18_002d10-203">release LiS-2.16.18-10</a>: <a href="#Release-LiS_002d2_002e16_002e18_002d10">Release LiS-2.16.18-10</a></li>
<li><a href="#index-release-LiS_002d2_002e16_002e18_002d11-202">release LiS-2.16.18-11</a>: <a href="#Release-LiS_002d2_002e16_002e18_002d11">Release LiS-2.16.18-11</a></li>
<li><a href="#index-release-LiS_002d2_002e16_002e18_002d12-201">release LiS-2.16.18-12</a>: <a href="#Release-LiS_002d2_002e16_002e18_002d12">Release LiS-2.16.18-12</a></li>
<li><a href="#index-release-LiS_002d2_002e16_002e18_002d13-200">release LiS-2.16.18-13</a>: <a href="#Release-LiS_002d2_002e16_002e18_002d13">Release LiS-2.16.18-13</a></li>
<li><a href="#index-release-LiS_002d2_002e16_002e18_002d14-199">release LiS-2.16.18-14</a>: <a href="#Release-LiS_002d2_002e16_002e18_002d14">Release LiS-2.16.18-14</a></li>
<li><a href="#index-release-LiS_002d2_002e16_002e18_002d15-198">release LiS-2.16.18-15</a>: <a href="#Release-LiS_002d2_002e16_002e18_002d15">Release LiS-2.16.18-15</a></li>
<li><a href="#index-release-LiS_002d2_002e16_002e18_002d16-197">release LiS-2.16.18-16</a>: <a href="#Release-LiS_002d2_002e16_002e18_002d16">Release LiS-2.16.18-16</a></li>
<li><a href="#index-release-LiS_002d2_002e16_002e18_002d17-196">release LiS-2.16.18-17</a>: <a href="#Release-LiS_002d2_002e16_002e18_002d17">Release LiS-2.16.18-17</a></li>
<li><a href="#index-release-LiS_002d2_002e16_002e18_002d18-195">release LiS-2.16.18-18</a>: <a href="#Release-LiS_002d2_002e16_002e18_002d18">Release LiS-2.16.18-18</a></li>
<li><a href="#index-release-LiS_002d2_002e16_002e18_002d19-194">release LiS-2.16.18-19</a>: <a href="#Release-LiS_002d2_002e16_002e18_002d19">Release LiS-2.16.18-19</a></li>
<li><a href="#index-release-LiS_002d2_002e16_002e18_002d2-211">release LiS-2.16.18-2</a>: <a href="#Release-LiS_002d2_002e16_002e18_002d2">Release LiS-2.16.18-2</a></li>
<li><a href="#index-release-LiS_002d2_002e16_002e18_002d20-193">release LiS-2.16.18-20</a>: <a href="#Release-LiS_002d2_002e16_002e18_002d20">Release LiS-2.16.18-20</a></li>
<li><a href="#index-release-LiS_002d2_002e16_002e18_002d21-192">release LiS-2.16.18-21</a>: <a href="#Release-LiS_002d2_002e16_002e18_002d21">Release LiS-2.16.18-21</a></li>
<li><a href="#index-release-LiS_002d2_002e16_002e18_002d22-191">release LiS-2.16.18-22</a>: <a href="#Release-LiS_002d2_002e16_002e18_002d22">Release LiS-2.16.18-22</a></li>
<li><a href="#index-release-LiS_002d2_002e16_002e18_002d3-210">release LiS-2.16.18-3</a>: <a href="#Release-LiS_002d2_002e16_002e18_002d3">Release LiS-2.16.18-3</a></li>
<li><a href="#index-release-LiS_002d2_002e16_002e18_002d4-209">release LiS-2.16.18-4</a>: <a href="#Release-LiS_002d2_002e16_002e18_002d4">Release LiS-2.16.18-4</a></li>
<li><a href="#index-release-LiS_002d2_002e16_002e18_002d5-208">release LiS-2.16.18-5</a>: <a href="#Release-LiS_002d2_002e16_002e18_002d5">Release LiS-2.16.18-5</a></li>
<li><a href="#index-release-LiS_002d2_002e16_002e18_002d6-207">release LiS-2.16.18-6</a>: <a href="#Release-LiS_002d2_002e16_002e18_002d6">Release LiS-2.16.18-6</a></li>
<li><a href="#index-release-LiS_002d2_002e16_002e18_002d7-206">release LiS-2.16.18-7</a>: <a href="#Release-LiS_002d2_002e16_002e18_002d7">Release LiS-2.16.18-7</a></li>
<li><a href="#index-release-LiS_002d2_002e16_002e18_002d8-205">release LiS-2.16.18-8</a>: <a href="#Release-LiS_002d2_002e16_002e18_002d8">Release LiS-2.16.18-8</a></li>
<li><a href="#index-release-LiS_002d2_002e16_002e18_002d9-204">release LiS-2.16.18-9</a>: <a href="#Release-LiS_002d2_002e16_002e18_002d9">Release LiS-2.16.18-9</a></li>
<li><a href="#index-release-LiS_002d2_002e16_002e19-190">release LiS-2.16.19</a>: <a href="#Release-LiS_002d2_002e16_002e19">Release LiS-2.16.19</a></li>
<li><a href="#index-release-LiS_002d2_002e18_002e1-189">release LiS-2.18.1</a>: <a href="#Release-LiS_002d2_002e18_002e1">Release LiS-2.18.1</a></li>
<li><a href="#index-release-LiS_002d2_002e18_002e2-188">release LiS-2.18.2</a>: <a href="#Release-LiS_002d2_002e18_002e2">Release LiS-2.18.2</a></li>
<li><a href="#index-release-LiS_002d2_002e18_002e2-187">release LiS-2.18.2</a>: <a href="#Release-LiS_002d2_002e18_002e2">Release LiS-2.18.2</a></li>
<li><a href="#index-release-_0040value_007bPACKAGE_007d_002d_0040value_007bVERSION_007d-186">release LiS-2.18.4.rc2</a>: <a href="#Release-LiS_002d2_002e18_002e4_002erc2">Release LiS-2.18.4.rc2</a></li>
<li><a href="#index-release-notes-185">release notes</a>: <a href="#Release-Notes">Release Notes</a></li>
<li><a href="#index-releases-175">releases</a>: <a href="#Releases">Releases</a></li>
<li><a href="#index-removing-380">removing</a>: <a href="#Removing">Removing</a></li>
<li><a href="#index-removing_002c-binary-debs-383">removing, binary debs</a>: <a href="#Removing-the-Debian-DEB">Removing the Debian DEB</a></li>
<li><a href="#index-removing_002c-binary-rpms-381">removing, binary rpms</a>: <a href="#Removing-the-Binary-RPM">Removing the Binary RPM</a></li>
<li><a href="#index-removing_002c-source-dscs-387">removing, source dscs</a>: <a href="#Removing-the-Debian-DSC">Removing the Debian DSC</a></li>
<li><a href="#index-removing_002c-source-srpm-385">removing, source srpm</a>: <a href="#Removing-the-Source-RPM">Removing the Source RPM</a></li>
<li><a href="#index-removing_002c-tar-ball-389">removing, tar ball</a>: <a href="#Removing-the-Tar-Ball">Removing the Tar Ball</a></li>
<li><a href="#index-reporting-bugs-453">reporting bugs</a>: <a href="#Problem-Reports">Problem Reports</a></li>
<li><a href="#index-schedule-218">schedule</a>: <a href="#Schedule">Schedule</a></li>
<li><a href="#index-source-dscs-388">source dscs</a>: <a href="#Removing-the-Debian-DSC">Removing the Debian DSC</a></li>
<li><a href="#index-source-dscs-370">source dscs</a>: <a href="#Building-from-the-Debian-DSC">Building from the Debian DSC</a></li>
<li><a href="#index-source-dscs-272">source dscs</a>: <a href="#Configuring-the-Debian-DSC">Configuring the Debian DSC</a></li>
<li><a href="#index-source-dscs-229">source dscs</a>: <a href="#Downloading-the-Debian-DSC">Downloading the Debian DSC</a></li>
<li><a href="#index-source-rpms-386">source rpms</a>: <a href="#Removing-the-Source-RPM">Removing the Source RPM</a></li>
<li><a href="#index-source-rpms-368">source rpms</a>: <a href="#Building-from-the-Source-RPM">Building from the Source RPM</a></li>
<li><a href="#index-source-rpms-248">source rpms</a>: <a href="#Configuring-the-Source-RPM">Configuring the Source RPM</a></li>
<li><a href="#index-source-rpms-227">source rpms</a>: <a href="#Downloading-the-Source-RPM">Downloading the Source RPM</a></li>
<li><a href="#index-sponsors-2">sponsors</a>: <a href="#Sponsors">Sponsors</a></li>
<li><a href="#index-tar-ball-390">tar ball</a>: <a href="#Removing-the-Tar-Ball">Removing the Tar Ball</a></li>
<li><a href="#index-tar-ball-379">tar ball</a>: <a href="#Installing-the-Tar-Ball">Installing the Tar Ball</a></li>
<li><a href="#index-tar-ball-372">tar ball</a>: <a href="#Building-from-the-Tar-Ball">Building from the Tar Ball</a></li>
<li><a href="#index-tar-ball-274">tar ball</a>: <a href="#Configuring-the-Tar-Ball">Configuring the Tar Ball</a></li>
<li><a href="#index-tar-ball-231">tar ball</a>: <a href="#Downloading-the-Tar-Ball">Downloading the Tar Ball</a></li>
<li><a href="#index-test-suites-447">test suites</a>: <a href="#Test-Suites">Test Suites</a></li>
<li><a href="#index-test-suites_002c-running-450">test suites, running</a>: <a href="#Running-Test-Suites">Running Test Suites</a></li>
<li><a href="#index-troubleshooting-446">troubleshooting</a>: <a href="#Troubleshooting">Troubleshooting</a></li>
<li><a href="#index-utilities-101">utilities</a>: <a href="#Utilities">Utilities</a></li>
   </ul><p><a name="Type-Index"></a>

<h3 class="section">Index of Data Types</h3>



<ul class="index-tp" compact>
<li><a href="#index-dev_005ft-127"><code>dev_t</code></a>: <a href="#Major_002fMinor-Device-Numbering">Major/Minor Device Numbering</a></li>
<li><a href="#index-lis_005fspin_005flock_005ft-143"><code>lis_spin_lock_t</code></a>: <a href="#LiS-Spin-Locks">LiS Spin Locks</a></li>
<li><a href="#index-strapush-73"><code>strapush</code></a>: <a href="#sad">sad</a></li>
<li><a href="#index-struct-lis_005fpci_005fdev-138"><code>struct lis_pci_dev</code></a>: <a href="#The-LiS-PCI-Device-Structure">The LiS PCI Device Structure</a></li>
<li><a href="#index-struct-msgb-170"><code>struct msgb</code></a>: <a href="#Utility-Prototypes">Utility Prototypes</a></li>
<li><a href="#index-struct-pci_005fdev-123"><code>struct pci_dev</code></a>: <a href="#PCI-Interface">PCI Interface</a></li>
<li><a href="#index-struct-str_005flist-71"><code>struct str_list</code></a>: <a href="#sad">sad</a></li>
<li><a href="#index-struct-strapush-69"><code>struct strapush</code></a>: <a href="#sad">sad</a></li>
<li><a href="#index-struct-strioctl-64"><code>struct strioctl</code></a>: <a href="#mini_002dmux">mini-mux</a></li>
<li><a href="#index-struct-strioctl-57"><code>struct strioctl</code></a>: <a href="#loop_002daround">loop-around</a></li>
<li><a href="#index-struct-task_005fstruct-148"><code>struct task_struct</code></a>: <a href="#Debugging-Semaphores">Debugging Semaphores</a></li>
<li><a href="#index-struct-task_005fstruct-146"><code>struct task_struct</code></a>: <a href="#Debugging-Spin-Locks">Debugging Spin Locks</a></li>
<li><a href="#index-struct-timer_005flist-124"><code>struct timer_list</code></a>: <a href="#Timer-Routines">Timer Routines</a></li>
<li><a href="#index-struct-timeval-125"><code>struct timeval</code></a>: <a href="#Timer-Routines">Timer Routines</a></li>
<li><a href="#index-timeo_005ffcn_005ft-171"><code>timeo_fcn_t</code></a>: <a href="#Utility-Prototypes">Utility Prototypes</a></li>
   </ul><p><a name="Function-Index"></a>

<h3 class="section">Index of Functions and Macros</h3>



<ul class="index-fn" compact>
<li><a href="#index-DEV_005fSAME-133"><code>DEV_SAME</code></a>: <a href="#Major_002fMinor-Device-Numbering">Major/Minor Device Numbering</a></li>
<li><a href="#index-DEV_005fTO_005fINT-134"><code>DEV_TO_INT</code></a>: <a href="#Major_002fMinor-Device-Numbering">Major/Minor Device Numbering</a></li>
<li><a href="#index-freezestr-149"><code>freezestr</code></a>: <a href="#Freezing-Streams">Freezing Streams</a></li>
<li><a href="#index-getmajor-130"><code>getmajor</code></a>: <a href="#Major_002fMinor-Device-Numbering">Major/Minor Device Numbering</a></li>
<li><a href="#index-getminor-131"><code>getminor</code></a>: <a href="#Major_002fMinor-Device-Numbering">Major/Minor Device Numbering</a></li>
<li><a href="#index-lis_005fdown-144"><code>lis_down</code></a>: <a href="#LiS-Semaphores">LiS Semaphores</a></li>
<li><a href="#index-lis_005fdown_005fnosig-145"><code>lis_down_nosig</code></a>: <a href="#LiS-Semaphores">LiS Semaphores</a></li>
<li><a href="#index-LIS_005fMK_005fPCI_005fDEV_005fFCN-141"><code>LIS_MK_PCI_DEV_FCN</code></a>: <a href="#The-LiS-PCI-Device-Structure">The LiS PCI Device Structure</a></li>
<li><a href="#index-lis_005fmknode-136"><code>lis_mknode</code></a>: <a href="#Major_002fMinor-Device-Numbering">Major/Minor Device Numbering</a></li>
<li><a href="#index-LIS_005fPCI_005fDEV-139"><code>LIS_PCI_DEV</code></a>: <a href="#The-LiS-PCI-Device-Structure">The LiS PCI Device Structure</a></li>
<li><a href="#index-LIS_005fPCI_005fFCN-140"><code>LIS_PCI_FCN</code></a>: <a href="#The-LiS-PCI-Device-Structure">The LiS PCI Device Structure</a></li>
<li><a href="#index-makedevice-132"><code>makedevice</code></a>: <a href="#Major_002fMinor-Device-Numbering">Major/Minor Device Numbering</a></li>
<li><a href="#index-putnext-153"><code>putnext</code></a>: <a href="#Freezing-Streams">Freezing Streams</a></li>
<li><a href="#index-qprocesoff-151"><code>qprocesoff</code></a>: <a href="#Freezing-Streams">Freezing Streams</a></li>
<li><a href="#index-qprocson-152"><code>qprocson</code></a>: <a href="#Freezing-Streams">Freezing Streams</a></li>
<li><a href="#index-UMKDEV-137"><code>UMKDEV</code></a>: <a href="#Major_002fMinor-Device-Numbering">Major/Minor Device Numbering</a></li>
<li><a href="#index-unfreezestr-150"><code>unfreezestr</code></a>: <a href="#Freezing-Streams">Freezing Streams</a></li>
   </ul><p><a name="Variable-Index"></a>

<h3 class="section">Index of Variables and Constants</h3>



<ul class="index-vr" compact>
<li><a href="#index-AUTOM4TE-364"><code>AUTOM4TE</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-AUTOTEST-365"><code>AUTOTEST</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-BZIP2-336"><code>BZIP2</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-BZIP2_005fCMD-337"><code>BZIP2_CMD</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-CHKCONFIG-339"><code>CHKCONFIG</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-DEB_005fBUILD_005fARCH-345"><code>DEB_BUILD_ARCH</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-DEB_005fBUILD_005fGNU_005fCPU-346"><code>DEB_BUILD_GNU_CPU</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-DEB_005fBUILD_005fGNU_005fSYSTEM-347"><code>DEB_BUILD_GNU_SYSTEM</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-DEB_005fBUILD_005fGNU_005fTYPE-348"><code>DEB_BUILD_GNU_TYPE</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-DEB_005fHOST_005fARCH-349"><code>DEB_HOST_ARCH</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-DEB_005fHOST_005fGNU_005fCPU-350"><code>DEB_HOST_GNU_CPU</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-DEB_005fHOST_005fGNU_005fSYSTEM-351"><code>DEB_HOST_GNU_SYSTEM</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-DEB_005fHOST_005fGNU_005fTYPE-352"><code>DEB_HOST_GNU_TYPE</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-DEPMOD-355"><code>DEPMOD</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-DESTDIR-354"><code>DESTDIR</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-DPKG-342"><code>DPKG</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-DPKG_005fBUILDPACKAGE-344"><code>DPKG_BUILDPACKAGE</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-DPKG_005fSOURCE-343"><code>DPKG_SOURCE</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-GENKSYMS-359"><code>GENKSYMS</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-GNUPGHOME-328"><code>GNUPGHOME</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-GNUPGUSER-327"><code>GNUPGUSER</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-GPG-326"><code>GPG</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-GPGPASSWD-329"><code>GPGPASSWD</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-GZIP-334"><code>GZIP</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-GZIP_005fCMD-335"><code>GZIP_CMD</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-KGENKSYMS-360"><code>KGENKSYMS</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-LDCONFIG-353"><code>LDCONFIG</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-LSMOD-357"><code>LSMOD</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-LSOF-358"><code>LSOF</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-M_005fBREAK-160"><code>M_BREAK</code></a>: <a href="#Flushing-Queue-Bands">Flushing Queue Bands</a></li>
<li><a href="#index-M_005fCTL-161"><code>M_CTL</code></a>: <a href="#Flushing-Queue-Bands">Flushing Queue Bands</a></li>
<li><a href="#index-M_005fDATA-154"><code>M_DATA</code></a>: <a href="#Flushing-Queue-Bands">Flushing Queue Bands</a></li>
<li><a href="#index-M_005fDELAY-157"><code>M_DELAY</code></a>: <a href="#Flushing-Queue-Bands">Flushing Queue Bands</a></li>
<li><a href="#index-M_005fFLUSH-83"><code>M_FLUSH</code></a>: <a href="#pipemod">pipemod</a></li>
<li><a href="#index-M_005fIOCTL-163"><code>M_IOCTL</code></a>: <a href="#Flushing-Queue-Bands">Flushing Queue Bands</a></li>
<li><a href="#index-M_005fPASSFP-164"><code>M_PASSFP</code></a>: <a href="#Flushing-Queue-Bands">Flushing Queue Bands</a></li>
<li><a href="#index-M_005fPASSFP-81"><code>M_PASSFP</code></a>: <a href="#connld">connld</a></li>
<li><a href="#index-M_005fPCPROTO-156"><code>M_PCPROTO</code></a>: <a href="#Flushing-Queue-Bands">Flushing Queue Bands</a></li>
<li><a href="#index-M_005fPROTO-155"><code>M_PROTO</code></a>: <a href="#Flushing-Queue-Bands">Flushing Queue Bands</a></li>
<li><a href="#index-M_005fRSE-165"><code>M_RSE</code></a>: <a href="#Flushing-Queue-Bands">Flushing Queue Bands</a></li>
<li><a href="#index-M_005fSETOPTS-166"><code>M_SETOPTS</code></a>: <a href="#Flushing-Queue-Bands">Flushing Queue Bands</a></li>
<li><a href="#index-M_005fSIG-167"><code>M_SIG</code></a>: <a href="#Flushing-Queue-Bands">Flushing Queue Bands</a></li>
<li><a href="#index-MAKEWHATIS-338"><code>MAKEWHATIS</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-MODPOST_005fCACHE-363"><code>MODPOST_CACHE</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-MODPROBE-356"><code>MODPROBE</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-NM-362"><code>NM</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-OBJDUMP-361"><code>OBJDUMP</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-PACKAGE_005fKVERSION-249"><code>PACKAGE_KVERSION</code></a>: <a href="#Configuring-the-Source-RPM">Configuring the Source RPM</a></li>
<li><a href="#index-PIC-333"><code>PIC</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-REFER-331"><code>REFER</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-RPM-340"><code>RPM</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-RPMBUILD-341"><code>RPMBUILD</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-SOELIM-330"><code>SOELIM</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
<li><a href="#index-TBL-332"><code>TBL</code></a>: <a href="#Environment-Variables">Environment Variables</a></li>
   </ul><p><a name="File-Index"></a>

<h3 class="section">Index of Files and Programs</h3>



<ul class="index-pg" compact>
<li><a href="#index-g_t_002fdev-115"><code>/dev</code></a>: <a href="#strmakenodes">strmakenodes</a></li>
<li><a href="#index-g_t_002fdev-80"><code>/dev</code></a>: <a href="#Modules">Modules</a></li>
<li><a href="#index-g_t_002fdev-44"><code>/dev</code></a>: <a href="#clone_002ddrvr">clone-drvr</a></li>
<li><a href="#index-g_t_002fdev-40"><code>/dev</code></a>: <a href="#Drivers">Drivers</a></li>
<li><a href="#index-g_t_002fdev_002fclone-45"><code>/dev/clone</code></a>: <a href="#clone_002ddrvr">clone-drvr</a></li>
<li><a href="#index-g_t_002fdev_002fclone_005fdrvr-42"><code>/dev/clone_drvr</code></a>: <a href="#clone_002ddrvr">clone-drvr</a></li>
<li><a href="#index-g_t_002fdev_002ffifo-48"><code>/dev/fifo</code></a>: <a href="#fifo">fifo</a></li>
<li><a href="#index-g_t_002fdev_002ffifo_002e0-49"><code>/dev/fifo.0</code></a>: <a href="#fifo">fifo</a></li>
<li><a href="#index-g_t_002fdev_002floop_002e1-55"><code>/dev/loop.1</code></a>: <a href="#loop_002daround">loop-around</a></li>
<li><a href="#index-g_t_002fdev_002floop_002e2-56"><code>/dev/loop.2</code></a>: <a href="#loop_002daround">loop-around</a></li>
<li><a href="#index-g_t_002fdev_002floop_005fclone-54"><code>/dev/loop_clone</code></a>: <a href="#loop_002daround">loop-around</a></li>
<li><a href="#index-g_t_002fdev_002fminimux_002e1-62"><code>/dev/minimux.1</code></a>: <a href="#mini_002dmux">mini-mux</a></li>
<li><a href="#index-g_t_002fdev_002fminimux_002e2-63"><code>/dev/minimux.2</code></a>: <a href="#mini_002dmux">mini-mux</a></li>
<li><a href="#index-g_t_002fdev_002fmux_005fclone-61"><code>/dev/mux_clone</code></a>: <a href="#mini_002dmux">mini-mux</a></li>
<li><a href="#index-g_t_002fdev_002fprintk-66"><code>/dev/printk</code></a>: <a href="#printk">printk</a></li>
<li><a href="#index-g_t_002fdev_002fsad-68"><code>/dev/sad</code></a>: <a href="#sad">sad</a></li>
<li><a href="#index-g_t_002flib_002f_0040_002dmodules_002f_0040_002d_0040value_007b_005fkversion_007d_002f_0040_002dstreams_002f_0040_002d-395"><code>/lib/modules/2.6.17-1.2139_FC5/streams/</code></a>: <a href="#Loading">Loading</a></li>
<li><a href="#index-g_t_002fusr_002fbin-102"><code>/usr/bin</code></a>: <a href="#Utilities">Utilities</a></li>
<li><a href="#index-g_t_002fusr_002fbin_002fpolltst-110"><code>/usr/bin/polltst</code></a>: <a href="#polltst">polltst</a></li>
<li><a href="#index-g_t_002fusr_002fbin_002fstrtst-117"><code>/usr/bin/strtst</code></a>: <a href="#strtst">strtst</a></li>
<li><a href="#index-g_t_002fusr_002fbin_002ftimetst-119"><code>/usr/bin/timetst</code></a>: <a href="#timetst">timetst</a></li>
<li><a href="#index-g_t_002fusr_002finclude-89"><code>/usr/include</code></a>: <a href="#Using-the-Library">Using the Library</a></li>
<li><a href="#index-g_t_002fusr_002finclude_002fLiS_002fstropts_002eh-91"><code>/usr/include/LiS/stropts.h</code></a>: <a href="#Using-the-Library">Using the Library</a></li>
<li><a href="#index-g_t_002fusr_002finclude_002fstropts_002eh-90"><code>/usr/include/stropts.h</code></a>: <a href="#Using-the-Library">Using the Library</a></li>
<li><a href="#index-g_t_002fusr_002flib-92"><code>/usr/lib</code></a>: <a href="#Using-the-Library">Using the Library</a></li>
<li><a href="#index-g_t_002fusr_002flib-87"><code>/usr/lib</code></a>: <a href="#Libraries">Libraries</a></li>
<li><a href="#index-g_t_002fusr_002flib_002flibLiS_002ea-93"><code>/usr/lib/libLiS.a</code></a>: <a href="#Using-the-Library">Using the Library</a></li>
<li><a href="#index-g_t_002fusr_002flib_002flibLiS_002eso-96"><code>/usr/lib/libLiS.so</code></a>: <a href="#Using-the-Library">Using the Library</a></li>
<li><a href="#index-g_t_002fusr_002flib_002flibpLiS_002eso-99"><code>/usr/lib/libpLiS.so</code></a>: <a href="#Using-the-Library">Using the Library</a></li>
<li><a href="#index-g_t_002fusr_002fsbin-103"><code>/usr/sbin</code></a>: <a href="#Utilities">Utilities</a></li>
<li><a href="#index-g_t_002fusr_002fsbin_002ffattach-106"><code>/usr/sbin/fattach</code></a>: <a href="#fattach">fattach</a></li>
<li><a href="#index-g_t_002fusr_002fsbin_002ffdetach-108"><code>/usr/sbin/fdetach</code></a>: <a href="#fdetach">fdetach</a></li>
<li><a href="#index-g_t_002fusr_002fsbin_002fstreams-112"><code>/usr/sbin/streams</code></a>: <a href="#streams">streams</a></li>
<li><a href="#index-g_t_002fusr_002fsbin_002fstrmakenodes-114"><code>/usr/sbin/strmakenodes</code></a>: <a href="#strmakenodes">strmakenodes</a></li>
<li><a href="#index-g_t_002fusr_002fsrc_002flinux_002fDocumentation_002fDMA_002dmapping_002etxt-142"><code>/usr/src/linux/Documentation/DMA-mapping.txt</code></a>: <a href="#LiS-PCI-DMA-Routines">LiS PCI DMA Routines</a></li>
<li><a href="#index-g_t_002fusr_002fsrc_002fLiS-182"><code>/usr/src/LiS</code></a>: <a href="#Kernel-Version-2_002e3_002ex">Kernel Version 2.3.x</a></li>
<li><a href="#index-g_t_002fvar_002flog_002fmessages-147"><code>/var/log/messages</code></a>: <a href="#Debugging-Spin-Locks">Debugging Spin Locks</a></li>
<li><a href="#index-Config-116"><code>Config</code></a>: <a href="#strmakenodes">strmakenodes</a></li>
<li><a href="#index-Config-50"><code>Config</code></a>: <a href="#fifo">fifo</a></li>
<li><a href="#index-Config-41"><code>Config</code></a>: <a href="#Drivers">Drivers</a></li>
<li><a href="#index-libLiS_002ea-94"><code>libLiS.a</code></a>: <a href="#Using-the-Library">Using the Library</a></li>
<li><a href="#index-libLiS_002eso-97"><code>libLiS.so</code></a>: <a href="#Using-the-Library">Using the Library</a></li>
<li><a href="#index-libpLiS_002eso-100"><code>libpLiS.so</code></a>: <a href="#Using-the-Library">Using the Library</a></li>
<li><a href="#index-specfs_002eo-30"><code>specfs.o</code></a>: <a href="#Files">Files</a></li>
<li><a href="#index-streams_002daixcompat_002eo-32"><code>streams-aixcompat.o</code></a>: <a href="#Files">Files</a></li>
<li><a href="#index-streams_002dconnld_002eo-76"><code>streams-connld.o</code></a>: <a href="#Modules">Modules</a></li>
<li><a href="#index-streams_002dhpuxcompat_002eo-33"><code>streams-hpuxcompat.o</code></a>: <a href="#Files">Files</a></li>
<li><a href="#index-streams_002dliscompat_002eo-34"><code>streams-liscompat.o</code></a>: <a href="#Files">Files</a></li>
<li><a href="#index-streams_002dosfcompat_002eo-35"><code>streams-osfcompat.o</code></a>: <a href="#Files">Files</a></li>
<li><a href="#index-streams_002dpipemod_002eo-77"><code>streams-pipemod.o</code></a>: <a href="#Modules">Modules</a></li>
<li><a href="#index-streams_002dsc_002eo-78"><code>streams-sc.o</code></a>: <a href="#Modules">Modules</a></li>
<li><a href="#index-streams_002dsth_002eo-79"><code>streams-sth.o</code></a>: <a href="#Modules">Modules</a></li>
<li><a href="#index-streams_002dsuncompat_002eo-36"><code>streams-suncompat.o</code></a>: <a href="#Files">Files</a></li>
<li><a href="#index-streams_002dsvr4compat_002eo-37"><code>streams-svr4compat.o</code></a>: <a href="#Files">Files</a></li>
<li><a href="#index-streams_002duw7compat_002eo-38"><code>streams-uw7compat.o</code></a>: <a href="#Files">Files</a></li>
<li><a href="#index-streams_002eo-31"><code>streams.o</code></a>: <a href="#Files">Files</a></li>
<li><a href="#index-stropts_002eh-181"><code>stropts.h</code></a>: <a href="#Kernel-Version-2_002e3_002ex">Kernel Version 2.3.x</a></li>
<li><a href="#index-stropts_002eh-122"><code>stropts.h</code></a>: <a href="#Coding-STREAMS-Applications">Coding STREAMS Applications</a></li>
<li><a href="#index-stropts_002eh-88"><code>stropts.h</code></a>: <a href="#Using-the-Library">Using the Library</a></li>
<li><a href="#index-stropts_002eh-72"><code>stropts.h</code></a>: <a href="#sad">sad</a></li>
   </ul><p><a name="Option-Index"></a>

<h3 class="section">Index of Configuration Options</h3>



<ul class="index-op" compact>
<li><a href="#index-arch-283">arch</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-atomic_002dstats-321">atomic-stats</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-atomic_002dstats-267">atomic-stats</a>: <a href="#Configuring-the-Source-RPM">Configuring the Source RPM</a></li>
<li><a href="#index-base_002dmajor-315">base-major</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-broken_002dcpu_002dflags-317">broken-cpu-flags</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-broken_002dcpu_002dflags-263">broken-cpu-flags</a>: <a href="#Configuring-the-Source-RPM">Configuring the Source RPM</a></li>
<li><a href="#index-checks-276">checks</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-checks-251">checks</a>: <a href="#Configuring-the-Source-RPM">Configuring the Source RPM</a></li>
<li><a href="#index-compress_002dmanpages-277">compress-manpages</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-cooked_002dmanpages-295">cooked-manpages</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-cooked_002dmanpages-253">cooked-manpages</a>: <a href="#Configuring-the-Source-RPM">Configuring the Source RPM</a></li>
<li><a href="#index-deb_002depoch-300">deb-epoch</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-deb_002drelease-301">deb-release</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-deb_002dtopdir-302">deb-topdir</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-devel-280">devel</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-devel-260">devel</a>: <a href="#Configuring-the-Source-RPM">Configuring the Source RPM</a></li>
<li><a href="#index-devfs-289">devfs</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-gpg_002dhome-291">gpg-home</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-gpg_002duser-290">gpg-user</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-indep-284">indep</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-initscripts-279">initscripts</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-k_002darchdir-310">k-archdir</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-k_002dbuild-306">k-build</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-k_002dcache-320">k-cache</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-k_002dcache-266">k-cache</a>: <a href="#Configuring-the-Source-RPM">Configuring the Source RPM</a></li>
<li><a href="#index-k_002dconfig-312">k-config</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-k_002ddebug-288">k-debug</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-k_002ddebug-255">k-debug</a>: <a href="#Configuring-the-Source-RPM">Configuring the Source RPM</a></li>
<li><a href="#index-k_002dinline-285">k-inline</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-k_002dinline-258">k-inline</a>: <a href="#Configuring-the-Source-RPM">Configuring the Source RPM</a></li>
<li><a href="#index-k_002dlinkage-304">k-linkage</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-k_002dmachdir-311">k-machdir</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-k_002dmodules-305">k-modules</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-k_002dmodversions-259">k-modversions</a>: <a href="#Configuring-the-Source-RPM">Configuring the Source RPM</a></li>
<li><a href="#index-k_002doptimize-313">k-optimize</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-k_002doptimize-252">k-optimize</a>: <a href="#Configuring-the-Source-RPM">Configuring the Source RPM</a></li>
<li><a href="#index-k_002drelease-303">k-release</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-k_002drelease-250">k-release</a>: <a href="#Configuring-the-Source-RPM">Configuring the Source RPM</a></li>
<li><a href="#index-k_002dsafe-286">k-safe</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-k_002dsafe-257">k-safe</a>: <a href="#Configuring-the-Source-RPM">Configuring the Source RPM</a></li>
<li><a href="#index-k_002dsysmap-308">k-sysmap</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-k_002dtest-287">k-test</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-k_002dtest-256">k-test</a>: <a href="#Configuring-the-Source-RPM">Configuring the Source RPM</a></li>
<li><a href="#index-k_002dtimers-319">k-timers</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-k_002dtimers-265">k-timers</a>: <a href="#Configuring-the-Source-RPM">Configuring the Source RPM</a></li>
<li><a href="#index-lis_002ddevelopment-318">lis-development</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-lis_002ddevelopment-264">lis-development</a>: <a href="#Configuring-the-Source-RPM">Configuring the Source RPM</a></li>
<li><a href="#index-lis_002dregparms-322">lis-regparms</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-lis_002dregparms-268">lis-regparms</a>: <a href="#Configuring-the-Source-RPM">Configuring the Source RPM</a></li>
<li><a href="#index-modules-282">modules</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-modules-262">modules</a>: <a href="#Configuring-the-Source-RPM">Configuring the Source RPM</a></li>
<li><a href="#index-pkg_002ddistdir-294">pkg-distdir</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-pkg_002depoch-292">pkg-epoch</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-pkg_002drelease-293">pkg-release</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-public-278">public</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-public-254">public</a>: <a href="#Configuring-the-Source-RPM">Configuring the Source RPM</a></li>
<li><a href="#index-rpm_002depoch-296">rpm-epoch</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-rpm_002dextra-298">rpm-extra</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-rpm_002drelease-297">rpm-release</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-rpm_002dtopdir-299">rpm-topdir</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-solaris_002dcmn_005ferr-324">solaris-cmn_err</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-solaris_002dcmn_005ferr-270">solaris-cmn_err</a>: <a href="#Configuring-the-Source-RPM">Configuring the Source RPM</a></li>
<li><a href="#index-solaris_002dconsts-323">solaris-consts</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-solaris_002dconsts-269">solaris-consts</a>: <a href="#Configuring-the-Source-RPM">Configuring the Source RPM</a></li>
<li><a href="#index-strconf_002dmaster-314">strconf-master</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-tools-281">tools</a>: <a href="#Configure-Options">Configure Options</a></li>
<li><a href="#index-tools-261">tools</a>: <a href="#Configuring-the-Source-RPM">Configuring the Source RPM</a></li>
<li><a href="#index-user_002dmode-316">user-mode</a>: <a href="#Configure-Options">Configure Options</a></li>
   </ul><p><a name="Makefile-Target-Index"></a>

<h3 class="unnumberedsec">Index of Makefile Targets</h3>



<ul class="index-mk" compact>
<li><a href="#index-all-398"><code>all</code></a>: <a href="#User-Targets">User Targets</a></li>
<li><a href="#index-all-392"><code>all</code></a>: <a href="#Loading">Loading</a></li>
<li><a href="#index-check-399"><code>check</code></a>: <a href="#User-Targets">User Targets</a></li>
<li><a href="#index-check_002dclean-412"><code>check-clean</code></a>: <a href="#Clean-Targets">Clean Targets</a></li>
<li><a href="#index-check_002elog-419"><code>check.log</code></a>: <a href="#Logging-Targets">Logging Targets</a></li>
<li><a href="#index-clean-409"><code>clean</code></a>: <a href="#Clean-Targets">Clean Targets</a></li>
<li><a href="#index-compile_002elog-418"><code>compile.log</code></a>: <a href="#Logging-Targets">Logging Targets</a></li>
<li><a href="#index-csig-445"><code>csig</code></a>: <a href="#Debian-Build-Targets">Debian Build Targets</a></li>
<li><a href="#index-debs-444"><code>debs</code></a>: <a href="#Debian-Build-Targets">Debian Build Targets</a></li>
<li><a href="#index-dist-406"><code>dist</code></a>: <a href="#Maintainer-Targets">Maintainer Targets</a></li>
<li><a href="#index-dist_002elog-424"><code>dist.log</code></a>: <a href="#Logging-Targets">Logging Targets</a></li>
<li><a href="#index-distcheck-407"><code>distcheck</code></a>: <a href="#Maintainer-Targets">Maintainer Targets</a></li>
<li><a href="#index-distcheck_002elog-425"><code>distcheck.log</code></a>: <a href="#Logging-Targets">Logging Targets</a></li>
<li><a href="#index-distclean-410"><code>distclean</code></a>: <a href="#Clean-Targets">Clean Targets</a></li>
<li><a href="#index-dsc-442"><code>dsc</code></a>: <a href="#Debian-Build-Targets">Debian Build Targets</a></li>
<li><a href="#index-forced_002drelease-414"><code>forced-release</code></a>: <a href="#Release-Targets">Release Targets</a></li>
<li><a href="#index-forced_002drelease_002dsign-416"><code>forced-release-sign</code></a>: <a href="#Release-Targets">Release Targets</a></li>
<li><a href="#index-install-400"><code>install</code></a>: <a href="#User-Targets">User Targets</a></li>
<li><a href="#index-install-393"><code>install</code></a>: <a href="#Loading">Loading</a></li>
<li><a href="#index-install_002dstrip-401"><code>install-strip</code></a>: <a href="#User-Targets">User Targets</a></li>
<li><a href="#index-install_002dstrip-394"><code>install-strip</code></a>: <a href="#Loading">Loading</a></li>
<li><a href="#index-install_002elog-420"><code>install.log</code></a>: <a href="#Logging-Targets">Logging Targets</a></li>
<li><a href="#index-installcheck-402"><code>installcheck</code></a>: <a href="#User-Targets">User Targets</a></li>
<li><a href="#index-installcheck_002elog-421"><code>installcheck.log</code></a>: <a href="#Logging-Targets">Logging Targets</a></li>
<li><a href="#index-maintainer_002dclean-411"><code>maintainer-clean</code></a>: <a href="#Clean-Targets">Clean Targets</a></li>
<li><a href="#index-mostlyclean-408"><code>mostlyclean</code></a>: <a href="#Clean-Targets">Clean Targets</a></li>
<li><a href="#index-pr-457"><code>pr</code></a>: <a href="#Generating-Problem-Reports">Generating Problem Reports</a></li>
<li><a href="#index-pr-431"><code>pr</code></a>: <a href="#Problem-Report-Targets">Problem Report Targets</a></li>
<li><a href="#index-rebuild-440"><code>rebuild</code></a>: <a href="#RPM-Build-Targets">RPM Build Targets</a></li>
<li><a href="#index-rebuild_002elog-427"><code>rebuild.log</code></a>: <a href="#Logging-Targets">Logging Targets</a></li>
<li><a href="#index-release-413"><code>release</code></a>: <a href="#Release-Targets">Release Targets</a></li>
<li><a href="#index-release_002darchives-433"><code>release-archives</code></a>: <a href="#Release-Archive-Targets">Release Archive Targets</a></li>
<li><a href="#index-release_002dclean-417"><code>release-clean</code></a>: <a href="#Release-Targets">Release Targets</a></li>
<li><a href="#index-release_002dclean_002darchives-435"><code>release-clean-archives</code></a>: <a href="#Release-Archive-Targets">Release Archive Targets</a></li>
<li><a href="#index-release_002dsign-415"><code>release-sign</code></a>: <a href="#Release-Targets">Release Targets</a></li>
<li><a href="#index-release_002dsign_002darchives-434"><code>release-sign-archives</code></a>: <a href="#Release-Archive-Targets">Release Archive Targets</a></li>
<li><a href="#index-release_002dsign_002elog-430"><code>release-sign.log</code></a>: <a href="#Logging-Targets">Logging Targets</a></li>
<li><a href="#index-release_002elog-429"><code>release.log</code></a>: <a href="#Logging-Targets">Logging Targets</a></li>
<li><a href="#index-remove-405"><code>remove</code></a>: <a href="#User-Targets">User Targets</a></li>
<li><a href="#index-remove_002elog-423"><code>remove.log</code></a>: <a href="#Logging-Targets">Logging Targets</a></li>
<li><a href="#index-resign-441"><code>resign</code></a>: <a href="#RPM-Build-Targets">RPM Build Targets</a></li>
<li><a href="#index-resign_002elog-428"><code>resign.log</code></a>: <a href="#Logging-Targets">Logging Targets</a></li>
<li><a href="#index-retest-403"><code>retest</code></a>: <a href="#User-Targets">User Targets</a></li>
<li><a href="#index-rpms-437"><code>rpms</code></a>: <a href="#RPM-Build-Targets">RPM Build Targets</a></li>
<li><a href="#index-send_002dpr-432"><code>send-pr</code></a>: <a href="#Problem-Report-Targets">Problem Report Targets</a></li>
<li><a href="#index-sign-438"><code>sign</code></a>: <a href="#RPM-Build-Targets">RPM Build Targets</a></li>
<li><a href="#index-sigs-443"><code>sigs</code></a>: <a href="#Debian-Build-Targets">Debian Build Targets</a></li>
<li><a href="#index-srpm-436"><code>srpm</code></a>: <a href="#RPM-Build-Targets">RPM Build Targets</a></li>
<li><a href="#index-srpm_002dsign-439"><code>srpm-sign</code></a>: <a href="#RPM-Build-Targets">RPM Build Targets</a></li>
<li><a href="#index-srpm_002elog-426"><code>srpm.log</code></a>: <a href="#Logging-Targets">Logging Targets</a></li>
<li><a href="#index-uninstall-404"><code>uninstall</code></a>: <a href="#User-Targets">User Targets</a></li>
<li><a href="#index-uninstall_002elog-422"><code>uninstall.log</code></a>: <a href="#Logging-Targets">Logging Targets</a></li>
   </ul><p><a name="Author-Index"></a>

<h3 class="section">Index of Authors</h3>



<ul class="index-au" compact>
<li><a href="#index-Ballesteros_002c-Francisco-J_002e-4">Ballesteros, Francisco J.</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-Bidulock_002c-Brian-F_002e-G_002e-12">Bidulock, Brian F. G.</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-Boyd_002c-John-109">Boyd, John</a>: <a href="#fdetach">fdetach</a></li>
<li><a href="#index-Boyd_002c-John-107">Boyd, John</a>: <a href="#fattach">fattach</a></li>
<li><a href="#index-Boyd_002c-John-84">Boyd, John</a>: <a href="#pipemod">pipemod</a></li>
<li><a href="#index-Boyd_002c-John-82">Boyd, John</a>: <a href="#connld">connld</a></li>
<li><a href="#index-Boyd_002c-John-53">Boyd, John</a>: <a href="#fifo">fifo</a></li>
<li><a href="#index-Boyd_002c-John-5">Boyd, John</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-Froschauer_002c-Denis-6">Froschauer, Denis</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-Grothe_002c-David-120">Grothe, David</a>: <a href="#timetst">timetst</a></li>
<li><a href="#index-Grothe_002c-David-118">Grothe, David</a>: <a href="#strtst">strtst</a></li>
<li><a href="#index-Grothe_002c-David-113">Grothe, David</a>: <a href="#streams">streams</a></li>
<li><a href="#index-Grothe_002c-David-111">Grothe, David</a>: <a href="#polltst">polltst</a></li>
<li><a href="#index-Grothe_002c-David-85">Grothe, David</a>: <a href="#relay-relay2">relay relay2</a></li>
<li><a href="#index-Grothe_002c-David-67">Grothe, David</a>: <a href="#printk">printk</a></li>
<li><a href="#index-Grothe_002c-David-65">Grothe, David</a>: <a href="#mini_002dmux">mini-mux</a></li>
<li><a href="#index-Grothe_002c-David-60">Grothe, David</a>: <a href="#loop_002daround">loop-around</a></li>
<li><a href="#index-Grothe_002c-David-47">Grothe, David</a>: <a href="#clone_002ddrvr">clone-drvr</a></li>
<li><a href="#index-Grothe_002c-David-7">Grothe, David</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-Husgaard_002c-Ole-74">Husgaard, Ole</a>: <a href="#sad">sad</a></li>
<li><a href="#index-Husgaard_002c-Ole-8">Husgaard, Ole</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-Magin_002c-Jürgen-9">Magin, Jürgen</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-Wheeler_002c-Graham-10">Wheeler, Graham</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-Yeganjaiah_002c-G-11">Yeganjaiah, G</a>: <a href="#Contributors">Contributors</a></li>
   </ul><!--  -->

<div class="shortcontents">
<h2>Short Contents</h2>
<ul>
<li><a href="#toc_Top">Linux STREAMS (LiS) Installation and Reference Manual</a></li>
<li><a href="#toc_Top">About This Manual</a></li>
<li><a href="#toc_Acknowledgements">Acknowledgements</a></li>
<li><a href="#toc_Introduction">1 Introduction</a></li>
<li><a href="#toc_Objective">2 Objective</a></li>
<li><a href="#toc_Reference">3 Reference</a></li>
<li><a href="#toc_Conformance">4 Conformance</a></li>
<li><a href="#toc_Releases">5 Releases</a></li>
<li><a href="#toc_Installation">6 Installation</a></li>
<li><a href="#toc_Troubleshooting">7 Troubleshooting</a></li>
<li><a href="#toc_Copying">Copying</a></li>
<li><a href="#toc_Documentation-License">Documentation License</a></li>
<li><a href="#toc_Indices">Indices</a></li>
</ul>
</div>

   <div class="contents">
<h2>Table of Contents</h2>
<ul>
<li><a name="toc_Top" href="#Top">Linux STREAMS (LiS) Installation and Reference Manual</a>
<li><a name="toc_Top" href="#Top">About This Manual</a>
<li><a name="toc_Acknowledgements" href="#Acknowledgements">Acknowledgements</a>
<ul>
<li><a href="#Sponsors">Sponsors</a>
<li><a href="#Contributors">Contributors</a>
<ul>
<li><a href="#Contributors">Authors</a>
</li></ul>
</li></ul>
<li><a name="toc_Introduction" href="#Introduction">1 Introduction</a>
<ul>
<li><a href="#Notice">1.1 Notice</a>
<li><a href="#Overview">1.2 Overview</a>
<li><a href="#Organization">1.3 Organization of this Document</a>
<li><a href="#Conventions">1.4 Conventions and Definitions</a>
</li></ul>
<li><a name="toc_Objective" href="#Objective">2 Objective</a>
<li><a name="toc_Reference" href="#Reference">3 Reference</a>
<ul>
<li><a href="#Files">3.1 Files</a>
<li><a href="#Drivers">3.2 Drivers</a>
<ul>
<li><a href="#clone_002ddrvr">3.2.1 clone-drvr</a>
<li><a href="#clone_002ddrvr">Device Name</a>
<li><a href="#clone_002ddrvr">Description</a>
<li><a href="#clone_002ddrvr">Author</a>
<li><a href="#fifo">3.2.2 fifo</a>
<li><a href="#fifo">Device Name</a>
<li><a href="#fifo">Description</a>
<li><a href="#fifo">Application Usage</a>
<li><a href="#fifo">Warnings</a>
<li><a href="#fifo">See Also</a>
<li><a href="#fifo">Author</a>
<li><a href="#loop_002daround">3.2.3 loop-around</a>
<li><a href="#loop_002daround">Device Name</a>
<li><a href="#loop_002daround">Description</a>
<li><a href="#loop_002daround">Author</a>
<li><a href="#mini_002dmux">3.2.4 mini-mux</a>
<li><a href="#mini_002dmux">Device Name</a>
<li><a href="#mini_002dmux">Description</a>
<li><a href="#mini_002dmux">Author</a>
<li><a href="#printk">3.2.5 printk</a>
<li><a href="#printk">Device Name</a>
<li><a href="#printk">Description</a>
<li><a href="#printk">Author</a>
<li><a href="#sad">3.2.6 sad</a>
<li><a href="#sad">Device Name</a>
<li><a href="#sad">Description</a>
<li><a href="#sad">Author</a>
</li></ul>
<li><a href="#Modules">3.3 Modules</a>
<ul>
<li><a href="#connld">3.3.1 connld</a>
<li><a href="#connld">Module Name</a>
<li><a href="#connld">Description</a>
<li><a href="#connld">Application Usage</a>
<li><a href="#connld">See Also</a>
<li><a href="#connld">History</a>
<li><a href="#connld">Author</a>
<li><a href="#pipemod">3.3.2 pipemod</a>
<li><a href="#pipemod">Module Name</a>
<li><a href="#pipemod">Description</a>
<li><a href="#pipemod">See Also</a>
<li><a href="#pipemod">History</a>
<li><a href="#pipemod">Author</a>
<li><a href="#relay-relay2">3.3.3 relay, relay2</a>
<li><a href="#relay-relay2">Module Name</a>
<li><a href="#relay-relay2">Description</a>
<li><a href="#relay-relay2">Author</a>
</li></ul>
<li><a href="#Libraries">3.4 Libraries</a>
<ul>
<li><a href="#Library-Routines">3.4.1 Library Routines</a>
<li><a href="#Using-the-Library">3.4.2 Using the Library</a>
</li></ul>
<li><a href="#Utilities">3.5 Utilities</a>
<ul>
<li><a href="#fattach">3.5.1 fattach</a>
<ul>
<li><a href="#fattach">Description</a>
<li><a href="#fattach">Options</a>
<li><a href="#fattach">Return Value</a>
<li><a href="#fattach">Application Usage</a>
<li><a href="#fattach">See Also</a>
<li><a href="#fattach">History</a>
<li><a href="#fattach">Author</a>
</li></ul>
<li><a href="#fdetach">3.5.2 fdetach</a>
<ul>
<li><a href="#fdetach">Description</a>
<li><a href="#fdetach">Options</a>
<li><a href="#fdetach">Return Value</a>
<li><a href="#fdetach">Warnings</a>
<li><a href="#fdetach">See Also</a>
<li><a href="#fdetach">History</a>
<li><a href="#fdetach">Author</a>
</li></ul>
<li><a href="#polltst">3.5.3 polltst</a>
<ul>
<li><a href="#polltst">Description</a>
<li><a href="#polltst">Author</a>
</li></ul>
<li><a href="#streams">3.5.4 streams</a>
<ul>
<li><a href="#streams">Description</a>
<li><a href="#streams">Options</a>
<li><a href="#streams">Debug Options</a>
<li><a href="#streams">Author</a>
</li></ul>
<li><a href="#strmakenodes">3.5.5 strmakenodes</a>
<ul>
<li><a href="#strmakenodes">Description</a>
</li></ul>
<li><a href="#strtst">3.5.6 strtst</a>
<ul>
<li><a href="#strtst">Description</a>
<li><a href="#strtst">Author</a>
</li></ul>
<li><a href="#timetst">3.5.7 timetst</a>
<ul>
<li><a href="#timetst">Description</a>
<li><a href="#timetst">Author</a>
</li></ul>
</li></ul>
<li><a href="#Development">3.6 Development</a>
<ul>
<li><a href="#Coding-STREAMS-Applications">3.6.1 Coding STREAMS Applications</a>
<ul>
<li><a href="#Coding-STREAMS-Applications">3.6.1.1 Header Files</a>
<li><a href="#Coding-STREAMS-Applications">3.6.1.2 Compilation Options</a>
<li><a href="#Coding-STREAMS-Applications">3.6.1.3 Linking Options</a>
<li><a href="#Coding-STREAMS-Applications">3.6.1.4 Other STREAMS Resources</a>
</li></ul>
<li><a href="#LiS-SMP-Implementation">3.6.2 LiS SMP Implementation</a>
<ul>
<li><a href="#CPU-Scheduling">3.6.2.1 CPU Scheduling</a>
<li><a href="#Queue-Locking">3.6.2.2 Queue Locking</a>
<li><a href="#Service-Procedure-Context">3.6.2.3 Service Procedure Context</a>
<li><a href="#Scheduling-Statistics">3.6.2.4 Scheduling Statistics</a>
</li></ul>
<li><a href="#Operating-System-Interface">3.6.3 Operating System Interface Routines</a>
<li><a href="#PCI-BIOS-Interface">3.6.4 PCI BIOS Interface</a>
<li><a href="#PCI-Interface">3.6.5 PCI Interface</a>
<li><a href="#IRQ-Interface">3.6.6 IRQ Interface</a>
<li><a href="#I_002fO-Memory-Mapping">3.6.7 I/O Memory Mapping</a>
<li><a href="#I_002fO-Port-Access">3.6.8 I/O Port Access</a>
<li><a href="#Memory-Allocation">3.6.9 Memory Allocation</a>
<li><a href="#DMA-Routines">3.6.10 DMA Routines</a>
<li><a href="#Delay-Routines">3.6.11 Delay Routines</a>
<li><a href="#Printing-Routines">3.6.12 Printing Routines</a>
<li><a href="#Timer-Routines">3.6.13 Timer Routines</a>
<li><a href="#Sleep-and-Wakeup-Routines">3.6.14 Sleep and Wakeup Routines</a>
<li><a href="#Thread-Creation">3.6.15 Thread Creation</a>
<ul>
<li><a href="#Thread-Creation">3.6.15.1 Prototype</a>
<li><a href="#Thread-Creation">3.6.15.2 Operation</a>
</li></ul>
<li><a href="#Major_002fMinor-Device-Numbering">3.6.16 Major/Minor Device Numbering</a>
<li><a href="#LiS-Memory-Allocation">3.6.17 LiS Memory Allocation</a>
<li><a href="#LiS-malloc-and-free-Equivalents">3.6.18 LiS malloc and free Equivalents</a>
<li><a href="#LiS-Kernel-Memory-Allocators">3.6.19 LiS Kernel Memory Allocators</a>
<li><a href="#LiS-Page-Allocator">3.6.20 LiS Page Allocator</a>
<li><a href="#LiS-PCI-Interface">3.6.21 LiS PCI Interface</a>
<li><a href="#The-LiS-PCI-Device-Structure">3.6.22 The LiS PCI Device Structure</a>
<li><a href="#LiS-PCI-Search-Routines">3.6.23 LiS PCI Search Routines</a>
<ul>
<li><a href="#LiS-PCI-Search-Routines">3.6.23.1 <code>lis_pci_dev_t *lis_pci_find_device(unsigned vendor, unsigned device, lis_pci_dev_t *previous_struct);</code></a>
<li><a href="#LiS-PCI-Search-Routines">3.6.23.2 <code>lis_pci_dev_t *lis_pci_find_class(unsigned class, lis_pci_dev_t *previous_struct);</code></a>
<li><a href="#LiS-PCI-Search-Routines">3.6.23.3 <code>lis_pci_dev_t *lis_pci_find_slot(unsigned bus, unsigned dev_fcn);</code></a>
</li></ul>
<li><a href="#LiS-PCI-Configuration-Space-Routines">3.6.24 LiS PCI Configuration Space Routines</a>
<li><a href="#LiS-PCI-DMA-Routines">3.6.25 LiS PCI DMA Routines</a>
<li><a href="#LiS-Atomic-Functions">3.6.26 LiS Atomic Functions</a>
<li><a href="#LiS-Locks">3.6.27 LiS Locks</a>
<li><a href="#LiS-Spin-Locks">3.6.28 LiS Spin Locks</a>
<li><a href="#Lock-Nesting">3.6.29 Lock Nesting</a>
<li><a href="#LiS-Read_002fWrite-Locks">3.6.30 LiS Read/Write Locks</a>
<li><a href="#LiS-Interrupt-Enable_002fDisable">3.6.31 LiS Interrupt Enable/Disable</a>
<li><a href="#LiS-Semaphores">3.6.32 LiS Semaphores</a>
<li><a href="#Debugging-Spin-Locks">3.6.33 Debugging Spin Locks</a>
<li><a href="#Lock-Semaphore-and-Queue-Contention">3.6.34 Lock Semaphore and Queue Contention</a>
<li><a href="#Debugging-Semaphores">3.6.35 Debugging Semaphores</a>
<li><a href="#STREAMS-Utility-Routines">3.6.36 STREAMS Utility Routines</a>
<li><a href="#Freezing-Streams">3.6.37 Freezing Streams</a>
<ul>
<li><a href="#Freezing-Streams">3.6.37.1 Freezestr and Unfreezestr</a>
<li><a href="#Freezing-Streams">3.6.37.2 Qprocsoff and Qprocson</a>
</li></ul>
<li><a href="#Flushing-Queue-Bands">3.6.38 Flushing Queue Bands</a>
<li><a href="#Utility-Prototypes">3.6.39 Utility Prototypes</a>
<li><a href="#System-Calls-from-within-the-Kernel">3.6.40 System Calls from within the Kernel</a>
</li></ul>
</li></ul>
<li><a name="toc_Conformance" href="#Conformance">4 Conformance</a>
<ul>
<li><a href="#STREAMS-Compatibility">4.1 STREAMS Compatibility</a>
<li><a href="#Porting">4.2 Porting</a>
</li></ul>
<li><a name="toc_Releases" href="#Releases">5 Releases</a>
<ul>
<li><a href="#Prerequisites">5.1 Prerequisites</a>
<li><a href="#Compatibility">5.2 Compatibility</a>
<ul>
<li><a href="#GNU_002fLinux-Distributions">5.2.1 GNU/Linux Distributions</a>
<li><a href="#Linux-Kernel">5.2.2 Kernel</a>
<li><a href="#Linux-Architectures">5.2.3 Architectures</a>
<ul>
<li><a href="#Kernel-Version-2_002e3_002ex">5.2.3.1 Kernel Version 2.3.x</a>
<li><a href="#Kernel-Version-2_002e2_002ex">5.2.3.2 Kernel Version 2.2.x</a>
<li><a href="#Kernel-Version-2_002e0_002e36">5.2.3.3 Kernel Version 2.0.36</a>
</li></ul>
<li><a href="#Linux-STREAMS">5.2.4 Linux STREAMS</a>
<ul>
<li><a href="#LiS_002d2_002e18-Kernel-and-Driver-Compatibility">5.2.4.1 LiS-2.18 Kernel and Driver Compatibility</a>
<li><a href="#LiS_002d2_002e16-Kernel-and-Driver-Compatibility">5.2.4.2 LiS-2.16 Kernel and Driver Compatibility</a>
<li><a href="#LiS_002d2_002e15-Kernel-and-Driver-Compatibility">5.2.4.3 LiS-2.15 Kernel and Driver Compatibility</a>
<li><a href="#LiS_002d2_002e14-Kernel-and-Driver-Compatibility">5.2.4.4 LiS-2.14 Kernel and Driver Compatibility</a>
<li><a href="#LiS_002d2_002e13-Kernel-and-Driver-Compatibility">5.2.4.5 LiS-2.13 Kernel and Driver Compatibility</a>
<li><a href="#LiS_002d2_002e12-Kernel-and-Driver-Compatibility">5.2.4.6 LiS-2.12 Kernel and Driver Compatibility</a>
<li><a href="#LiS_002d2_002e10-Kernel-and-Driver-Compatibility">5.2.4.7 LiS-2.10 Kernel and Driver Compatibility</a>
</li></ul>
<li><a href="#Linux-Fast_002dSTREAMS">5.2.5 Linux Fast-STREAMS</a>
</li></ul>
<li><a href="#Release-Notes">5.3 Release Notes</a>
<ul>
<li><a href="#Release-LiS_002d2_002e18_002e4_002erc2">5.3.1 Release LiS-2.18.4.rc2</a>
<li><a href="#Release-LiS_002d2_002e18_002e2">5.3.2 Release LiS-2.18.2</a>
<li><a href="#Release-LiS_002d2_002e18_002e2">5.3.3 Release LiS-2.18.2</a>
<li><a href="#Release-LiS_002d2_002e18_002e1">5.3.4 Release LiS-2.18.1</a>
<li><a href="#Release-LiS_002d2_002e16_002e19">5.3.5 Release LiS-2.16.19</a>
<li><a href="#Release-LiS_002d2_002e16_002e18_002d22">5.3.6 Release LiS-2.16.18-22</a>
<li><a href="#Release-LiS_002d2_002e16_002e18_002d21">5.3.7 Release LiS-2.16.18-21</a>
<li><a href="#Release-LiS_002d2_002e16_002e18_002d20">5.3.8 Release LiS-2.16.18-20</a>
<li><a href="#Release-LiS_002d2_002e16_002e18_002d19">5.3.9 Release LiS-2.16.18-19</a>
<li><a href="#Release-LiS_002d2_002e16_002e18_002d18">5.3.10 Release LiS-2.16.18-18</a>
<li><a href="#Release-LiS_002d2_002e16_002e18_002d17">5.3.11 Release LiS-2.16.18-17</a>
<li><a href="#Release-LiS_002d2_002e16_002e18_002d16">5.3.12 Release LiS-2.16.18-16</a>
<li><a href="#Release-LiS_002d2_002e16_002e18_002d15">5.3.13 Release LiS-2.16.18-15</a>
<li><a href="#Release-LiS_002d2_002e16_002e18_002d14">5.3.14 Release LiS-2.16.18-14</a>
<li><a href="#Release-LiS_002d2_002e16_002e18_002d13">5.3.15 Release LiS-2.16.18-13</a>
<li><a href="#Release-LiS_002d2_002e16_002e18_002d12">5.3.16 Release LiS-2.16.18-12</a>
<li><a href="#Release-LiS_002d2_002e16_002e18_002d11">5.3.17 Release LiS-2.16.18-11</a>
<li><a href="#Release-LiS_002d2_002e16_002e18_002d10">5.3.18 Release LiS-2.16.18-10</a>
<li><a href="#Release-LiS_002d2_002e16_002e18_002d9">5.3.19 Release LiS-2.16.18-9</a>
<li><a href="#Release-LiS_002d2_002e16_002e18_002d8">5.3.20 Release LiS-2.16.18-8</a>
<li><a href="#Release-LiS_002d2_002e16_002e18_002d7">5.3.21 Release LiS-2.16.18-7</a>
<li><a href="#Release-LiS_002d2_002e16_002e18_002d6">5.3.22 Release LiS-2.16.18-6</a>
<li><a href="#Release-LiS_002d2_002e16_002e18_002d5">5.3.23 Release LiS-2.16.18-5</a>
<li><a href="#Release-LiS_002d2_002e16_002e18_002d4">5.3.24 Release LiS-2.16.18-4</a>
<li><a href="#Release-LiS_002d2_002e16_002e18_002d3">5.3.25 Release LiS-2.16.18-3</a>
<li><a href="#Release-LiS_002d2_002e16_002e18_002d2">5.3.26 Release LiS-2.16.18-2</a>
<li><a href="#Release-LiS_002d2_002e16_002e18_002d1">5.3.27 Release LiS-2.16.18-1</a>
<li><a href="#Release-LiS_002d2_002e16_002e16_002d1">5.3.28 Release LiS-2.16.16-1</a>
</li></ul>
<li><a href="#Maturity">5.4 Maturity</a>
<ul>
<li><a href="#Pre_002dAlpha-Releases">5.4.1 Pre-Alpha Releases</a>
<li><a href="#Alpha-Releases">5.4.2 Alpha Releases</a>
<li><a href="#Beta-Releases">5.4.3 Beta Releases</a>
<li><a href="#Gamma-Releases">5.4.4 Gamma Releases</a>
<li><a href="#Production-Releases">5.4.5 Production Releases</a>
</li></ul>
<li><a href="#Bugs">5.5 Bugs</a>
<ul>
<li><a href="#Defect-Notices">5.5.1 Defect Notices</a>
<li><a href="#Known-Defects">5.5.2 Known Defects</a>
</li></ul>
<li><a href="#Schedule">5.6 Schedule</a>
<li><a href="#History">5.7 History</a>
</li></ul>
<li><a name="toc_Installation" href="#Installation">6 Installation</a>
<ul>
<li><a href="#Downloading">6.1 Downloading</a>
<ul>
<li><a href="#Downloading-the-Binary-RPM">6.1.1 Downloading the Binary RPM</a>
<li><a href="#Downloading-the-Debian-DEB">6.1.2 Downloading the Debian DEB</a>
<li><a href="#Downloading-the-Source-RPM">6.1.3 Downloading the Source RPM</a>
<li><a href="#Downloading-the-Debian-DSC">6.1.4 Downloading the Debian DSC</a>
<li><a href="#Downloading-the-Tar-Ball">6.1.5 Downloading the Tar Ball</a>
<li><a href="#Downloading-from-CVS">6.1.6 Downloading from CVS</a>
</li></ul>
<li><a href="#Configuration">6.2 Configuration</a>
<ul>
<li><a href="#Configuring-the-Binary-RPM">6.2.1 Configuring the Binary RPM</a>
<li><a href="#Configuring-the-Debian-DEB">6.2.2 Configuring the Debian DEB</a>
<li><a href="#Configuring-the-Source-RPM">6.2.3 Configuring the Source RPM</a>
<li><a href="#Configuring-the-Debian-DSC">6.2.4 Configuring the Debian DSC</a>
<li><a href="#Configuring-the-Tar-Ball">6.2.5 Configuring the Tar Ball</a>
<ul>
<li><a href="#Configure-Options">6.2.5.1 Configure Options</a>
<li><a href="#Environment-Variables">6.2.5.2 Environment Variables</a>
<li><a href="#Environment-Variables">6.2.5.3 Build</a>
</li></ul>
</li></ul>
<li><a href="#Building">6.3 Building</a>
<ul>
<li><a href="#Building-from-the-Source-RPM">6.3.1 Building from the Source RPM</a>
<li><a href="#Building-from-the-Debian-DSC">6.3.2 Building from the Debian DSC</a>
<li><a href="#Building-from-the-Tar-Ball">6.3.3 Building from the Tar Ball</a>
<ul>
<li><a href="#Building-from-the-Tar-Ball">6.3.3.1 Native Build</a>
<li><a href="#Building-from-the-Tar-Ball">6.3.3.2 Cross-Build</a>
<li><a href="#Building-from-the-Tar-Ball">6.3.3.3 NexusWare Build</a>
</li></ul>
</li></ul>
<li><a href="#Installing">6.4 Installing</a>
<ul>
<li><a href="#Installing-the-Binary-RPM">6.4.1 Installing the Binary RPM</a>
<li><a href="#Installing-the-Debian-DEB">6.4.2 Installing the Debian DEB</a>
<li><a href="#Installing-the-Tar-Ball">6.4.3 Installing the Tar Ball</a>
</li></ul>
<li><a href="#Removing">6.5 Removing</a>
<ul>
<li><a href="#Removing-the-Binary-RPM">6.5.1 Removing the Binary RPM</a>
<li><a href="#Removing-the-Debian-DEB">6.5.2 Removing the Debian DEB</a>
<li><a href="#Removing-the-Source-RPM">6.5.3 Removing the Source RPM</a>
<li><a href="#Removing-the-Debian-DSC">6.5.4 Removing the Debian DSC</a>
<li><a href="#Removing-the-Tar-Ball">6.5.5 Removing the Tar Ball</a>
</li></ul>
<li><a href="#Loading">6.6 Loading</a>
<ul>
<li><a href="#Loading">6.6.1 Normal Module Loading</a>
<ul>
<li><a href="#Loading">6.6.1.1 Linux STREAMS Module Loading</a>
<li><a href="#Loading">6.6.1.2 Linux Fast-STREAMS Module Loading</a>
</li></ul>
<li><a href="#Loading">6.6.2 NexusWare Module Loading</a>
</li></ul>
<li><a href="#Maintenance">6.7 Maintenance</a>
<ul>
<li><a href="#Makefile-Targets">6.7.1 Makefile Targets</a>
<ul>
<li><a href="#User-Targets">6.7.1.1 User Targets</a>
<li><a href="#Maintainer-Targets">6.7.1.2 Maintainer Targets</a>
<li><a href="#Clean-Targets">6.7.1.3 Clean Targets</a>
<li><a href="#Release-Targets">6.7.1.4 Release Targets</a>
<li><a href="#Logging-Targets">6.7.1.5 Logging Targets</a>
<li><a href="#Problem-Report-Targets">6.7.1.6 Problem Report Targets</a>
<li><a href="#Release-Archive-Targets">6.7.1.7 Release Archive Targets</a>
<li><a href="#RPM-Build-Targets">6.7.1.8 RPM Build Targets</a>
<li><a href="#Debian-Build-Targets">6.7.1.9 Debian Build Targets</a>
</li></ul>
</li></ul>
</li></ul>
<li><a name="toc_Troubleshooting" href="#Troubleshooting">7 Troubleshooting</a>
<ul>
<li><a href="#Test-Suites">7.1 Test Suites</a>
<ul>
<li><a href="#Pre_002dinstallation-Checks">7.1.1 Pre-installation Checks</a>
<ul>
<li><a href="#Pre_002dinstallation-Checks">7.1.1.1 Pre-Installation System Checks</a>
<li><a href="#Pre_002dinstallation-Checks">7.1.1.2 Pre-Installation Maintenance Checks</a>
<li><a href="#Pre_002dinstallation-Checks">7.1.1.3 Specific Pre-Installation Checks</a>
</li></ul>
<li><a href="#Post_002dinstallation-Checks">7.1.2 Post-installation Checks</a>
<ul>
<li><a href="#Running-Test-Suites">7.1.2.1 Running Test Suites</a>
</li></ul>
</li></ul>
<li><a href="#Problem-Reports">7.2 Problem Reports</a>
<ul>
<li><a href="#Problem-Report-Guidelines">7.2.1 Problem Report Guidelines</a>
<li><a href="#Generating-Problem-Reports">7.2.2 Generating Problem Reports</a>
<li><a href="#Automatic-Problem-Reports">7.2.3 Automatic Problem Reports</a>
<li><a href="#Stand-Alone-Problem-Reports">7.2.4 Stand Alone Problem Reports</a>
</li></ul>
<li><a href="#Known-Problems">7.3 Known Problems</a>
</li></ul>
<li><a name="toc_Copying" href="#Copying">Copying</a>
<ul>
<li><a href="#GNU-General-Public-License">GNU General Public License</a>
<ul>
<li><a href="#GNU-General-Public-License">Preamble</a>
<li><a href="#GNU-General-Public-License">How to Apply These Terms to Your New Programs</a>
</li></ul>
<li><a href="#GNU-Lesser-General-Public-License">GNU Lesser General Public License</a>
<ul>
<li><a href="#GNU-Lesser-General-Public-License">Preamble</a>
<li><a href="#GNU-Lesser-General-Public-License">How to Apply These Terms to Your New Libraries</a>
</li></ul>
</li></ul>
<li><a name="toc_Documentation-License" href="#Documentation-License">Documentation License</a>
<ul>
<li><a href="#GNU-Free-Documentation-License">GNU Free Documentation License</a>
<ul>
<li><a href="#GNU-Free-Documentation-License">Preamble</a>
<li><a href="#GNU-Free-Documentation-License">How to use this License for your documents</a>
</li></ul>
</li></ul>
<li><a name="toc_Indices" href="#Indices">Indices</a>
<ul>
<li><a href="#Concept-Index">Index of Concepts</a>
<li><a href="#Type-Index">Index of Data Types</a>
<li><a href="#Function-Index">Index of Functions and Macros</a>
<li><a href="#Variable-Index">Index of Variables and Constants</a>
<li><a href="#File-Index">Index of Files and Programs</a>
<li><a href="#Option-Index">Index of Configuration Options</a>
<li><a href="#Makefile-Target-Index">Index of Makefile Targets</a>
<li><a href="#Author-Index">Index of Authors</a>
</li></ul>
</li></ul>
</div>

<div class="footnote">
<hr>
<a name="texinfo-footnotes-in-document"></a><h4>Footnotes</h4><p class="footnote"><small>[<a name="fn-1" href="#fnd-1">1</a>]</small> David Grothe was the previous
maintainer of the LiS-2.18 releases; however, David is no longer maintaining any
version of LiS.  Please do not direct maintenance requests at David.</p>

   <p class="footnote"><small>[<a name="fn-2" href="#fnd-2">2</a>]</small> See <a href="#GNU_002fLinux-Distributions">GNU/Linux Distributions</a>, for more information.</p>

   <p class="footnote"><small>[<a name="fn-3" href="#fnd-3">3</a>]</small> If you are using a Debian release, please make sure to install the groff extension package
(`<samp><span class="samp">groff_ext</span></samp>'), as it contains the <samp><span class="command">refer</span></samp> or <samp><span class="command">grefer</span></samp> commands necessary for
including references in the manual pages.</p>

   <p class="footnote"><small>[<a name="fn-4" href="#fnd-4">4</a>]</small> Items marked as `<samp><span class="samp">TBD</span></samp>' are scheduled to have support deprecated.  That
is, in a future release, the distributions marked `<samp><span class="samp">TBD</span></samp>' will not longer be validated before
release.</p>

   <p class="footnote"><small>[<a name="fn-5" href="#fnd-5">5</a>]</small> At a later date, it
is possible to move this package into the kernel, however, with continued resistance to STREAMS from
within the <dfn>Linux</dfn> developer community, this is currently unlikely.</p>

   <p class="footnote"><small>[<a name="fn-6" href="#fnd-6">6</a>]</small> This
change is far from small because it outdates <samp><span class="file">libLiS.a</span></samp> and <samp><span class="file">libLiS.so</span></samp>.  A
<samp><span class="file">libLiS.a</span></samp> or <samp><span class="file">libLiS.so</span></samp> from a previous version will not work correctly.  All
applications statically linking <samp><span class="file">libLiS.a</span></samp> must be recompiled to use a <samp><span class="file">libLiS.a</span></samp> from the
more recent version.  Unfortunately, LiS did not include versioning on its libraries.  This has been
corrected with the OpenSS7 release of LiS.</p>

   <p class="footnote"><small>[<a name="fn-7" href="#fnd-7">7</a>]</small> Regparm capable architectures are really just <code>__i386__</code>
and similar such as <code>__x86_64__</code> and <code>k8</code>.</p>

   <p class="footnote"><small>[<a name="fn-8" href="#fnd-8">8</a>]</small> The <code>tirdwr</code> module included with the Gcom LiS-2.16.18 (and even more
current) releases is almost completely disfunctional and has been replaced in entirety.</p>

   <p class="footnote"><small>[<a name="fn-9" href="#fnd-9">9</a>]</small> See section <b>NO
WARRANY</b> under <a href="#GNU-General-Public-License">GNU General Public License</a>.</p>

   <p class="footnote"><small>[<a name="fn-10" href="#fnd-10">10</a>]</small> Not
all distributions support the `<samp><span class="samp">%dev</span></samp>' RPM macro: a case in point is the SuSE
8.0 distribution which uses an older version of <samp><span class="command">rpm</span></samp>.  Distributions
that do not support the `<samp><span class="samp">%dev</span></samp>' macro will build devices as a `<samp><span class="samp">%post</span></samp>'
operation.  Note also that not all release packages contain devices.  Only
packages that provide STREAMS character device drivers need devices, and then
only when the `<samp><span class="samp">specfs</span></samp>' or `<samp><span class="samp">devfsd</span></samp>' is not being used.</p>

   <p class="footnote"><small>[<a name="fn-11" href="#fnd-11">11</a>]</small> Note that on <cite>Mandrakelinux</cite>, unlike other RPM
kernel distributions, kernel packages for the ix86 architectures are always
placed in i586 architecture packages regardless of the true processor
architecture of the kernel package.  <samp><span class="command">configure</span></samp> detects this and builds
the appropriate packages.</p>

   <p class="footnote"><small>[<a name="fn-12" href="#fnd-12">12</a>]</small> Note that the `<samp><span class="samp">_kversion</span></samp>' of
`<samp><span class="samp">2.6.17-1.2139_FC5</span></samp>' is only an example.  Note also that only release
packages that contain kernel modules will contain a <samp><span class="file">core</span></samp> subpackage.</p>

   <p class="footnote"><small>[<a name="fn-13" href="#fnd-13">13</a>]</small> Note that only release packages
that contain kernel modules and that export versioned symbols will contain a
<samp><span class="file">info</span></samp> subpackage.  Also, this subpackage is only applicable to 2.4 series
kernels and is not necessary and not built for 2.6 series kernels.</p>

   <p class="footnote"><small>[<a name="fn-14" href="#fnd-14">14</a>]</small> Note that the `<samp><span class="samp">_kversion</span></samp>' of
`<samp><span class="samp">2.6.17-1.2139_FC5</span></samp>' is only an example.</p>

   <p class="footnote"><small>[<a name="fn-15" href="#fnd-15">15</a>]</small> Note that not all release packages contain devices.  Only packages
that provide STREAMS character device drivers need devices, and then only when
the `<samp><span class="samp">specfs</span></samp>' or `<samp><span class="samp">devfsd</span></samp>' is not being used.</p>

   <p class="footnote"><small>[<a name="fn-16" href="#fnd-16">16</a>]</small> Note that not all releases have source DEB packages.  Release packages
that do not contain kernel modules do not generate a source DEB package.</p>

   <p class="footnote"><small>[<a name="fn-17" href="#fnd-17">17</a>]</small> Note that on <cite>Mandrakelinux</cite>, unlike other DEB
kernel distributions, kernel packages for the ix86 architectures are always
placed in i586 architecture packages regardless of the true processor
architecture of the kernel package.  <samp><span class="command">configure</span></samp> detects this and builds
the appropriate packages.</p>

   <p class="footnote"><small>[<a name="fn-18" href="#fnd-18">18</a>]</small> Note that the `<samp><span class="samp">_kversion</span></samp>' of
`<samp><span class="samp">2.6.17-1.2139_FC5</span></samp>' is only an example.  Note also that only release
packages that contain kernel modules will contain a <samp><span class="file">core</span></samp> subpackage.</p>

   <p class="footnote"><small>[<a name="fn-19" href="#fnd-19">19</a>]</small> Note that only release packages
that contain kernel modules and that export versioned symbols will contain a
<samp><span class="file">info</span></samp> subpackage.  Also, this subpackage is only applicable to 2.4 series
kernels and is not necessary and not built for 2.6 series kernels.</p>

   <p class="footnote"><small>[<a name="fn-20" href="#fnd-20">20</a>]</small> Note that the `<samp><span class="samp">_kversion</span></samp>' of
`<samp><span class="samp">2.6.17-1.2139_FC5</span></samp>' is only an example.</p>

   <p class="footnote"><small>[<a name="fn-21" href="#fnd-21">21</a>]</small> A notable exception is
Debian.</p>

   <p class="footnote"><small>[<a name="fn-22" href="#fnd-22">22</a>]</small> Note that the
`<samp><span class="samp">_kversion</span></samp>' of `<samp><span class="samp">2.6.17-1.2139_FC5</span></samp>' is only an example.</p>

   <p class="footnote"><small>[<a name="fn-23" href="#fnd-23">23</a>]</small> Note that the `<samp><span class="samp">_kversion</span></samp>'
of `<samp><span class="samp">2.6.17-1.2139_FC5</span></samp>' is only an example.  Also, note that the `<samp><span class="samp">info</span></samp>'
subpackage is only applicable to the 2.4 kernel series.</p>

   <p class="footnote"><small>[<a name="fn-24" href="#fnd-24">24</a>]</small> In
particular, some <cite>Debian</cite> systems do not load the <samp><span class="command">groff</span></samp>
extensions package and do not have <samp><span class="command">grefer</span></samp> installed.  Although this is
an oversight on the configuration of the particular <cite>Debian</cite> system, we
accomodate such misconfiguration with this feature.</p>

   <p class="footnote"><small>[<a name="fn-25" href="#fnd-25">25</a>]</small> In particular, some <cite>Debian</cite> systems do not load the
<samp><span class="command">groff</span></samp> extensions package and do not have <samp><span class="command">grefer</span></samp> installed. 
Although this is an oversight on the configuration of the particular
<cite>Debian</cite> system, we accomodate such misconfiguration with this feature.</p>

   <p class="footnote"><small>[<a name="fn-26" href="#fnd-26">26</a>]</small> Note that the `<samp><span class="samp">_kversion</span></samp>' of `<samp><span class="samp">2.6.17-1.2139_FC5</span></samp>' is only an example.</p>

   <p class="footnote"><small>[<a name="fn-27" href="#fnd-27">27</a>]</small> Note that the `<samp><span class="samp">_kversion</span></samp>' of `<samp><span class="samp">2.6.17-1.2139_FC5</span></samp>' is only an example.</p>

   <p class="footnote"><small>[<a name="fn-28" href="#fnd-28">28</a>]</small> Because it <em>is</em> a
cross-build, the kernel version on the build machine is unlikely to be the
kernel version of the target machine, except by coincidence.</p>

   <p class="footnote"><small>[<a name="fn-29" href="#fnd-29">29</a>]</small> Although I have not
tried it, because we use GNU <samp><span class="command">autoconf</span></samp> for configuration, these
instructions should work equally well for the Solaris <cite>NexusWare</cite>
cross-building environment as it does for the Linux <cite>NexusWare</cite>
cross-building environment.</p>

   <p class="footnote"><small>[<a name="fn-30" href="#fnd-30">30</a>]</small> Note that the
`<samp><span class="samp">_kversion</span></samp>' of `<samp><span class="samp">2.6.17-1.2139_FC5</span></samp>' is only an example.</p>

   <p class="footnote"><small>[<a name="fn-31" href="#fnd-31">31</a>]</small> At some time I expect to create an
`<samp><span class="samp">install-nexusware</span></samp>' target that will make the necessary modifications to
the <samp><span class="file">.spec</span></samp> and <samp><span class="file">rc.4</span></samp> files automatically.</p>

   <p class="footnote"><small>[<a name="fn-32" href="#fnd-32">32</a>]</small> <samp><span class="file">/usr/libexec/LiS</span></samp> is
just an example, the actual location is <samp><span class="file">${libexecdir}/${PACKAGE}</span></samp>, which varies from
distribution to distribution (as some distributions such as Mandriva do not have a libexec
directory).</p>

   <p class="footnote"><small>[<a name="fn-33" href="#fnd-33">33</a>]</small> Therefore, it is possible to download
the package, configure it, and then uninstall it.  This is handy if you do not have the sources used
to build and install the package immediately available.</p>

   <p class="footnote"><small>[<a name="fn-34" href="#fnd-34">34</a>]</small> This is useful from the <cite>OpenSS7 Master Package</cite>.</p>

   <p class="footnote"><small>[<a name="fn-35" href="#fnd-35">35</a>]</small> Note that because logging targets invoke a pipe, <samp><span class="command">make</span></samp> does not
return the correct return status (always returns success if the <samp><span class="command">tee</span></samp> operation is
successful).  Therefore, these targets should not be invoked by scripts that need to use the return
value from <samp><span class="command">make</span></samp>.</p>

   <p class="footnote"><small>[<a name="fn-36" href="#fnd-36">36</a>]</small> This particular check has caught some namespace
polution that has occurred in the 2.6.11 kernel.</p>

   <p class="footnote"><small>[<a name="fn-37" href="#fnd-37">37</a>]</small> `<samp><span class="samp">send-pr</span></samp>' launches the user's <var>EDITOR</var> to
edit the problem report before submitting it.</p>

   <p><hr></div>

</body></html>

